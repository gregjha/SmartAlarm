if (self.CavalryLogger) { CavalryLogger.start_js(["2uowP"]); }

__d("MessengerRTCGroupCallParticipantsPickerDialog.react",["cx","fbt","invariant","FBRTCCore","immutable","ImmutableObject","MessengerDialog.react","MessengerDialogButton.react","MessengerDialogCancelButton.react","MessengerDialogHeader.react","MessengerDialogTitle.react","MessengerRTCFunnelLogger","MessengerRTCGroupCallContactList.react","MessengerRTCGroupCallRingParticipantsRow.react","MessengerRTCGroupCallThreadRow.react","React","RTCUser","URI"],(function a(b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k,l,m=c("React").PropTypes,n=460,o=5;k=babelHelpers.inherits(p,c("React").Component);l=k&&k.prototype;function p(q){__p&&__p();l.constructor.call(this,q);this.state={isParticipantSelected:this.props.participants.mapEntries(function(s){var t=s[0],u=s[1];return[u.fbid?u.fbid:t,this.props.participants.size<=o]}.bind(this))};this.$MessengerRTCGroupCallParticipantsPickerDialog3=function(){var s=this.$MessengerRTCGroupCallParticipantsPickerDialog4().map(function(t){return t.fbid});c("MessengerRTCFunnelLogger").appendAction("participant_picker_click_call");if(this.props.handleCall)this.props.handleCall(s);else c("FBRTCCore").startGroupCall({conferenceName:this.props.conferenceName,hasVideo:this.props.hasVideo,trigger:this.props.trigger,usersToRing:s});this.props.onUnmount()}.bind(this);var r=this.props.participants.valueSeq().toArray().map(function(s){var t=s.big_image_src||s.image_src;s.fbid||j(0);return new(c("RTCUser"))({FBID:s.fbid,profileUrl:new(c("URI"))(s.href),profilePictureUrl:t,isMessengerUser:!!s.is_messenger_user,isPartiesUser:!!s.is_parties_user,userName:s.name,userShortName:s.short_name,vanity:s.vanity||""})});this.$MessengerRTCGroupCallParticipantsPickerDialog1=r.sort(function(s,t){return s.userName.localeCompare(t.userName)})}p.prototype.render=function(){var q=this.props,r=q.participants,s=q.thread,t=q.viewerID;return c("React").createElement(c("MessengerDialog.react"),{onToggle:function(){c("MessengerRTCFunnelLogger").endFunnel("participant_picker_dismissed");this.props.onUnmount&&this.props.onUnmount()}.bind(this),type:"default",width:n},c("React").createElement("div",{className:"_2m1r"},c("React").createElement(c("MessengerDialogHeader.react"),null,c("React").createElement(c("MessengerDialogCancelButton.react"),{onClick:this.$MessengerRTCGroupCallParticipantsPickerDialog2}),c("React").createElement(c("MessengerDialogTitle.react"),null,i._("Ring Group Members")),c("React").createElement(c("MessengerDialogButton.react"),{label:i._("Call"),onClick:this.$MessengerRTCGroupCallParticipantsPickerDialog3,disabled:this.$MessengerRTCGroupCallParticipantsPickerDialog4().length===0,type:"primary"})),c("React").createElement(c("MessengerRTCGroupCallThreadRow.react"),{participants:r,thread:s,viewerID:t}),c("React").createElement(c("MessengerRTCGroupCallRingParticipantsRow.react"),{names:this.$MessengerRTCGroupCallParticipantsPickerDialog4().map(function(u){var v=u.name;return v}).sort(function(u,v){return u.localeCompare(v)})}),c("React").createElement(c("MessengerRTCGroupCallContactList.react"),{remoteUsers:this.$MessengerRTCGroupCallParticipantsPickerDialog1,isParticipantSelected:this.state.isParticipantSelected,onClick:function(u){this.setState({isParticipantSelected:this.state.isParticipantSelected.set(u,!this.state.isParticipantSelected.get(u))})}.bind(this)})))};p.prototype.$MessengerRTCGroupCallParticipantsPickerDialog2=function(){c("MessengerRTCFunnelLogger").appendAction("participant_picker_click_cancel")};p.prototype.$MessengerRTCGroupCallParticipantsPickerDialog4=function(){return this.props.participants.filter(function(q,r){return this.state.isParticipantSelected.get(q.fbid?q.fbid:r)}.bind(this)).toArray()};p.propTypes={participants:m.instanceOf(c("immutable").Map).isRequired,thread:m.instanceOf(c("ImmutableObject")),viewerID:m.string.isRequired,trigger:m.string.isRequired,conferenceName:m.string.isRequired,hasVideo:m.bool.isRequired,handleCall:m.func,onUnmount:m.func.isRequired};f.exports=p}),null);