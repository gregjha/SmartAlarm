if (self.CavalryLogger) { CavalryLogger.start_js(["5wjxI"]); }

__d("MessengerSharedLinksContainer.react",["fbt","messengerInfoPanelSectionReact","MessengerSharedLinks.react","React","RelayClassic"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("messengerInfoPanelSectionReact").jsComponent,l=c("React").PropTypes,m=10;i=babelHelpers.inherits(n,c("React").PureComponent);j=i&&i.prototype;function n(o){__p&&__p();j.constructor.call(this,o);this.state={canShowMore:false,isFetchingMore:false,numLinks:0,fetchCount:m};this.$MessengerSharedLinksContainer1=function(){this.props.relay.setVariables({count:this.props.relay.variables.count+m},function(p){if(p.done||p.aborted){this.setState({isFetchingMore:false});if(p.done)this.setState({canShowMore:this.props.sharedLinks.shared_links.length>=this.state.fetchCount})}}.bind(this));this.setState({isFetchingMore:true,fetchCount:this.state.fetchCount+m})}.bind(this)}n.prototype.componentWillUpdate=function(o){if(o.sharedLinks&&this.state.numLinks!==o.sharedLinks.shared_links.length){var p=o.sharedLinks.shared_links.length;this.setState({canShowMore:p>=this.state.fetchCount,isFetchingMore:false,numLinks:p})}};n.prototype.componentDidMount=function(){var o=this.props.sharedLinks,p=o&&o.shared_links?o.shared_links.length:0;this.setState({canShowMore:p>=this.state.fetchCount,isFetchingMore:false,numLinks:p})};n.prototype.render=function(){if(!this.props.threadFBID||!this.props.sharedLinks||!this.props.sharedLinks.shared_links||this.props.sharedLinks.shared_links.length===0)return null;return c("React").createElement(k,{isCollapsible:true,isCollapsed:this.props.isCollapsed,customColor:this.props.customColor,onToggle:this.props.onToggle,title:h._("Shared Links")},c("React").createElement(c("MessengerSharedLinks.react"),{canShowMore:this.state.canShowMore,customColor:this.props.customColor,isFetchingMore:this.state.isFetchingMore,sharedLinks:this.props.sharedLinks.shared_links,threadFBID:this.props.threadFBID,onClickShowMore:this.$MessengerSharedLinksContainer1}))};n.propTypes={customColor:l.string,isCollapsed:l.bool.isRequired,sharedLinks:l.object,threadFBID:l.string,onToggle:l.func.isRequired};f.exports=c("RelayClassic").createContainer(n,{initialVariables:{count:m},fragments:{sharedLinks:function o(){return function(p){return{children:[{calls:[{kind:"Call",metadata:{type:"Int"},name:"first",value:{kind:"CallVariable",callVariableName:"count"}}],children:[].concat.apply([],[c("RelayClassic").QL.__frag(p)]),fieldName:"shared_links",kind:"Field",metadata:{canHaveSubselections:true,isPlural:true},type:"StoryAttachment"},{fieldName:"id",kind:"Field",metadata:{isGenerated:true,isRequisite:true},type:"ID"}],id:c("RelayClassic").QL.__id(),kind:"Fragment",metadata:{},name:"MessengerSharedLinksContainer_react_SharedLinksRelayQL",type:"MessageThread"}}(c("MessengerSharedLinks.react").getShareLinkFragment())}}})}),null);