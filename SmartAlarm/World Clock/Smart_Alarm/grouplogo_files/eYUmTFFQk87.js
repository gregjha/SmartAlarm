if (self.CavalryLogger) { CavalryLogger.start_js(["qltax"]); }

__d("MessengerThreadInfoPanelContainer.react",["fbt","AsyncRequest","IgnoreMessagesTypedLogger","MercuryConfig","MessengerMessageRequestsTypedLogger","immutable","ImmutableObject","MercuryAPIArgsSource","MercuryIDs","MercuryLogMessageType","MercuryMessageActions","MercuryMessageObject","MercuryThreadActions","MercuryThreadInfo","MercuryTriodeSourceUtil","MessagingTag","MessengerActions","messengerDialogsRe","messengerConfirmBlockThreadDialogReact","messengerConfirmLeaveGroupDialogReact","messengerContactActionsRe","MessengerAdminGroupUtils","MessengerLeaveGroupAction","MessengerThreadInfoPanelScrollableArea.react","MessengerSettingsActions","MessengerSettingsStore","MessengerThreadInfoPanel.react","ReactComponentWithPureRenderMixin","React","StoreAndPropBasedStateMixin","URI","XMessagingSetThreadStateController","getPageIDFromThreadID"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i=c("messengerConfirmBlockThreadDialogReact").jsComponent,j=c("messengerConfirmLeaveGroupDialogReact").jsComponent,k=c("messengerContactActionsRe").actions,l=c("React").PropTypes,m=c("React").createClass({displayName:"MessengerThreadInfoPanelContainer",mixins:[c("ReactComponentWithPureRenderMixin"),c("StoreAndPropBasedStateMixin")(c("MessengerSettingsStore"))],propTypes:{contactData:l.object,participants:l.instanceOf(c("immutable").Map).isRequired,thread:l.instanceOf(c("ImmutableObject")).isRequired,viewer:l.string.isRequired},statics:{calculateState:function n(){var o=c("MessengerSettingsStore").getSettings(),p=o.links_section_collapsed,q=o.associated_object_section_collapsed,r=o.people_section_collapsed,s=o.photos_section_collapsed,t=o.files_section_collapsed,u=o.thread_section_collapsed,v=o.thread_stats_section_collapsed,w=o.group_section_collapsed,x=o.group_approval_section_collapsed;return{links_section_collapsed:p,associated_object_section_collapsed:q,people_section_collapsed:r,photos_section_collapsed:s,files_section_collapsed:t,thread_section_collapsed:u,thread_stats_section_collapsed:v,group_section_collapsed:w,group_approval_section_collapsed:x}}},render:function n(){var o=this.props.contactData||{},p=this.state,q=p.links_section_collapsed,r=p.associated_object_section_collapsed,s=p.people_section_collapsed,t=p.photos_section_collapsed,u=p.files_section_collapsed,v=p.thread_section_collapsed,w=p.thread_stats_section_collapsed,x=p.group_section_collapsed,y=p.group_approval_section_collapsed;return c("React").createElement(c("MessengerThreadInfoPanelScrollableArea.react"),{className:this.props.className},function(z,A,B,C){return c("React").createElement(c("MessengerThreadInfoPanel.react"),{contact:o.contact,getIsScrolledToBottom:B,getScrollableHeight:C,isUserActive:o.isUserActive||false,lastActive:o.lastActive,linksSectionCollapsed:q,onArchive:this._handleArchive,onContactAction:this._handleContactAction,onContactSelect:this._handleContactSelect,onDelete:this._handleDelete,onLeaveGroup:this._handleLeaveGroup,onLinksSectionToggle:this._handleLinksSectionToggle,onMarkRead:this._handleMarkRead,onMarkSpam:this._handleMarkSpam,onMarkUnread:this._handleMarkUnread,onMute:this._handleMute,onMuteChange:this._handleMuteChange,onAssociatedObjectSectionToggle:this._handleAssociatedObjectSectionToggle,onPeopleSectionToggle:this._handlePeopleSectionToggle,onPhotosSectionToggle:this._handlePhotosSectionToggle,onFilesSectionToggle:this._handleFilesSectionToggle,onThreadOptionsSectionToggle:this._handleThreadSectionToggle,onThreadStatsSectionToggle:this._handleThreadStatsSectionToggle,onGroupOptionsSectionToggle:this._handleGroupOptionsSectionToggle,onGroupApprovalOptionsSectionToggle:this._handleGroupOptionsApprovalSectionToggle,onThreadNameChange:this._handleThreadNameChange,onThreadPhotoChange:this._handleThreadPhotoChange,onUnmute:this._handleUnmute,onIgnore:this._handleIgnore,onBlock:this._handleBlock,onUnblock:this._handleUnblock,showBlock:this.props.thread.is_canonical_user&&this.props.thread.other_user_fbid&&this.props.viewer!==this.props.thread.other_user_fbid,participants:this.props.participants,associatedObjectSectionCollapsed:r,peopleSectionCollapsed:s,photosSectionCollapsed:t,filesSectionCollapsed:u,platform:o.platform,prevIsScrolledToBottom:A,prevScrollableHeight:z,showLeaveGroup:this.props.thread.is_subscribed&&!this.props.thread.is_canonical,showReport:this._isPageChat(),thread:this.props.thread,threadOptionsSectionCollapsed:v,threadStatsSectionCollapsed:w,groupOptionsSectionCollapsed:x,groupOptionsApprovalsSectionCollapsed:y,viewer:this.props.viewer})}.bind(this))},_handleArchive:function n(){this._getThreadActions().archive(this.props.thread.thread_id);c("MessengerActions").selectThread(null)},_handleDelete:function n(){this._getThreadActions()["delete"](this.props.thread.thread_id);c("MessengerActions").selectThread(null)},_handleMarkRead:function n(){this._getThreadActions().markRead(this.props.thread.thread_id)},_handleMarkSpam:function n(){this._getThreadActions().markSpam(this.props.thread.thread_id);c("MessengerActions").selectThread(null)},_handleMarkUnread:function n(){this._getThreadActions().markUnread(this.props.thread.thread_id)},_handleMute:function n(o){this._getThreadActions().updateMuteSetting(this.props.thread.thread_id,o)},_handleUnmute:function n(){this._getThreadActions().unmute(this.props.thread.thread_id)},_handleIgnore:function n(){this._getThreadActions().changeFolder(this.props.thread.thread_id,"other");c("MessengerActions").selectThread(null);new(c("IgnoreMessagesTypedLogger"))().setEvent("ignore_confirmed").setThreadID(this.props.thread.thread_fbid).setPlatform("messengerdotcom").log()},_handleBlock:function n(){var o,p=this,q=this.props.thread,r=q.thread_id;if(c("MercuryConfig").WMBF)(function(){var s=p.props.contactData&&p.props.contactData.contact.short_name||h._("sender");if(r)p._getThreadActions().blockIgnoreOnMessengerDotCom(true,r,function(){this._handleAfterBlock(s)}.bind(p))})();else this._getThreadActions().blockOnMessengerDotCom(r)},_handleAfterBlock:function n(o){var p=this.props,q=p.thread,r=p.viewer;c("messengerDialogsRe").showDialog(function(){return c("React").createElement(i,{participantName:o})});var s=c("MercuryIDs").getThreadKeyfromThreadIDUserID(q.thread_id,c("MercuryIDs").getParticipantIDFromUserID(r));if(q.folder===c("MessagingTag").PENDING)new(c("MessengerMessageRequestsTypedLogger"))().setAction("message_requests_block_request").setThreadID(c("MercuryIDs").getThreadFBIDFromThreadID(q.thread_id)).setSurface("thread").setFolderType(c("MessagingTag").PENDING).setThreadKey(s).setEntryPoint("settings").log()},_handleUnblock:function n(){this._getThreadActions().unblockOnMessengerDotCom(this.props.thread.thread_id)},_handleMuteChange:function n(o){this._getThreadActions().updateMuteSetting(this.props.thread.thread_id,o)},_handleContactSelect:function n(o,event){var p=c("MercuryIDs").getThreadIDFromParticipantID(o.uid);p&&c("MessengerActions").selectThread(p)},_handleContactAction:function n(o,p){__p&&__p();if(c("MercuryIDs").getUserIDFromParticipantID(p.uid)!==this.props.viewer)switch(o){case k.MESSAGE:this._handleContactSelect(p);break;case k.PROFILE:var q=this.props.participants.get(p.uid);if(q&&q.href)window.open(q.href);else this._handleContactSelect(p);break;case k.REMOVE:if(!c("MercuryThreadInfo").isEmptyLocalThread(this.props.thread)){var r=new(c("URI"))("/chat/remove_participants/");r.addQueryData({uid:c("MercuryIDs").getUserIDFromParticipantID(p.uid),tid:this.props.thread.thread_fbid});var s=new(c("AsyncRequest"))(r);s.send()}break}switch(o){case k.REMOVE_OWNER:if(!c("MercuryThreadInfo").isEmptyLocalThread(this.props.thread))this._getThreadActions().changeGroupAdmins(this.props.thread.thread_fbid,[c("MercuryIDs").getUserIDFromParticipantID(p.uid)],false);break;case k.ADD_OWNER:if(!c("MercuryThreadInfo").isEmptyLocalThread(this.props.thread))this._getThreadActions().changeGroupAdmins(this.props.thread.thread_fbid,[c("MercuryIDs").getUserIDFromParticipantID(p.uid)],true);break}},_handleLeaveGroup:function n(){var o,p=this;if(this.props.viewer)(function(){var q=c("MessengerAdminGroupUtils").isViewerAdmin(p.props.thread.admin_ids,p.props.viewer);c("messengerDialogsRe").showDialog(function(){return c("React").createElement(j,{onLeave:this._onLeaveGroupConfirm,isViewerAdmin:q,thread:this.props.thread})}.bind(p))})()},_onLeaveGroupConfirm:function n(){c("MessengerLeaveGroupAction").leaveGroup(this.props.thread,this.props.viewer)},_handleThreadNameChange:function n(o){var p=c("MessengerAdminGroupUtils").isJoinableThread(this.props.thread);if(!p)this._getMessageActions().send(this._getMessageObject().constructLogMessageObject(c("MercuryTriodeSourceUtil").getMercuryTriodeSource(),this.props.thread.thread_id,c("MercuryLogMessageType").THREAD_NAME,{name:o}),null,c("MercuryAPIArgsSource").MESSENGER);else{var q=c("XMessagingSetThreadStateController").getURIBuilder().getURI();new(c("AsyncRequest"))().setURI(q).setData({thread_id:this.props.thread.thread_fbid,thread_name:o}).send()}},_handleThreadPhotoChange:function n(o,p){this._getMessageActions().send(this._getMessageObject().constructLogMessageObject(c("MercuryTriodeSourceUtil").getMercuryTriodeSource(),o,c("MercuryLogMessageType").THREAD_IMAGE,{image:p.metadata[0]}))},_handleAssociatedObjectSectionToggle:function n(){c("MessengerSettingsActions").changeSettings({associated_object_section_collapsed:!this.state.associated_object_section_collapsed})},_handlePeopleSectionToggle:function n(){c("MessengerSettingsActions").changeSettings({people_section_collapsed:!this.state.people_section_collapsed})},_handlePhotosSectionToggle:function n(){c("MessengerSettingsActions").changeSettings({photos_section_collapsed:!this.state.photos_section_collapsed})},_handleFilesSectionToggle:function n(){c("MessengerSettingsActions").changeSettings({files_section_collapsed:!this.state.files_section_collapsed})},_handleThreadSectionToggle:function n(){c("MessengerSettingsActions").changeSettings({thread_section_collapsed:!this.state.thread_section_collapsed})},_handleThreadStatsSectionToggle:function n(){c("MessengerSettingsActions").changeSettings({thread_stats_section_collapsed:!this.state.thread_stats_section_collapsed})},_handleGroupOptionsSectionToggle:function n(){c("MessengerSettingsActions").changeSettings({group_section_collapsed:!this.state.group_section_collapsed})},_handleGroupOptionsApprovalSectionToggle:function n(){c("MessengerSettingsActions").changeSettings({group_approval_section_collapsed:!this.state.group_approval_section_collapsed})},_handleLinksSectionToggle:function n(){c("MessengerSettingsActions").changeSettings({links_section_collapsed:!this.state.links_section_collapsed})},_getThreadActions:function n(){return c("MercuryThreadActions").getForFBID(this.props.viewer)},_getMessageActions:function n(){return c("MercuryMessageActions").getForFBID(this.props.viewer)},_getMessageObject:function n(){return c("MercuryMessageObject").getForFBID(this.props.viewer)},_isPageChat:function n(){return!!c("getPageIDFromThreadID")(this.props.thread.thread_id)}});f.exports=m}),null);