if (self.CavalryLogger) { CavalryLogger.start_js(["zTXKH"]); }

__d("MessengerThreadSearchActions",["MessengerDispatcher","keyMirror"],(function a(b,c,d,e,f,g){"use strict";var h=c("keyMirror")({CHANGE_RESULT_INDEX:null,GET_MORE_CONTEXT:null,GET_MORE_THREADS:null}),i={Types:h,selectPrevious:function j(){c("MessengerDispatcher").dispatch({type:h.CHANGE_RESULT_INDEX,delta:1})},selectNext:function j(){c("MessengerDispatcher").dispatch({type:h.CHANGE_RESULT_INDEX,delta:-1})},getMoreSearchContext:function j(k){c("MessengerDispatcher").dispatch({type:h.GET_MORE_CONTEXT,direction:k})},loadMoreThreads:function j(){c("MessengerDispatcher").dispatch({type:h.GET_MORE_THREADS})}};f.exports=i}),null);
__d("MessengerContentSearchFunnelLoggerConstants",[],(function a(b,c,d,e,f,g){"use strict";var h=Object.freeze({BROWSE_MESSAGE_IN_THREAD:"browse_message_in_thread",END_CONTENT_SEARCH:"end_content_search",INITIATE_CONTENT_SEARCH:"initiate_content_search",LOAD_MORE_THREADS:"load_more_threads",NUM_BROWSE_ACTIONS_WITHIN_THREAD:"num_browse_actions_within_thread",SELECT_THREAD:"select_thread",THREAD_IMPRESSIONS:"thread_impressions",LOAD_MESSAGE_IN_THREAD:"load_message_in_thread",BROWSE_CONTEXT:"browse_context"}),i=Object.freeze({SEARCH_WITHIN_THREAD:"search_within_thread",SEARCH_ALL_THREADS:"search_all_threads",END_WITH_NEW_SEARCH:"end_with_new_search",END_WITH_DONE_BUTTON:"end_with_done_button",END_WITH_X_BUTTON:"end_with_x_button",END_WITH_BACK_BUTTON:"end_with_back_button"});f.exports={FUNNEL_NAME:"WWW_MESSENGER_CONTENT_SEARCH_FUNNEL",FUNNEL_LOGGER_EVENTS:h,FUNNEL_LOGGER_TAGS:i}}),null);
__d("MessengerThreadSearchContainer.react",["cx","fbt","AbstractTextInput.react","Bootloader","MessengerActions","MessengerContentSearchFunnelLoggerConstants","MessengerThreadSearchActions","messengerButtonReact","MessengerSpinner.react","React"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("messengerButtonReact").jsComponent,m=c("React").PropTypes,n=c("MessengerContentSearchFunnelLoggerConstants").FUNNEL_LOGGER_TAGS,o=n.END_WITH_DONE_BUTTON,p=n.END_WITH_NEW_SEARCH,q=n.SEARCH_WITHIN_THREAD;j=babelHelpers.inherits(r,c("React").PureComponent);k=j&&j.prototype;function r(){var s,t;for(var u=arguments.length,v=Array(u),w=0;w<u;w++)v[w]=arguments[w];return t=(s=k.constructor).call.apply(s,[this].concat(v)),this.state={currentQuery:undefined},this.$MessengerThreadSearchContainer5=function(){this.$MessengerThreadSearchContainer4({name:p,query:this.refs.input.getValue()});c("MessengerActions").changeQuery(this.refs.input.getValue())}.bind(this),this.$MessengerThreadSearchContainer6=function(x){this.setState({currentQuery:x.target.value})}.bind(this),t}r.prototype.componentDidMount=function(){this.refs.input&&this.refs.input.focusInput()};r.prototype.render=function(){var s=i._("Previous result"),t=i._("Next result"),u=this.props.query||!this.state.currentQuery;return c("React").createElement("div",{className:"_33p7",onClick:this.$MessengerThreadSearchContainer1,role:"presentation"},c("React").createElement(l,{"aria-label":s,className:"_-19 _b-u",disabled:this.props.selectedIndex>=this.props.totalCount-1,label:"",onClick:c("MessengerThreadSearchActions").selectPrevious,role:"button",tabIndex:0,title:s,type:"primary"}),c("React").createElement(l,{"aria-label":t,className:"_-19 _b-v",disabled:this.props.selectedIndex===0,label:"",onClick:c("MessengerThreadSearchActions").selectNext,role:"button",tabIndex:0,title:t,type:"primary"}),this.props.query?this.$MessengerThreadSearchContainer2():this.$MessengerThreadSearchContainer3(),c("React").createElement("div",{className:"_2krq"},this.props.loading?c("React").createElement(c("MessengerSpinner.react"),null):null),c("React").createElement(l,{className:"__h6",label:u?i._("Done"):i._("Search"),onClick:function(){if(u){this.$MessengerThreadSearchContainer4({name:o});c("MessengerActions").changeQuery()}else this.$MessengerThreadSearchContainer5()}.bind(this),ref:"threadNameDoneButton",role:"button",tabIndex:0,type:"primary"}))};r.prototype.$MessengerThreadSearchContainer2=function(){return c("React").createElement("div",{className:"_3jv8"},this.props.totalCount===0?i._("No results found for \"{query_name}\"",[i.param("query_name",this.props.query)]):i._("{selected_index} of {total_count} results for \"{query_name}\"",[i.param("selected_index",this.props.selectedIndex+1),i.param("total_count",this.props.totalCount),i.param("query_name",this.props.query)]))};r.prototype.$MessengerThreadSearchContainer3=function(){return c("React").createElement("div",{className:"_3jv8 _5iwm _5iwn _150g"},c("React").createElement(c("AbstractTextInput.react"),{onChange:this.$MessengerThreadSearchContainer6,className:"_3jv9",defaultValue:"",onEnter:this.$MessengerThreadSearchContainer5,placeholder:i._("Search messages"),ref:"input"}))};r.prototype.$MessengerThreadSearchContainer1=function(s){s.stopPropagation()};r.prototype.$MessengerThreadSearchContainer4=function(event){c("Bootloader").loadModules(["MessengerContentSearchFunnelLogger"],function(s){if(event)switch(event.name){case o:s.endFunnel(o);break;case p:s.endFunnel(p);s.startFunnel(event.query,q);break}},"MessengerThreadSearchContainer.react")};r.propTypes={query:m.string,selectedIndex:m.number.isRequired,totalCount:m.number.isRequired};f.exports=r}),null);
__d("MessengerContentSearchFunnelLogger",["FunnelLogger","MessengerContentSearchFunnelLoggerConstants"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("MessengerContentSearchFunnelLoggerConstants").FUNNEL_NAME,i=c("MessengerContentSearchFunnelLoggerConstants").FUNNEL_LOGGER_EVENTS,j=null,k=0,l=0,m=new Set(),n=0,o=0;function p(x,y){__p&&__p();if(j!==null)c("FunnelLogger").appendActionWithPayload(h,i.NUM_BROWSE_ACTIONS_WITHIN_THREAD,{threadID:j,numBrowseActions:k,numContextBrowse:o,msgs:Array.from(m)});j=null;k=0;l=0;o=0;m.clear();n=Date.now();c("FunnelLogger").startFunnel(h);if(y)c("FunnelLogger").addFunnelTag(h,y);c("FunnelLogger").appendActionWithPayloadIfNew(h,i.INITIATE_CONTENT_SEARCH,{query:x})}function q(x){c("FunnelLogger").appendActionWithPayload(h,i.THREAD_IMPRESSIONS,{impressionList:x,latency:Date.now()-n})}function r(x,y){c("FunnelLogger").appendActionWithPayload(h,i.LOAD_MORE_THREADS,{impressionList:x,latency:y})}function s(){o+=1}function t(x){if(j!==null)c("FunnelLogger").appendActionWithPayload(h,i.NUM_BROWSE_ACTIONS_WITHIN_THREAD,{threadID:j,numBrowseActions:k,numContextBrowse:o,msgs:Array.from(m)});j=x;k=0;o=0;m.clear();c("FunnelLogger").appendActionWithPayload(h,i.SELECT_THREAD,x)}function u(x){k+=1;l+=1}function v(x,y,z){j=y;m.add(x);c("FunnelLogger").appendActionWithPayload(h,i.LOAD_MESSAGE_IN_THREAD,{latency:z})}function w(x){if(j!==null)c("FunnelLogger").appendActionWithPayload(h,i.NUM_BROWSE_ACTIONS_WITHIN_THREAD,{threadID:j,numBrowseActions:k,numContextBrowse:o,msgs:Array.from(m)});if(x)c("FunnelLogger").appendActionWithTagAndPayloadIfNew(h,i.END_CONTENT_SEARCH,x,{totalBrowseActions:l});else c("FunnelLogger").appendActionWithPayloadIfNew(h,i.END_CONTENT_SEARCH,{totalBrowseActions:l});c("FunnelLogger").endFunnel(h)}f.exports={browseMessageInThread:u,endFunnel:w,loadMessageInThread:v,logContextBrowse:s,logLoadMoreThreads:r,logThreadImpressions:q,logThreadSelect:t,startFunnel:p}}),null);