if (self.CavalryLogger) { CavalryLogger.start_js(["mEAeg"]); }

__d("NotificationJewelPerformanceTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(){this.clear()}h.prototype.log=function(){c("GeneratedLoggerUtils").log("logger:NotificationJewelPerformanceLoggerConfig",this.$NotificationJewelPerformanceTypedLogger1,c("Banzai").BASIC)};h.prototype.logVital=function(){c("GeneratedLoggerUtils").log("logger:NotificationJewelPerformanceLoggerConfig",this.$NotificationJewelPerformanceTypedLogger1,c("Banzai").VITAL)};h.prototype.clear=function(){this.$NotificationJewelPerformanceTypedLogger1={};return this};h.prototype.updateData=function(j){this.$NotificationJewelPerformanceTypedLogger1=babelHelpers["extends"]({},this.$NotificationJewelPerformanceTypedLogger1,j);return this};h.prototype.setBadgeCurrentCount=function(j){this.$NotificationJewelPerformanceTypedLogger1.badge_current_count=j;return this};h.prototype.setBadgeInitialCount=function(j){this.$NotificationJewelPerformanceTypedLogger1.badge_initial_count=j;return this};h.prototype.setClientSessionID=function(j){this.$NotificationJewelPerformanceTypedLogger1.client_session_id=j;return this};h.prototype.setClientTimestamp=function(j){this.$NotificationJewelPerformanceTypedLogger1.client_timestamp=j;return this};h.prototype.setEagerLoadTriggerAndDelay=function(j){this.$NotificationJewelPerformanceTypedLogger1.eager_load_trigger_and_delay=j;return this};h.prototype.setEventName=function(j){this.$NotificationJewelPerformanceTypedLogger1.event_name=j;return this};h.prototype.setJewelName=function(j){this.$NotificationJewelPerformanceTypedLogger1.jewel_name=j;return this};h.prototype.setVC=function(j){this.$NotificationJewelPerformanceTypedLogger1.vc=j;return this};var i={badge_current_count:true,badge_initial_count:true,client_session_id:true,client_timestamp:true,eager_load_trigger_and_delay:true,event_name:true,jewel_name:true,vc:true};f.exports=h}),null);
__d("JewelLogger",["EventProfiler","NotificationJewelPerformanceTypedLogger","guid"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("NotificationJewelPerformanceTypedLogger"));i=h&&h.prototype;function j(r){i.constructor.call(this);if(!j.$JewelTypedLoggerWithSession2[r])j.$JewelTypedLoggerWithSession2[r]={};this.$JewelTypedLoggerWithSession3=r}j.prototype.setEventName=function(r){this.$JewelTypedLoggerWithSession4=r;return i.setEventName.call(this,r)};j.prototype.log=function(){if(!j.$JewelTypedLoggerWithSession2[this.$JewelTypedLoggerWithSession3][this.$JewelTypedLoggerWithSession4]){j.$JewelTypedLoggerWithSession2[this.$JewelTypedLoggerWithSession3][this.$JewelTypedLoggerWithSession4]=true;this.setClientSessionID(j.$JewelTypedLoggerWithSession1);this.setJewelName(this.$JewelTypedLoggerWithSession3);i.log.call(this)}};j.$JewelTypedLoggerWithSession1=c("guid")();j.$JewelTypedLoggerWithSession2={};function k(r){if(r.jewelName==="notifications"&&r.eventName==="list_populated")q("notifications",r.timestamp);new j(r.jewelName).setEventName(r.eventName).setClientTimestamp(r.timestamp).log()}function l(r){var s=r.trigger,t=r.eagerLoadDelayInMs,u=babelHelpers.objectWithoutProperties(r,["trigger","eagerLoadDelayInMs"]),v=s+":"+t;new j(r.jewelName).setEventName(u.eventName).setClientTimestamp(u.timestamp).setEagerLoadTriggerAndDelay(v).log()}var m={logDataEagerLoad:function r(s){if(s.eventName==="data_eager_load_trigger")l(s);else k(s)},logJsBootload:function r(s){if(s.eventName==="js_bootload_trigger")l(s);else k(s)},logFirstJewelClick:function r(s){p(s.jewelName,s.timestamp);new j(s.jewelName).setEventName("first_jewel_click").setClientTimestamp(s.timestamp).setBadgeInitialCount(s.badgeInitialCount).setBadgeCurrentCount(s.badgeCurrentCount).log()},logJewelInitialize:function r(s){new j(s.jewelName).setEventName("jewel_initialize").setBadgeInitialCount(s.badgeInitialCount).log()},logJewelListComponentEvent:k},n={notifications:["Notifications_Jewel_Button"]},o={};function p(r,s){if(!n[r]||!window.performance||!performance.timing||!performance.timing.navigationStart)return;s+=performance.timing.navigationStart;var t=c("EventProfiler").markManualStart(n[r],"click",s);if(o[r]&&o[r].end)t.markManualEnd(o[r].end);else o[r]={instrumentation:t}}function q(r,s){if(!window.performance||!performance.timing||!performance.timing.navigationStart)return;s+=performance.timing.navigationStart;if(o[r]&&o[r].instrumentation)o[r].instrumentation.markManualEnd(s);else o[r]={end:s}}f.exports=m}),null);
__d("BootloadOnInteraction",["Event","JSResource","emptyFunction"],(function a(b,c,d,e,f,g){var h={mount:function i(j,k){var l=arguments.length<=2||arguments[2]===undefined?c("emptyFunction"):arguments[2],m=arguments.length<=3||arguments[3]===undefined?c("emptyFunction"):arguments[3],n=[c("Event").listen(j,"mouseover",o),c("Event").listen(j,"focus",o)];function o(){n.forEach(function(p){return p.remove()});m();c("JSResource").loadAll(k,l)}}};f.exports=h}),null);
__d("performanceNowNoFallback",["performance"],(function a(b,c,d,e,f,g){f.exports=c("performance").now?function(){return c("performance").now()}:null}),null);
__d("MercuryJewelBootloadModules",["BootloadOnInteraction","JSResource","MercuryMessengerJewelPerfConfig","JewelLogger","emptyFunction","performanceNowNoFallback","gkx"],(function a(b,c,d,e,f,g){__p&&__p();var h=c("JewelLogger").logJsBootload,i=null,j=null,k=c("emptyFunction"),l=Boolean(c("MercuryMessengerJewelPerfConfig").dataPreloader),m=[c("JSResource")("MercuryJewel").__setRef("MercuryJewelBootloadModules")].concat(c("MercuryMessengerJewelPerfConfig").bundleBootloader?[c("JSResource")("MercuryOrderedThreadlist").__setRef("MercuryJewelBootloadModules"),c("JSResource")("MercuryThreadInformer").__setRef("MercuryJewelBootloadModules"),c("JSResource")("MercuryThreads").__setRef("MercuryJewelBootloadModules"),c("JSResource")("Toggler").__setRef("MercuryJewelBootloadModules"),c("JSResource")("messengerGraphQLThreadlistFetcherRe").__setRef("MercuryJewelBootloadModules")].concat(c("gkx")("AT6UQYwUddP3mFRA2jSAHz5G8W4YH7DReOPqJDgDcN2CcKBVNvHLaRu9Ls7vj8hLqRfiS-BtpxTiCSP4nFtjU4fE6CFT439h9m9DMedAwrNDxw")?[c("JSResource")("MercuryServerRequests").__setRef("MercuryJewelBootloadModules")]:[]):[]);function n(t,u){i=i||new t(u,u.bootload_args)}function o(t,u){n(t,u);u.inform("opened")}function p(){c("MercuryMessengerJewelPerfConfig").logJewelData&&c("performanceNowNoFallback")&&h({jewelName:"mercurymessages",eventName:"js_bootload_start",timestamp:c("performanceNowNoFallback")()})}function q(){c("MercuryMessengerJewelPerfConfig").logJewelData&&c("performanceNowNoFallback")&&h({jewelName:"mercurymessages",eventName:"js_bootload_end",timestamp:c("performanceNowNoFallback")()})}function r(t){if(k!=c("emptyFunction"))k(t);else j=t}var s={mount:function t(u){var v=arguments.length<=1||arguments[1]===undefined?c("emptyFunction"):arguments[1],w=u.getButton();c("BootloadOnInteraction").mount(w,m,function(x){q();o(x,u)},function(){p();v()})},load:function t(u){p();c("JSResource").loadAll(m,function(v){q();o(v,u)})},loadModules:function t(u){p();c("JSResource").loadAll(m,function(v){q();if(c("MercuryMessengerJewelPerfConfig").eagerFlyoutOnAfterLoad)o(v,u);else n(v,u)})},setUpDataPreloader:function t(){if(c("MercuryMessengerJewelPerfConfig").dataPreloader){c("MercuryMessengerJewelPerfConfig").dataPreloader.onLoaded(r);c("MercuryMessengerJewelPerfConfig").dataPreloader.onError(r)}},shouldUsePreloadedData:function t(){return l},informBadgeChange:function t(){l=false},onDataPreload:function r(t){if(j)t(j);else k=t}};f.exports=s}),null);
__d("bs_js_dict",[],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=function h(n,o){delete n[o];return 0};function i(n){var o=Object.keys(n),p=o.length,j=new Array(p);for(var q=0,r=p-1|0;q<=r;++q){var s=o[q];j[q]=[s,n[s]]}return j}function j(n){var o=Object.keys(n),p=o.length,q=new Array(p);for(var r=0,s=p-1|0;r<=s;++r)q[r]=n[o[r]];return q}function k(i){__p&&__p();var n={},o=i;while(true){var p=o;if(p){var q=p[0];n[q[0]]=q[1];o=p[1];continue}else return n}}function l(i){var n={},o=i.length;for(var p=0,q=o-1|0;p<=q;++p){var r=i[p];n[r[0]]=r[1]}return n}function m(n,o){var p={},q=Object.keys(o),r=q.length;for(var s=0,t=r-1|0;s<=t;++s){var u=q[s];p[u]=n(o[u])}return p}g.unsafeDeleteKey=h;g.entries=i;g.values=j;g.fromList=k;g.fromArray=l;g.map=m}),null);
__d("MessengerThreadsWebGraphQLQuery",["WebGraphQLQueryBase"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();f.exports=function(){__p&&__p();var h,i;h=babelHelpers.inherits(j,c("WebGraphQLQueryBase"));i=h&&h.prototype;j.__getDocID=function(){"use strict";return"1633183083435571"};j.getQueryID=function(){"use strict";return"165199697418846"};function j(){"use strict";h.apply(this,arguments)}return j}()}),null);
__d("messengerReadReceiptTransformerRe",["bs_array","bs_caml_format"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(i,j){var k={};c("bs_array").iter(function(l){var m=l.actor;if(!(m==null)&&i!==m.id){k[m.id]={action:c("bs_caml_format").caml_float_of_string(l.action),watermark:c("bs_caml_format").caml_float_of_string(l.watermark)};return 0}else return 0},j.nodes);return k}g.transformReadReceipt=h}),null);
__d("messengerThreadTransformerRe",["URI","bs_array","bs_string","bs_caml_array","bs_js_boolean","MercuryIDs","bs_caml_format","bs_js_primitive","WorkModeConfig","bs_js_null_undefined","MessagingThreadType","messengerAttachmentTransformerRe","MessengerThreadCannotReplyReason"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(p){__p&&__p();var q=p.location_coordinates,r=q==null?[null,null]:[q.latitude,q.longitude],s=p.location_page,t;if(s==null)t=null;else{var u=s.address;t=u==null?null:u.full_address}var v=p.allows_rsvp,w=v!==0?1:0,x=c("bs_array").fold_left(function(z,A){z[A.node.id]=A.guest_list_state;return z},{},p.event_reminder_members.edges),y=p.lightweight_event_creator;return{creator_id:y==null?null:y.id,event_members:x,event_time:p.time,event_type:p.lightweight_event_type,latitude:r[0],longitude:r[1],location_address:t,location_name:p.location_name,note:p.note,oid:p.id,related_event:p.related_event,repeat_mode:p.repeat_mode,seconds_to_notify_before:p.seconds_to_notify_before,status:p.lightweight_event_status,title:p.event_title,track_rsvp:w}}function i(p){__p&&__p();var q=p.associated_object;if(q==null)return null;else{var r=q.action_link,s;if(r==null)s=null;else{var t=+c("WorkModeConfig").is_work_user,u=t!==0?c("WorkModeConfig").company_subdomain+".facebook.com":"www.facebook.com";s=new(c("URI"))(r).setDomain(u)}var v=q.profile_picture;return{id:q.id,name:q.name,action_link:s,profile_picture:v==null?null:{uri:v.uri},room_type:q.room_type,privacy_mode:q.privacy_mode,approval_mode_toggleable:q.approval_mode_toggleable,start_timestamp:q.start_timestamp,event_place:q.event_place}}}function j(p){var q=p.related_page_thread;if(q==null)return null;else{var r=c("bs_array").map(function(u){return u.name},q.custom_thread_tags.nodes),s=q.page,t=s==null?null:s.id;return{flagged:q.is_flagged,pageID:t,customTagNames:r}}}function k(p){__p&&__p();var q=p.thread_key.other_user_id;if(q==null)return 0;else{var r=p.all_participants.nodes;return c("bs_array").fold_left(function(s,t){var u=t.messaging_actor;if(u.id===q)return+(u.__typename==="User");else return s},0,r)}}function l(p){__p&&__p();if(p.length){var q={};c("bs_array").iter(function(r){var s=r.nickname;if(s==null)return 0;else{q[r.participant_id]=s;return 0}},p);return q}else return null}function m(p){if(!(p==null)&&p!=="")return"#"+c("bs_string").sub(p,2,p.length-2|0);else return null}function n(p){return c("bs_caml_array").caml_array_get(p,0)}function o(p,q,r){__p&&__p();var s=q.customization_info,t;if(s==null)t=[null,null,null];else{var u=s.emoji;t=[m(s.outgoing_bubble_color),u==null?null:{emoji:u},l(s.participant_customizations)]}var v=q.page_comm_item,w=v==null?[null,null,null,null,null]:[v.comm_status,v.comm_source_id,v.id,v.subtitle,v.comm_item_owners],x=q.last_message.nodes.length?[c("bs_caml_array").caml_array_get(q.last_message.nodes,0)]:0,y=q.last_read_receipt.nodes.length?[c("bs_caml_array").caml_array_get(q.last_read_receipt.nodes,0)]:0,z;if(x){var A=x[0];z=c("messengerAttachmentTransformerRe").transformAttachment(p,{extensible_attachment:A.extensible_attachment,blob_attachments:A.blob_attachments,sticker:A.sticker},r)}else z=[];var B=q.cannot_reply_reason,C=q.thread_queue_metadata,D=q.thread_type,E=q.montage_thread,F=q.image,G=q.thread_key.other_user_id,H=q.thread_queue_metadata,I=q.name,J=q.thread_key.other_user_id,K;if(J==null){var L=q.thread_key.thread_fbid;K=L==null?null:L}else K=J;var M=q.rtc_call_data,N;if(M==null)N=null;else{var O=M.initiator;N={call_state:M.call_state,server_info_data:M.server_info_data,initiator_fbid:O==null?0:c("bs_caml_format").caml_float_of_string(O.id)}}return{admin_ids:c("bs_array").map(function(P){return P.id},q.thread_admins),approval_mode:q.approval_mode,approval_queue_ids:C==null?[]:c("bs_array").map(function(P){return c("MercuryIDs").getParticipantIDFromUserID(P.id)},C.approval_requests.nodes),can_reply:B==null?true:false,cannot_reply_reason:q.cannot_reply_reason,custom_color:t[0],custom_like_icon:t[1],custom_nickname:t[2],customization_enabled:q.customization_enabled,thread_type:D==null?null:c("bs_js_null_undefined").from_opt(c("bs_js_primitive").undefined_to_opt(c("MessagingThreadType")[D])),participant_add_mode:q.participant_add_mode_as_string,ephemeral_ttl_mode:q.ephemeral_ttl_mode,folder:c("bs_string").lowercase(q.folder),has_email_participant:B==null?false:c("bs_js_boolean").to_js_boolean(+(B===c("MessengerThreadCannotReplyReason").HAS_EMAIL_PARTICIPANT)),has_montage:E==null?false:true,image_src:F==null?null:F.uri,is_archived:c("bs_js_boolean").to_js_boolean(q.has_viewer_archived),is_page_follow_up:c("bs_js_boolean").to_js_boolean(q.is_page_follow_up),is_canonical_user:c("bs_js_boolean").to_js_boolean(k(q)),is_canonical:G==null?false:true,is_pin_protected:c("bs_js_boolean").to_js_boolean(q.is_pin_protected),is_subscribed:c("bs_js_boolean").to_js_boolean(q.is_viewer_subscribed),is_canonical_neo_user:c("bs_js_boolean").to_js_boolean(q.is_canonical_neo_user),is_thread_queue_enabled:H==null?false:true,joinable_mode:{mode:c("bs_caml_format").caml_int_of_string(q.joinable_mode.mode),link:q.joinable_mode.link},last_message_timestamp:x?c("bs_caml_format").caml_float_of_string(x[0].timestamp_precise):0,last_message_type:x?x[0].commerce_message_type:null,last_read_timestamp:y?c("bs_caml_format").caml_float_of_string(y[0].timestamp_precise):0,lightweight_event:q.event_reminders.nodes.length?h(c("bs_caml_array").caml_array_get(q.event_reminders.nodes,0)):null,message_count:q.message_count,mute_until:q.mute_until,name:I==null?"":I,other_user_fbid:q.thread_key.other_user_id,page_thread_info:j(q),participants:c("bs_array").map(function(P){return c("MercuryIDs").getParticipantIDFromUserID(P.messaging_actor.id)},q.all_participants.nodes),participants_event_status:q.participants_event_status,read_only:B==null?false:c("bs_js_boolean").to_js_boolean(+(B===c("MessengerThreadCannotReplyReason").READ_ONLY)),recipients_loadable:B==null?true:c("bs_js_boolean").to_js_boolean(+(B!==c("MessengerThreadCannotReplyReason").RECIPIENTS_NOT_LOADABLE)),server_timestamp:c("bs_caml_format").caml_float_of_string(q.updated_time_precise),snippet_attachments:z,snippet_sender:x?c("MercuryIDs").getParticipantIDFromUserID(x[0].message_sender.messaging_actor.id):null,snippet:x?x[0].snippet:null,thread_fbid:K,thread_id:"",timestamp:c("bs_caml_format").caml_float_of_string(q.updated_time_precise),unread_count:q.unread_count,rtc_call_data:N,associated_object:i(q),reactions_mute_mode:q.reactions_mute_mode==="REACTIONS_NOT_MUTED"?0:1,mentions_mute_mode:q.mentions_mute_mode==="MENTIONS_NOT_MUTED"?0:1,comm_status:w[0],page_comm_item_id:w[2],comm_source_id:w[1],subtitle:w[3],comm_item_owners:w[4]}}g._getLightweightEvent=h;g._getAssociatedObject=i;g._getPageThreadInfo=j;g._getIsCanonicalUser=k;g._getNicknames=l;g._getCustomColor=m;g.indexZero=n;g.transformThread=o}),null);
__d("messengerGraphQLThreadFetcherRe",["Promise","bs_array","getByPath","bs_caml_array","bs_pervasives","WebGraphQL","messengerThreadTransformerRe","messengerMessageTransformerRe","MessengerThreadsWebGraphQLQuery","messengerReadReceiptTransformerRe"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(l,m,n){var o=c("bs_array").map(function(p){var q=c("messengerMessageTransformerRe").unsafeCastBlobAttachments(p),r=p.extensible_attachment,s;if(r==null)s=null;else{var t=r.story_attachment;s={legacy_attachment_id:r.legacy_attachment_id,story_attachment:t==null?null:c("messengerMessageTransformerRe").unsafeCastExtensibleAttachment(t)}}return{snippet:p.snippet,message_sender:p.message_sender,timestamp_precise:p.timestamp_precise,commerce_message_type:p.commerce_message_type,extensible_attachment:s,blob_attachments:q,sticker:p.sticker}},m.last_message.nodes);return c("messengerThreadTransformerRe").transformThread(l,{thread_key:m.thread_key,name:m.name,all_participants:m.all_participants,last_message:{nodes:o},unread_count:m.unread_count,message_count:m.messages_count,image:m.image,updated_time_precise:m.updated_time_precise,mute_until:m.mute_until,is_pin_protected:m.is_pin_protected,is_viewer_subscribed:m.is_viewer_subscribed,is_canonical_neo_user:m.is_canonical_neo_user,thread_queue_enabled:m.thread_queue_enabled,folder:m.folder,has_viewer_archived:m.has_viewer_archived,is_page_follow_up:m.is_page_follow_up,cannot_reply_reason:m.cannot_reply_reason,ephemeral_ttl_mode:m.ephemeral_ttl_mode,customization_info:m.customization_info,thread_admins:m.thread_admins,approval_mode:m.approval_mode,joinable_mode:m.joinable_mode,thread_queue_metadata:m.thread_queue_metadata,event_reminders:m.event_reminders,montage_thread:m.montage_thread,last_read_receipt:m.last_read_receipt,related_page_thread:m.related_page_thread,rtc_call_data:m.rtc_call_data,associated_object:m.associated_object,reactions_mute_mode:m.reactions_mute_mode,mentions_mute_mode:m.mentions_mute_mode,privacy_mode:m.privacy_mode,customization_enabled:m.customization_enabled,thread_type:m.thread_type,participant_add_mode_as_string:m.participant_add_mode_as_string,participants_event_status:m.participants_event_status,page_comm_item:m.page_comm_item},n)}function i(l,m,n,o,p){__p&&__p();if(l==null)if(o!==0)return{actions:null,thread:undefined,end_of_history:{type:"user",fbid:m},roger:null};else return{actions:null,thread:undefined,end_of_history:undefined,roger:null};else{var q=l.thread_key.other_user_id,r=l.thread_key.thread_fbid,s=q==null?r==null?c("bs_pervasives").failwith("No thread ID"):r:q;if(s!==m)c("bs_pervasives").failwith("Thread ID mismatch");var t=h(n,l,p),u=l.messages,v=u==null?null:c("bs_array").map(function(A){return c("messengerMessageTransformerRe").transformMessage(n,A,{thread_id:null,thread_fbid:l.thread_key.thread_fbid,other_user_fbid:l.thread_key.other_user_id,folder:t.folder},p)},u.nodes),w=l.read_receipts,x;if(w==null)x=null;else{var y={};y[m]=c("messengerReadReceiptTransformerRe").transformReadReceipt(n,w);x=y}var z=c("getByPath")(l,["messages","page_info"]);if(z==null)return{actions:v,thread:t,end_of_history:undefined,roger:x};else if(z.has_previous_page)return{actions:v,thread:t,end_of_history:undefined,roger:x};else return{actions:v,thread:t,end_of_history:{type:"thread",fbid:m},roger:x}}}function j(l){return new(c("MessengerThreadsWebGraphQLQuery"))({id:l.id,message_limit:l.limit,load_messages:+(l.limit>0),load_read_receipts:l.loadReadReceipts,before:l.timestamp})}function k(l,m,n){var o=c("bs_array").map(j,m);return c("Promise").all(c("WebGraphQL").execAll(o,{actorID:n?l:null,batchName:"MessengerGraphQLThreadFetcherRe"})).then(function(p){return c("bs_array").mapi(function(q,r){var s=r.message_thread,t=c("bs_caml_array").caml_array_get(m,q);return i(s,t.id,l,t.isCanonical,n)},p)})}g.transformThread=h;g._transformPayload=i;g._getQuery=j;g.fetchAll=k}),null);
__d("DisplayGenderConst",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({UNKNOWN:"UNKNOWN",FEMALE:"FEMALE",MALE:"MALE",NEUTER:"NEUTER"})}),null);
__d("MessengerThreadlistWebGraphQLQuery",["WebGraphQLQueryBase"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();f.exports=function(){__p&&__p();var h,i;h=babelHelpers.inherits(j,c("WebGraphQLQueryBase"));i=h&&h.prototype;j.__getDocID=function(){"use strict";return"2006989755984163"};j.getQueryID=function(){"use strict";return"152367808823027"};function j(){"use strict";h.apply(this,arguments)}return j}()}),null);
__d("messengerGraphQLThreadlistFetcherRe",["Promise","URI","bs_array","bs_js_dict","utilsRe","bs_caml_array","WebGraphQL","bs_caml_format","GenderConst","bs_js_primitive","WorkModeConfig","DisplayGenderConst","messengerGraphQLThreadFetcherRe","messengerReadReceiptTransformerRe","MessengerThreadlistWebGraphQLQuery"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(l){return new(c("MessengerThreadlistWebGraphQLQuery"))({limit:l.limit,before:l.timestamp,tags:l.tags,includeDeliveryReceipts:l.includeDeliveryReceipts,includeSeqID:l.includeSeqID})}function i(l){__p&&__p();var m=l.gender,n=l.url,o;if(n==null)o=null;else{var p=+c("WorkModeConfig").is_work_user,q=p!==0?c("WorkModeConfig").company_subdomain+".facebook.com":"www.facebook.com";o=new(c("URI"))(n).getUnqualifiedURI().setDomain(q).setProtocol("https").toString()}var r=l.big_image_src,s=l.big_image_src,t=l.__typename,u;switch(t){case"Page":u="page";break;case"User":u="user";break;default:u=null}var v=l.accepts_messenger_user_feedback,w=l.is_viewer_friend,x=l.is_messenger_user,y=l.is_verified,z=l.is_messenger_platform_bot,A=l.is_message_blocked_by_viewer,B=l.is_viewer_coworker,C=l.is_employee;return{id:"fbid:"+l.id,fbid:l.id,gender:m==null?c("GenderConst").NOT_A_PERSON:m===c("DisplayGenderConst").MALE?c("GenderConst").MALE_SINGULAR:m===c("DisplayGenderConst").FEMALE?c("GenderConst").FEMALE_SINGULAR:c("GenderConst").NOT_A_PERSON,href:o,image_src:r==null?null:r.uri,big_image_src:s==null?null:s.uri,name:l.name,short_name:c("utilsRe").$pipe$unknown(c("bs_js_primitive").null_undefined_to_opt(l.short_name),l.name),type:u,vanity:l.username,accepts_messenger_user_feedback:v==null?false:v,is_friend:w==null?false:w,is_messenger_user:x==null?false:x,is_business_enabled:l.__typename==="Page"?true:false,is_verified:y==null?false:y,is_messenger_platform_bot:z==null?false:z,is_messenger_blocked:A==null?false:A,is_coworker:B==null?true:B,employee:C==null?false:C}}function j(l,m,n,o){__p&&__p();var p=[],q=[],r={},s=[],t={},u=[undefined];c("bs_array").iteri(function(v,w){__p&&__p();var x=c("bs_caml_array").caml_array_get(m,v),y=[],z=[],A=[];c("bs_array").iter(function(D){__p&&__p();if(D==null)return 0;else{var E=c("messengerGraphQLThreadFetcherRe").transformThread(l,D,n);c("bs_array").iter(function(K){var L=i(K.messaging_actor);t[L.fbid]=L;return 0},D.all_participants.nodes);var F;if(E.is_canonical){var B=E.other_user_fbid;if(B==null)F=null;else{y.push(B);F=B}}else{var C=E.thread_fbid;if(C==null)F=null;else{z.push(C);F=C}}A.push(E.thread_id);p.push(E);var G=D.read_receipts;if(!(F==null))if(!(G==null))r[F]=c("messengerReadReceiptTransformerRe").transformReadReceipt(l,G);var H=D.delivery_receipts;if(F==null)return 0;else if(H==null)return 0;else{var I=H.nodes.sort(function(K,L){var M=c("bs_caml_format").caml_float_of_string(K.timestamp_precise),N=c("bs_caml_format").caml_float_of_string(L.timestamp_precise);if(M>N)return-1;else if(M===N)return 0;else return 1});if(I.length<1)return 0;else{var J=c("bs_caml_array").caml_array_get(I,0);if(E.is_canonical){s.push({other_user_fbid:F,thread_fbid:null,time:c("bs_caml_format").caml_float_of_string(J.timestamp_precise)});return 0}else{s.push({other_user_fbid:null,thread_fbid:F,time:c("bs_caml_format").caml_float_of_string(J.timestamp_precise)});return 0}}}}},w.viewer.message_threads.nodes);var B=w.viewer.message_threads.sync_sequence_id;if(!(B==null))u[0]=c("bs_caml_format").caml_int_of_string(B);var C=x.timestamp;q.push({start:x.offset,end:C==null?x.offset+x.limit|0:(x.offset+x.limit|0)-1|0,folder:x.folder,other_user_fbids:y,thread_fbids:z,thread_ids:A,filter:x.filter});return 0},o);return{threads:p,ordered_threadlists:q,roger:r,delivery_receipts:s,participants:c("bs_js_dict").values(t),sequence_id:u[0]}}function k(l,m,n){var o=c("bs_array").map(h,m);return c("Promise").all(c("WebGraphQL").execAll(o,{actorID:n?l:null,batchName:"MessengerGraphQLThreadlistFetcherRe"})).then(function(p){return j(l,m,n,p)})}g._getQuery=h;g.transformParticipant=i;g.transform=j;g.fetchAll=k}),null);