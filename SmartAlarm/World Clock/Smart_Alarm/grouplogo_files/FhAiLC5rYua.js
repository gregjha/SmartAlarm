if (self.CavalryLogger) { CavalryLogger.start_js(["INPDW"]); }

__d("messengerMessageSeenHeadsReact",["cx","fbt","cssVar","React","immutable","imageReact","bs_pervasives","ReasonReact","joinClasses","MessengerConfig","MercuryTimestamp","MercuryAttachment","MercuryMessageInfo","getViewportDimensions"],(function a(b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k=c("MessengerConfig").MaxSeenHeadCount;function l(){var p=c("getViewportDimensions")().width;if(p<parseInt("920px".replace("px",""),10))return c("bs_pervasives").min(k,8);else if(p<parseInt("1211px".replace("px",""),10))return c("bs_pervasives").min(k,3);else return k}var m=c("ReasonReact").statelessComponent("MessengerMessageSeenHeadsReact");function n(p,q,r,s,t,u,v){__p&&__p();var w=m.slice();w[9]=function(){__p&&__p();if(c("MercuryMessageInfo").isSending(r)||u.isEmpty()||c("MercuryMessageInfo").hasError(r))return null;else{var x=c("immutable").Seq(u).filter(function(F){var G=+(F.watermark>=r.timestamp&&F.watermark<s);if(G!==0)return true;else return false}).sort(function(F,G){return F.action-G.action|0});if(x.isEmpty())return null;else{var y=q!==0?k:l(0),z=+(x.count()>(y+1|0)),A=z!==0?x.slice(0,y):x,B=A.map(function(F,G,v){var H=t.get(G);if(H==null)return null;else{var I=i._("Seen by {full name} at {seen time}",[i.param("full name",H.name),i.param("seen time",c("MercuryTimestamp").getPreciseTimestamp(F.action))]);return c("ReasonReact").element([c("bs_pervasives").string_of_int(G)],0,c("imageReact").make(["_jf2"],[I],[H.image_src],0,[I],0,0,[]))}}).toArray(),C=B.length;if(C){var D=z!==0?x.slice(y,undefined).count():0;if(D>0){var E=x.slice(y,undefined).map(function(v,F,G){var H=t.get(F);if(H==null)return"";else return H.name}).filter(function(F){var G=+(F==="");if(G!==0)return false;else return true}).join("\n")+" ";B.unshift(c("React").createElement("span",{key:"overflow",className:"_jf3",title:E},"+"+c("bs_pervasives").string_of_int(D)))}return c("React").createElement("span",{className:c("joinClasses")(p,"_jf4"+(+((C+D|0)===1)?" _jf5":"")+(+c("MercuryAttachment").isSinglePhotoGroupAttachment(r)?" _ba3":""))},B)}else return null}}};return w}var o=c("ReasonReact").wrapReasonForJs(m,function(p){return n(p.className,+p.isFromViewer,p.message,p.nextTimestamp,p.participants,p.readReceipts,[])});g.maxSeenHeads=k;g.calculateSliceNumber=l;g.component=m;g.make=n;g.jsComponent=o}),null);