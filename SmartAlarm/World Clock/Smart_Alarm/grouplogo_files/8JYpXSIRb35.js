if (self.CavalryLogger) { CavalryLogger.start_js(["XUIem"]); }

__d("MessengerBotsWebTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(){this.clear()}h.prototype.log=function(){c("GeneratedLoggerUtils").log("logger:MessengerBotsWebLoggerConfig",this.$MessengerBotsWebTypedLogger1,c("Banzai").BASIC)};h.prototype.logVital=function(){c("GeneratedLoggerUtils").log("logger:MessengerBotsWebLoggerConfig",this.$MessengerBotsWebTypedLogger1,c("Banzai").VITAL)};h.prototype.clear=function(){this.$MessengerBotsWebTypedLogger1={};return this};h.prototype.updateData=function(j){this.$MessengerBotsWebTypedLogger1=babelHelpers["extends"]({},this.$MessengerBotsWebTypedLogger1,j);return this};h.prototype.setCount=function(j){this.$MessengerBotsWebTypedLogger1.count=j;return this};h.prototype.setEvent=function(j){this.$MessengerBotsWebTypedLogger1.event=j;return this};h.prototype.setIndex=function(j){this.$MessengerBotsWebTypedLogger1.index=j;return this};h.prototype.setPageID=function(j){this.$MessengerBotsWebTypedLogger1.page_id=j;return this};h.prototype.setPayload=function(j){this.$MessengerBotsWebTypedLogger1.payload=j;return this};h.prototype.setQrContentType=function(j){this.$MessengerBotsWebTypedLogger1.qr_content_type=j;return this};h.prototype.setTitle=function(j){this.$MessengerBotsWebTypedLogger1.title=j;return this};h.prototype.setTitles=function(j){this.$MessengerBotsWebTypedLogger1.titles=c("GeneratedLoggerUtils").serializeVector(j);return this};h.prototype.setType=function(j){this.$MessengerBotsWebTypedLogger1.type=j;return this};h.prototype.setURL=function(j){this.$MessengerBotsWebTypedLogger1.url=j;return this};h.prototype.setVC=function(j){this.$MessengerBotsWebTypedLogger1.vc=j;return this};var i={count:true,event:true,index:true,page_id:true,payload:true,qr_content_type:true,title:true,titles:true,type:true,url:true,vc:true};f.exports=h}),null);
__d("MNBotsLoggerEvents",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({BOT_COMPOSER_MENU_ICON_DISPLAYED:"bot_composer_menu_icon_displayed",BOT_COMPOSER_MENU_ICON_TAPPED:"bot_composer_menu_icon_tapped",BOT_COMPOSER_MENU_ITEM_DID_SELECT:"bot_composer_menu_item_did_select",BOT_COMPOSER_QUICK_REPLY_DISPLAYED:"bot_composer_quick_reply_displayed",BOT_COMPOSER_QUICK_REPLY_TAPPED:"bot_composer_quick_reply_tapped"})}),null);
__d("MessengerBotMenuDialog.react",["cx","fbt","AsyncDialog","AsyncRequest","CurrentUser","BrowserExtensionsDialog","Link.react","MercuryIDs","MessengerBotsWebTypedLogger","MNBotsLoggerEvents","MNCommerceCallToActionType","MNCommerceCallToActionHandlerMap","MNCommerceCTAProcessor","MNCommercePostbackCTADataManager","React","Tooltip","URI","XUISpinner.react","idx"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("React").PropTypes;j=babelHelpers.inherits(m,c("React").Component);k=j&&j.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.state={navigationPath:[]},o}m.prototype.$MessengerBotMenuDialog1=function(n,o){__p&&__p();switch(n.action_type){case c("MNCommerceCallToActionType").POSTBACK:var p=function(s){if(n.is_mutable_by_server)c("MNCommercePostbackCTADataManager").send(n.id);else c("MNCommercePostbackCTADataManager").sendAndConfirm(n.id,n.title,this.props.threadID)}.bind(this);return this.$MessengerBotMenuDialog2(n,p);case c("MNCommerceCallToActionType").OPEN_URL:return this.$MessengerBotMenuDialog3(n);case c("MNCommerceCallToActionType").OPEN_NATIVE:return this.$MessengerBotMenuDialog4(n);case c("MNCommerceCallToActionType").ACCOUNT_LINK:var q=function q(s){c("MNCommerceCTAProcessor").process(n.id)};return this.$MessengerBotMenuDialog2(n,q);case c("MNCommerceCallToActionType").FACEBOOK_REPORT_A_PROBLEM:var r=function r(s){c("AsyncDialog").send(new(c("AsyncRequest"))("/ajax/bugs/report"))};return this.$MessengerBotMenuDialog2(n,r);case c("MNCommerceCallToActionType").NAVIGATION:return this.$MessengerBotMenuDialog5(n,o);default:return this.$MessengerBotMenuDialog6(n)}};m.prototype.$MessengerBotMenuDialog6=function(n){var o=i._("To use this feature, use the Messenger app.");return c("React").createElement("li",{className:"_1wc4",key:n.id},c("React").createElement("div",babelHelpers["extends"]({className:"_1wc8 _46mq _1wc9 _3cno","data-tooltip-alignh":"center","data-tooltip-position":"above",onClick:this.props.onClick,role:"button"},c("Tooltip").propsFor(o)),n.translated_title||n.title))};m.prototype.$MessengerBotMenuDialog3=function(n){var o=function(p){new(c("MessengerBotsWebTypedLogger"))().setEvent(c("MNBotsLoggerEvents").BOT_COMPOSER_MENU_ITEM_DID_SELECT).setPageID(this.props.pageID).setTitle(n.title).setURL(n.action_link).setType(n.action_type).log();this.$MessengerBotMenuDialog7(n)}.bind(this);return c("React").createElement("li",{className:"_1wc4",key:n.id},c("React").createElement("div",{className:"_46mq",onClick:this.props.onClick,role:"presentation"},c("React").createElement(c("Link.react"),{className:"_1wc8 _1wc9",href:n.action_link,onClick:o,target:"_blank"},n.translated_title||n.title)))};m.prototype.$MessengerBotMenuDialog4=function(n){var o,p=(o=n)!=null?(o=o.webview_metadata)!=null?o.messenger_extensions:o:o;if(p)return this.$MessengerBotMenuDialog8(n);var q=function(){new(c("MessengerBotsWebTypedLogger"))().setEvent(c("MNBotsLoggerEvents").BOT_COMPOSER_MENU_ITEM_DID_SELECT).setPageID(this.props.pageID).setTitle(n.title).setURL(n.action_link).setType(n.action_type).log();this.$MessengerBotMenuDialog7(n)}.bind(this),r=c("MNCommerceCallToActionHandlerMap").getHandler(n.action_link).setThreadID(this.props.threadID).setOnClickHook(q).renderForNativeLink(n,"_1wc8 _46mq _1wc9");return c("React").createElement("li",{className:"_1wc4",key:n.id},r)};m.prototype.$MessengerBotMenuDialog2=function(n,o){var p=function(q){new(c("MessengerBotsWebTypedLogger"))().setEvent(c("MNBotsLoggerEvents").BOT_COMPOSER_MENU_ITEM_DID_SELECT).setPageID(this.props.pageID).setTitle(n.title).setURL(n.action_link).setType(n.action_type).log();o()}.bind(this);return c("React").createElement("li",{className:"_1wc4",key:n.id},c("React").createElement("div",{className:"_46mq",onClick:this.props.onClick,role:"presentation"},c("React").createElement(c("Link.react"),{className:"_1wc8 _1wc9",onClick:p},n.translated_title||n.title)))};m.prototype.$MessengerBotMenuDialog5=function(n,o){var p=function(q){new(c("MessengerBotsWebTypedLogger"))().setEvent(c("MNBotsLoggerEvents").BOT_COMPOSER_MENU_ITEM_DID_SELECT).setPageID(this.props.pageID).setTitle(n.title).setURL(n.action_link).setType(n.action_type).log();this.setState({navigationPath:this.state.navigationPath.concat(o)})}.bind(this);return c("React").createElement("li",{className:"_1wc4",key:n.id},c("React").createElement("div",{className:"_5l-3"},c("React").createElement("div",{className:"_46mq"},c("React").createElement(c("Link.react"),{className:"_1wc8 _1wc9",onClick:p},n.title)),c("React").createElement(c("Link.react"),{className:"_30yy _46n8",onClick:p})))};m.prototype.$MessengerBotMenuDialog8=function(n){var o=function(p){new(c("MessengerBotsWebTypedLogger"))().setEvent(c("MNBotsLoggerEvents").BOT_COMPOSER_MENU_ITEM_DID_SELECT).setPageID(this.props.pageID).setTitle(n.title).setURL(n.action_link).setType(n.action_type).log();c("BrowserExtensionsDialog").show(new(c("URI"))(n.action_link),this.props.pageID,c("MercuryIDs").getThreadFBIDFromThreadID(this.props.threadID),c("CurrentUser").getID());this.$MessengerBotMenuDialog7(n)}.bind(this);return c("React").createElement("li",{className:"_1wc4",key:n.id},c("React").createElement("div",{className:"_46mq",onClick:this.props.onClick,role:"presentation"},c("React").createElement(c("Link.react"),{className:"_1wc8 _1wc9",onClick:o},n.title)))};m.prototype.$MessengerBotMenuDialog9=function(n,o){var p=o?c("React").createElement(c("Link.react"),{className:"_30yy _46n9"}):null;return c("React").createElement("li",{className:"_1wc4"+(!o?" _5-1q":""),key:"header",onClick:function(q){this.setState({navigationPath:this.state.navigationPath.slice(0,-1)})}.bind(this)},c("React").createElement("div",{className:"_5l-3 _1wca"},p,c("React").createElement("div",{className:"_1wc8",style:{flexBasis:o?"80%":"100%"}},n)))};m.prototype.$MessengerBotMenuDialog7=function(n){c("MNCommerceCTAProcessor").postHandle(n.id,null)};m.prototype.componentDidMount=function(){new(c("MessengerBotsWebTypedLogger"))().setEvent(c("MNBotsLoggerEvents").BOT_COMPOSER_MENU_ICON_TAPPED).setPageID(this.props.pageID).log()};m.prototype.render=function(){__p&&__p();if(this.props.isLoading)return c("React").createElement("div",{className:"_5xf_"},c("React").createElement(c("XUISpinner.react"),{size:"large"}));var n=i._("Menu"),o=[];if(this.props.menuItems){var p=this.props.menuItems;for(var q=0;q<this.state.navigationPath.length;q++){var r=this.state.navigationPath[q];n=p[r].title;p=p[r].nested_ctas}o=p.map(function(s,r){return this.$MessengerBotMenuDialog1(s,r)}.bind(this))}return c("React").createElement("ul",null,this.$MessengerBotMenuDialog9(n,this.state.navigationPath.length!==0),o)};m.propTypes={isLoading:l.bool.isRequired,menuItems:l.arrayOf(l.object),pageID:l.string.isRequired,threadID:l.string.isRequired,onClick:l.func.isRequired};f.exports=m}),null);