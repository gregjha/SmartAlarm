if (self.CavalryLogger) { CavalryLogger.start_js(["Guq4w"]); }

__d("MessengerInfoPanelContactActions.react",["cx","fbt","ImmutableObject","MercuryIDs","MercuryParticipants","MercuryThreads","MessengerAdminGroupUtils","messengerContactActionsRe","messengerDialogsRe","messengerMakeAsOwnerDialogReact","MessengerMenu.react","MessengerPopoverMenu.react","messengerRemoveAsOwnerDialogReact","messengerRemoveFromGroupDialogReact","MessengerStateStore","ReactComponentWithPureRenderMixin","React","ShimButton.react","StoreAndPropBasedStateMixin","joinClasses"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=c("messengerContactActionsRe").actions,k=c("messengerMakeAsOwnerDialogReact").jsComponent,l=c("messengerRemoveAsOwnerDialogReact").jsComponent,m=c("messengerRemoveFromGroupDialogReact").jsComponent,n=c("MessengerMenu.react").Item,o=c("MessengerMenu.react").Separator,p=c("React").PropTypes,q=c("React").createClass({displayName:"MessengerInfoPanelContactActions",mixins:[c("ReactComponentWithPureRenderMixin"),c("StoreAndPropBasedStateMixin")(c("MessengerStateStore"))],propTypes:{adminIds:p.arrayOf(p.string),extrasEnabled:p.bool.isRequired,contact:p.instanceOf(c("ImmutableObject")).isRequired,isOpen:p.bool,onAction:p.func.isRequired,onToggle:p.func.isRequired,viewer:p.string.isRequired},statics:{calculateState:function r(s){var t=c("MercuryThreads").getForFBID(s.viewer),u=c("MessengerStateStore").getState().activeThreadID,v=u?t.getOrFetch(u):null;return{thread:v}}},render:function r(){__p&&__p();var s=this._isViewerAdmin(),t=c("MessengerAdminGroupUtils").isAdmin(this.props.adminIds,this.props.contact.uid),u=this._isUserViewer(),v=c("MessengerAdminGroupUtils").canRemoveAdmin(s,t,this.state.thread)?c("React").createElement(n,{label:i._("Remove As Admin"),onclick:this._handleRemoveAsOwnerClick}):null,w=null,x=c("MessengerAdminGroupUtils").canMakeOthersAdmins(s,t,this.state.thread),y=c("MessengerAdminGroupUtils").canMakeSelfAdmin(u,this.state.thread);if(x||y)w=c("React").createElement(n,{label:i._("Make Admin"),onclick:this._hanleMakeOwnerClick});var z=void 0;if(u)if(w||v)z=c("React").createElement(c("MessengerMenu.react"),null,w,v);else return null;else z=c("React").createElement(c("MessengerMenu.react"),null,c("React").createElement(n,{label:i._("Message"),onclick:this._makeActionHandler(j.MESSAGE)}),this.props.contact.href?c("React").createElement(n,{label:i._("View Profile"),onclick:this._makeActionHandler(j.PROFILE)}):null,w,v,this._renderExtras());return c("React").createElement(c("MessengerPopoverMenu.react"),{menu:z,onHide:function(){return this.props.onToggle(false)}.bind(this),onShow:function(){return this.props.onToggle(true)}.bind(this)},c("React").createElement(c("ShimButton.react"),{className:c("joinClasses")(this.props.className,"_57gs"+(this.props.isOpen?" _57gt":"")),onClick:this._handleClick}))},_renderExtras:function r(){if(!this.props.extrasEnabled)return null;var s=[c("React").createElement(o,{key:"separator"})],t=this._isViewerAdmin();if(c("MessengerAdminGroupUtils").canRemoveFromGroup(t,this.state.thread))s.push(c("React").createElement(n,{key:"remove-from-group",label:i._("Remove from Group"),onclick:this._handleRemoveClick}));return s.length>=2?s:null},_handleClick:function r(s){s.stopPropagation();s.preventDefault()},_makeActionHandler:function r(s){return function(t){this._handleClick(t);this.props.onAction(s,t)}.bind(this)},_handleRemoveClick:function r(s){this._handleClick(s);c("messengerDialogsRe").showDialog(function(){return c("React").createElement(m,{onToggle:this._handleDialogToggle,onRemove:this._handleDialogRemoveClick})}.bind(this))},_handleRemoveAsOwnerClick:function r(s){this._handleClick(s);var t=c("MercuryParticipants").getNow(this.props.contact.uid);c("messengerDialogsRe").showDialog(function(){return c("React").createElement(l,{onToggle:this._handleDialogToggle,onRemove:this._handleOwnerRemoveClick,name:t&&t.name,isUserViewer:this._isUserViewer(),isLastAdminInThread:this.props.adminIds&&this.props.adminIds.length===1})}.bind(this))},_handleDialogRemoveClick:function r(s){this.props.onAction(j.REMOVE,s)},_handleOwnerRemoveClick:function r(s){this.props.onAction(j.REMOVE_OWNER,s)},_hanleMakeOwnerClick:function r(s){this._handleClick(s);var t=c("MercuryParticipants").getNow(this.props.contact.uid);c("messengerDialogsRe").showDialog(function(){return c("React").createElement(k,{onToggle:this._handleDialogToggle,onMakeOwner:this._handleOwnerAddClick,name:t&&t.name,isUserViewer:this._isUserViewer()})}.bind(this))},_handleOwnerAddClick:function r(s){this.props.onAction(j.ADD_OWNER,s)},_handleDialogToggle:function r(s){if(!s)c("messengerDialogsRe").removeDialog()},_isUserViewer:function r(){return c("MercuryIDs").getParticipantIDFromUserID(this.props.viewer)===this.props.contact.uid},_isViewerAdmin:function r(){return c("MessengerAdminGroupUtils").isViewerAdmin(this.props.adminIds,this.props.viewer)}});f.exports=q}),null);