if (self.CavalryLogger) { CavalryLogger.start_js(["XsE47"]); }

__d("UserActionHistory",["Arbiter","ClickRefUtils","ScriptPath","throttle","WebStorage"],(function a(b,c,d,e,f,g){__p&&__p();var h={click:1,submit:1},i=false,j={log:[],len:0},k=c("throttle").acrossTransitions(function(){try{i._ua_log=JSON.stringify(j)}catch(n){i=false}},1e3);function l(){__p&&__p();var n=c("WebStorage").getSessionStorage();if(n){i=n;i._ua_log&&(j=JSON.parse(i._ua_log))}else i=false;j.log[j.len%10]={ts:Date.now(),path:"-",index:j.len,type:"init",iref:"-"};j.len++;c("Arbiter").subscribe("UserAction/new",function(o,p){var q=p.ua,r=p.node,event=p.event;if(!event||!(event.type in h))return;var s={path:c("ScriptPath").getScriptPath(),type:event.type,ts:q._ue_ts,iref:c("ClickRefUtils").get_intern_ref(r)||"-",index:j.len};j.log[j.len++%10]=s;i&&k()})}function m(){return j.log.sort(function(n,o){return o.ts!=n.ts?o.ts-n.ts:o.index-n.index})}l();f.exports={getHistory:m}}),null);