if (self.CavalryLogger) { CavalryLogger.start_js(["VGYb3"]); }

__d("messengerAddToConversationDialogReact",["cx","fbt","bs_array","bs_block","bs_curry","React","utilsRe","immutable","bs_js_boolean","MercuryIDs","bs_pervasives","ReasonReact","bs_js_primitive","messengerDialogsRe","MercuryMessageObject","messengerDialogReact","MercuryLogMessageType","MercuryMessageActions","MercuryTriodeSourceUtil","MessengerAdminGroupUtils","messengerGraphQLTokenizerReact"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();function j(s,t){if(typeof s==="number")return c("bs_block").__(0,[[c("immutable").List([])]]);else if(s.tag){var u=s[0];return c("bs_block").__(0,[[t[0].filter(function(v){return c("bs_js_boolean").to_js_boolean(+(v.getUniqueID()!==u))})]])}else return c("bs_block").__(0,[[t[0].push(s[0])]])}function k(s){return c("bs_block").__(0,[s])}function l(s){return c("bs_block").__(1,[s.getUniqueID()])}function m(){return 0}var n=c("ReasonReact").reducerComponent("MessengerAddToConversationDialogReact");function o(s){if(s)return 0;else return c("messengerDialogsRe").removeDialog(0)}function p(s,t,u){__p&&__p();var v=function v(x,y){__p&&__p();var z=y[2],A=z[0].count(),B=+c("MessengerAdminGroupUtils").isJoinableThread(s),C=+c("MessengerAdminGroupUtils").shouldInvite(s),D=0;if(A!==0)if(B!==0)if(C!==0)z[0].forEach(function(E,u,F){var G=c("MercuryIDs").getThreadIDFromUserID(E.getUniqueID());c("MercuryMessageActions").getForFBID(t).send(c("MercuryMessageObject").getForFBID(t).constructUserGeneratedMessageObject(s.joinable_mode.link,c("MercuryTriodeSourceUtil").getMercuryTriodeSource(),G,[]),undefined,undefined);return true});else D=1;else if(C!==0)throw c("bs_pervasives").invalid_arg("Only joinable threads can invite");else D=1;if(D===1)c("MercuryMessageActions").getForFBID(t).send(c("MercuryMessageObject").getForFBID(t).constructLogMessageObject(c("MercuryTriodeSourceUtil").getMercuryTriodeSource(),s.thread_id,c("MercuryLogMessageType").SUBSCRIBE,{added_participants:z[0].map(function(E,u,F){return c("MercuryIDs").getParticipantIDFromUserID(E.getUniqueID())}).toArray()}),undefined,undefined);x.preventDefault();return c("messengerDialogsRe").removeDialog(0)},w=n.slice();w[9]=function(x){var y=+c("MessengerAdminGroupUtils").shouldInvite(s),z=c("immutable").Set(c("utilsRe").arrayCompact(c("bs_array").map(function(A){return c("bs_js_primitive").null_undefined_to_opt(c("MercuryIDs").getUserIDFromParticipantID(A))},s.participants)));return c("ReasonReact").element(0,0,c("messengerDialogReact").Dialog[0](0,o,0,[1],0,["default"],[460],[c("React").createElement("div",{className:"_4jgp"},c("ReasonReact").element(0,0,c("messengerDialogReact").Header[0](0,0,[c("ReasonReact").element(0,0,c("messengerDialogReact").CancelButton[0](0,[])),c("ReasonReact").element(0,0,c("messengerDialogReact").Title[0](0,[y!==0?i._("Invite More People"):i._("Add More People")])),c("ReasonReact").element(0,0,c("messengerDialogReact").Button[0](0,[i._("Done")],0,0,[c("bs_curry")._1(x[0],v)],[0],0,0,[]))])),c("ReasonReact").element(0,0,c("messengerGraphQLTokenizerReact").make(1,["_4jgt"],0,0,0,+c("MessengerAdminGroupUtils").useNewGroupMemberSuggestionRanking(),x[2][0],1,1-+c("MessengerAdminGroupUtils").canSeeBotsInGroupTypeahead(),[1],0,c("bs_curry")._1(x[1],k),[c("bs_curry")._1(x[1],m)],c("bs_curry")._1(x[1],l),z,y!==0?i._("Invite to group:"):i._("Add to group:"),c("bs_js_primitive").null_undefined_to_opt(s.associated_object),["_4jgu"],0,0,0,c("bs_js_primitive").null_undefined_to_opt(s.thread_fbid),0,t,460,[])))]))};w[10]=function(){return[c("immutable").List([])]};w[12]=j;return w}var q=c("ReasonReact").wrapReasonForJs(n,function(s){return p(s.thread,s.viewer,[])}),r=460;g.reducer=j;g.handleAddEntryAttempt=k;g.handleRemoveEntryAttempt=l;g.handleClear=m;g.component=n;g.dialogWidth=r;g.handleToggle=o;g.make=p;g.jsComponent=q}),null);