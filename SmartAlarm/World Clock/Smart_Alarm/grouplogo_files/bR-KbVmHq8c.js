if (self.CavalryLogger) { CavalryLogger.start_js(["kHRfk"]); }

__d("ProfileHeaderCoverPhoto.react",["cx","BasicVector","PhotoZoomCropDimensions","PhotoZoomCropMixin","PagesProfileTestID","ProfileHeaderViewShapes","ProfileWizardStrings","React","ReactComponentWithPureRenderMixin","PhotoZoomCropImage.react","ProfileHeaderSpinner.react","XUIButton.react"],(function a(b,c,d,e,f,g,h){__p&&__p();var i=c("React").PropTypes,j=c("React").createClass({displayName:"ProfileHeaderCoverPhoto",_dims:null,mixins:[c("PhotoZoomCropMixin"),c("ReactComponentWithPureRenderMixin")],propTypes:{coverPhotoData:c("ProfileHeaderViewShapes").COVER_PHOTO_DATA.isRequired,customControls:i.element,emptyCover:i.element,height:i.number.isRequired,hideDefaultButtons:i.bool,isHidden:i.bool,isLoading:i.bool,onMove:i.func,previewCancelHandler:i.func,previewMode:i.bool,previewSaveHandler:i.func,width:i.number.isRequired},getDefaultProps:function k(){return{hideDefaultButtons:false,onMove:function l(){},previewCancelHandler:function l(){},previewSaveHandler:function l(){}}},getInitialState:function k(){this._updateDimensions(this.props.coverPhotoData);return babelHelpers["extends"]({},this._getUpdatedDimensionsState())},componentWillReceiveProps:function k(l){__p&&__p();var m=this.props.coverPhotoData;if(m.id===l.coverPhotoData.id&&this.props.previewMode===l.previewMode){var n=m.focus;if(!n)return;if(n.width===l.coverPhotoData.focus.width&&n.height===l.coverPhotoData.focus.height)return}this._updateDimensions(l.coverPhotoData,l.height);this.setState(babelHelpers["extends"]({},this._getUpdatedDimensionsState()))},_updateDimensions:function k(l,m){__p&&__p();var n=l.original;if(n==null)return;var o=new(c("BasicVector"))(n.width,n.height),p=new(c("PhotoZoomCropDimensions"))(o);p.setSize(this.props.width,m||this.props.height);var q=l.focus;if(q)p.setCenter(q.width,q.height);p.setZoom(p.getSize().x/n.width);this._dims=p},_getUpdatedDimensionsState:function k(){return this._getDimensionsState()},_onMove:function k(l,m){this._handleMove(l,m);this.props.onMove&&this.props.onMove(l,m)},render:function k(){__p&&__p();var l=this.props.coverPhotoData,m=void 0;if(l.uri){var n=!!(this.props.previewMode&&this._dims&&this._dims.isCurrentlyDragable());m=c("React").createElement(c("PhotoZoomCropImage.react"),{className:"_2oru"+(this.props.isHidden||this.props.isLoading?" _2orv":""),customControls:this.props.customControls,dimensions:this._dims,enableDrag:n,onMove:this._onMove,src:l.uri})}else if(this.props.emptyCover)m=this.props.emptyCover;else m=c("React").createElement("div",{className:"_2orw"});var o=null;if(this.props.previewMode&&!this.props.customControls&&!this.props.hideDefaultButtons)o=c("React").createElement("div",{className:"_1tg"},c("React").createElement("div",{className:"_1th"},c("React").createElement(c("XUIButton.react"),{"data-testid":c("PagesProfileTestID").COVER_PHOTO_SAVE_BUTTON,label:c("ProfileWizardStrings").SAVE,onClick:this.props.previewSaveHandler,size:"large",use:"confirm"}),c("React").createElement(c("XUIButton.react"),{label:c("ProfileWizardStrings").CANCEL,onClick:this.props.previewCancelHandler,size:"large"})));return c("React").createElement("div",{className:"_2orx",style:{height:this.props.height,width:this.props.width}},m,o,c("React").createElement(c("ProfileHeaderSpinner.react"),{shown:this.props.isLoading}))},getOffsets:function k(){var l=this.getDimensions().getPosition();return{x:l.left/l.width,y:l.top/l.height}},getCenter:function k(){var l=this.getDimensions().getRect();return l.center},__getZoom:function k(){return this.state.zoom}});f.exports=j}),null);