if (self.CavalryLogger) { CavalryLogger.start_js(["Yi8hc"]); }

__d("createEmojiElement",["cx","JSXDOM"],(function a(b,c,d,e,f,g,h){function i(j,k,l){l=l||16;return c("JSXDOM").span({className:"_5mfr _47e3"},[c("JSXDOM").img({"aria-hidden":true,className:"img",height:l,src:k,width:l}),c("JSXDOM").span({className:"_7oe"},j)])}f.exports=i}),null);
__d("DOMEmoji",["cx","EmojiImageURL","EmojiRenderer","FBEmojiUtils","JSXDOM","SupportedFBEmoji","Utf16","createEmojiElement","flattenArray","isElementNode"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i={MAX_ITEMS:40,transform:function j(k,l){__p&&__p();l=l||{};var m=l.size||16;return c("flattenArray")(k.map(function(n){__p&&__p();if(!c("isElementNode")(n))return c("EmojiRenderer").render(n,function(o){__p&&__p();if(l.isSupportedEmoji){var p=c("FBEmojiUtils").getKeyFromCodepoints(o);if(l.isSupportedEmoji(p))return c("createEmojiElement")(o.join(""),c("EmojiImageURL").getMessengerURL(p,m),m)}else{var q=c("FBEmojiUtils").getSupportedKey(o);if(q)return c("createEmojiElement")(o.join(""),c("EmojiImageURL").getFBEmojiURL(q,m),m)}return c("JSXDOM").span({className:"_4ay8"+(m===16?" _3kkw":"")},o.join(""))},this.MAX_ITEMS);else return n}.bind(this)))},params:function j(k){if(!k)return this;var l=this;return{__params:true,obj:l,params:k}}};f.exports=i}),null);
__d("TransformTextToDOMMixin",["flattenArray","isElementNode"],(function a(b,c,d,e,f,g){__p&&__p();var h=3,i={transform:function j(k,l){__p&&__p();return c("flattenArray")(k.map(function(m){__p&&__p();if(!c("isElementNode")(m)){var n=m,o=[],p=this.MAX_ITEMS||h;while(p--){var q=l?[n].concat(l):[n],r=this.match.apply(this,q);if(!r)break;o.push(n.substring(0,r.startIndex));o.push(r.element);n=n.substring(r.endIndex)}n&&o.push(n);return o}return m}.bind(this)))},params:function j(){for(var k=arguments.length,l=Array(k),m=0;m<k;m++)l[m]=arguments[m];var n=this;return{__params:true,obj:n,params:l}}};f.exports=i}),null);
__d("DOMEmote",["cx","fbt","EmojiImageURL","EmoticonEmojiList","EmoticonsList","JSXDOM","SupportedFBEmoji","TransformTextToDOMMixin"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j={MAX_ITEMS:40,match:function k(l,m){var n=m&&m.getMessengerEmote,o=n?c("EmoticonEmojiList").regexp.exec(l):c("EmoticonsList").regexp.exec(l);if(!o||!o.length)return false;var k=o[2],p=o.index+o[1].length,q=n?c("EmoticonEmojiList").names[k]:c("EmoticonsList").emotes[k];return{startIndex:p,endIndex:p+k.length,element:this._element(k,q,m)}},_element:function k(l,m,n){var o=n&&n.getMessengerEmote,p=o?o(m):c("EmoticonsList").emoji[m],q=null;if(o&&p)q=c("JSXDOM").img({"aria-hidden":true,className:"img",height:16,src:c("EmojiImageURL").getMessengerURL(p,16),width:16});else if(p)q=c("JSXDOM").img({"aria-hidden":true,className:"img",height:16,src:c("SupportedFBEmoji")[p]?c("EmojiImageURL").getFBEmojiURL(p):c("EmojiImageURL").getFBEmojiExtendedURL(p),width:16});else q=c("JSXDOM").span({"aria-hidden":true,className:"emoticon emoticon_"+m});var r=i._("{emoticonName} emoticon",[i.param("emoticonName",m)]);return c("JSXDOM").span({className:"_47e3 _5mfr",title:r},[q,c("JSXDOM").span({"aria-hidden":true,className:"_7oe"},l)])}};f.exports=Object.assign(j,c("TransformTextToDOMMixin"))}),null);
__d("P2PTriggersUtils",["P2PGKValues"],(function a(b,c,d,e,f,g){var h=/\$((\d{1,3}(,\d{3})*)|\d+)(\.\d{1,2})?(?=\s|\.\s|\,\s|$|\.$|\,$|\?|\!|\")/,i={canSeeTriggers:function j(k){if(!c("P2PGKValues").P2PEnabled)return false;return true},getMatches:function j(k){return k.match(h)}};f.exports=i}),null);
__d("DOMP2PTrigger",["cx","MessengerEnvironment","JSXDOM","P2PAmountUtils","P2PTriggersUtils","TransformTextToDOMMixin"],(function a(b,c,d,e,f,g,h){__p&&__p();var i={MAX_ITEMS:40,match:function j(k){var l=c("P2PTriggersUtils").getMatches(k);if(!l||!l.length)return false;var m=l[0];if(!c("P2PAmountUtils").isValidSendAmount(m))return false;var n=l.index;return{startIndex:n,endIndex:n+m.length,element:this._element(m)}},_element:function j(k){return c("JSXDOM").a({href:"#",className:"_35i0"+(!c("MessengerEnvironment").messengerui?" _4g4e":""),"data-p2p-trigger":k},k)}};f.exports=Object.assign(i,c("TransformTextToDOMMixin"))}),null);
__d("transformTextToDOM",["createArrayFromMixed"],(function a(b,c,d,e,f,g){__p&&__p();function h(i,j){__p&&__p();var k=[i];j=c("createArrayFromMixed")(j);j.forEach(function(l){var m,n=l;if(l.__params){m=l.params;n=l.obj}k=n.transform(k,m)});return k}f.exports=h}),null);
__d("p2pTriggerJSXDOMToString",["DOMEmoji","DOMEmote","DOMP2PTrigger","JSXDOM","transformTextToDOM"],(function a(b,c,d,e,f,g){__p&&__p();var h=function h(i,j,k,l,m,n){var o=[];if(l)o.push(c("DOMP2PTrigger"));if(j)m?o.push(c("DOMEmoji").params({isSupportedEmoji:m})):o.push(c("DOMEmoji"));if(k)n?o.push(c("DOMEmote").params({getMessengerEmote:n})):o.push(c("DOMEmote"));return c("JSXDOM").span(null,c("transformTextToDOM")(i,o)).innerHTML};f.exports=h}),null);
__d("P2PTriggers.react",["DOM","Event","MercuryIDs","P2PActions","P2PLogger","P2PPaymentLoggerEvent","P2PPaymentLoggerEventFlow","P2PUserEligibilityStore","StoreAndPropBasedStateMixin","React","ReactDOM","nullthrows","p2pTriggerJSXDOMToString"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("React").PropTypes,i=c("React").createClass({displayName:"P2PTriggers",mixins:[c("StoreAndPropBasedStateMixin")(c("P2PUserEligibilityStore"))],propTypes:{getMessengerEmote:h.func,isSupportedEmoji:h.func,renderEmoji:h.bool,renderEmoticons:h.bool,text:h.string.isRequired,threadID:h.string.isRequired},getInitialState:function j(){return{amount:""}},statics:{calculateState:function j(k){var l=c("MercuryIDs").isGroupChat(k.threadID)||c("P2PUserEligibilityStore").getEligibilityByThreadID(k.threadID);return{isThreadEligible:l,otherUserID:c("MercuryIDs").getUserIDFromThreadID(k.threadID)}}},_clickListeners:null,componentDidMount:function j(){this._clickListeners=[];this.bindClickListeners()},componentWillUnmount:function j(){this.unbindClickListeners()},log:function j(k,l){c("P2PLogger").log(k,babelHelpers["extends"]({www_event_flow:c("P2PPaymentLoggerEventFlow").UI_FLOW_P2P_SEND,object_id:this.state.otherUserID},l))},bindClickListeners:function j(){var k=c("nullthrows")(this._clickListeners);if(!k.length){var l=c("DOM").scry(c("ReactDOM").findDOMNode(this),"[data-p2p-trigger]");for(var m=0,n=l.length;m<n;m++)k.push(c("Event").listen(l[m],"click",this.handleTriggerClick))}},unbindClickListeners:function j(){var k=void 0;if(this._clickListeners){for(var l=0,m=this._clickListeners.length;l<m;l++){k=this._clickListeners[l];if(k)k.remove()}this._clickListeners=[]}},componentDidUpdate:function j(k,l){if(!l.isThreadEligible&&this.state.isThreadEligible)this.bindClickListeners()},getAmountFromTriggerClickEvent:function j(k){var l=k.target.getAttribute("data-p2p-trigger")||"";return l.replace(/[^0-9\.]+/g,"")},handleTriggerClick:function j(k){k.preventDefault();var l=this.getAmountFromTriggerClickEvent(k);this.setState({amount:l});this.openSendView();this.log(c("P2PPaymentLoggerEvent").UI_ACTN_INITIATE_SEND_TRIGGER,{raw_amount:this.state.amount,currency:"USD"})},openSendView:function j(){c("P2PActions").chatSendViewOpened({threadID:this.props.threadID,amount:this.state.amount})},render:function j(){var k=c("p2pTriggerJSXDOMToString")(this.props.text,this.props.renderEmoji,this.props.renderEmoticons,this.state.isThreadEligible,this.props.isSupportedEmoji,this.props.getMessengerEmote);return c("React").createElement("span",{dangerouslySetInnerHTML:{__html:k}})}});f.exports=i}),null);
__d("TextWithEntitiesAndP2P.react",["BaseTextWithEntities.react","Link.react","P2PTriggers.react","React"],(function a(b,c,d,e,f,g){"use strict";var h=c("React").createClass({displayName:"TextWithEntitiesAndP2P",_renderText:function i(j){return c("React").createElement(c("P2PTriggers.react"),{getMessengerEmote:this.props.getMessengerEmote,isSupportedEmoji:this.props.isSupportedEmoji,renderEmoticons:this.props.renderEmoticons,renderEmoji:this.props.renderEmoji,text:j,threadID:this.props.threadID})},_renderRange:function i(j,k){if(this.props.interpolator)return this.props.interpolator(j,k);else return c("React").createElement(c("Link.react"),{href:k.entity},j)},render:function i(){return c("React").createElement(c("BaseTextWithEntities.react"),babelHelpers["extends"]({},this.props,{textRenderer:this._renderText,rangeRenderer:this._renderRange,ranges:this.props.ranges,imageRanges:this.props.imageRanges,aggregatedRanges:this.props.aggregatedRanges,text:this.props.text}))}});f.exports=h}),null);