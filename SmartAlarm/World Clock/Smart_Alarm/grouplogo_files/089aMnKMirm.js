if (self.CavalryLogger) { CavalryLogger.start_js(["KXhvH"]); }

__d("ServerHTML.react",["React"],(function a(b,c,d,e,f,g){__p&&__p();var h,i;h=babelHelpers.inherits(j,c("React").Component);i=h&&h.prototype;j.prototype.render=function(){"use strict";var k=this.props,l=k.blob,m=babelHelpers.objectWithoutProperties(k,["blob"]);return typeof l==="string"?c("React").createElement("div",m,l):c("React").createElement("div",babelHelpers["extends"]({},m,{dangerouslySetInnerHTML:l}))};function j(){"use strict";h.apply(this,arguments)}f.exports=j}),null);
__d("P2PAcceptMoneyDialog.react",["cx","BootloadedComponent.react","Bootloader","MessengerEnvironment","P2PDialog.react","P2PLoadingMask.react","JSResource","React","Run"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("React").PropTypes,l=c("MessengerEnvironment").messengerui;i=babelHelpers.inherits(m,c("React").Component);j=i&&i.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=j.constructor).call.apply(n,[this].concat(q)),this.$P2PAcceptMoneyDialog1=function(){return c("React").createElement(c("P2PDialog.react"),{className:"_309"+(l?" _5ktw":""),layerHideOnBlur:false,repositionOnUpdate:true,shown:true,width:l?400:350},c("React").createElement("div",{className:"_3w2b"},c("React").createElement(c("P2PLoadingMask.react"),{visible:true})))},o}m.preload=function(){c("Run").onAfterLoad(function(){c("Bootloader").loadModules(["P2PAcceptMoneyDialogImpl.react"],function(){},"P2PAcceptMoneyDialog.react")})};m.prototype.render=function(){return c("React").createElement(c("BootloadedComponent.react"),babelHelpers["extends"]({bootloadLoader:c("JSResource")("P2PAcceptMoneyDialogImpl.react").__setRef("P2PAcceptMoneyDialog.react"),bootloadPlaceholder:this.$P2PAcceptMoneyDialog1()},this.props))};m.propTypes={creditCards:k.array.isRequired,useRedesignForm:k.bool,onClose:k.func,transfer:k.object};f.exports=m}),null);
__d("P2PBubbleActionComponent.react",["cx","Link.react","P2PAcceptMoneyDialog.react","P2PActions","P2PVerificationFlowHelper","React","URI","XP2PTransactionDetailController"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j;i=babelHelpers.inherits(k,c("React").Component);j=i&&i.prototype;function k(){__p&&__p();var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=j.constructor).call.apply(l,[this].concat(o)),this.onAcceptMoneyClick=function(){var q=this.props.moneyTransfer;if(q){var r={sender:q.sender,receiver:q.receiver,transfer_id:q.transfer_id,amountWithSymbol:q.amount.formattedAmount};c("P2PActions").showDialog(c("P2PAcceptMoneyDialog.react"),{creditCards:[],onClose:this.onAcceptMoneyDialogClose,transfer:r})}}.bind(this),this.onConfirmInfoClicked=function(){var q=this.props.moneyTransfer;if(q)c("P2PVerificationFlowHelper").startVerificationFlow(q.transfer_id,false)}.bind(this),m}k.prototype.getTransferDetailsURI=function(){var l=this.props.receiptView;if(!l)return null;return c("XP2PTransactionDetailController").getURIBuilder().setString("id",l.id).getURI()};k.prototype.onAcceptMoneyDialogClose=function(){c("P2PActions").hideDialog()};k.prototype.render=function(){if(this.props.actionIdentifier==="P2P_OPEN_RECEIPT"&&this.props.receiptView)return c("React").createElement(c("Link.react"),{className:"_3hu-",href:this.getTransferDetailsURI(),target:"_blank"},c("React").createElement("button",{className:"_52jv _3hu_"+(this.props.actionStyle==="PRIMARY"?" _3hv1":"")},this.props.title));else if(this.props.actionIdentifier==="P2P_ACCEPT_MONEY"&&this.props.moneyTransfer)return c("React").createElement("button",{className:"_52jv _3hu_"+(this.props.actionStyle==="PRIMARY"?" _3hv1":""),onClick:this.onAcceptMoneyClick},this.props.title);else if(this.props.actionIdentifier==="P2P_VERIFY_INFO"&&this.props.moneyTransfer)return c("React").createElement("button",{className:"_52jv _3hu_"+(this.props.actionStyle==="PRIMARY"?" _3hv1":""),onClick:this.onConfirmInfoClicked},this.props.title);else return null};f.exports=k}),null);
__d("P2PBubbleTextColorMapping",["cx"],(function a(b,c,d,e,f,g,h){"use strict";function i(j){return(j==="BLACK"?"_vzu":"")+(j==="DARK_GREY"?" _vzw":"")+(j==="LIGHT_GREY"?" _vzx":"")+(j==="ROBOTEXT_GREY"?" _6252":"")+(j==="BLUE"?" _6253":"")+(j==="RED"?" _6254":"")+(j==="GREEN"?" _6255":"")}f.exports=i}),null);
__d("P2PBubbleAmountComponent.react",["cx","P2PBubbleTextColorMapping","PECurrency","React","joinClasses"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=40,l=20;i=babelHelpers.inherits(m,c("React").Component);j=i&&i.prototype;m.prototype.componentDidMount=function(){var n=this.amountNumberEL,o=this.currencySymbolEl;if(n&&o){var p=n.offsetWidth,q=n.scrollWidth;if(p&&q&&p<q){n.style.fontSize=Math.max(p/q*k,20)+"px";o.style.fontSize=Math.max(p/q*l,10)+"px"}}};m.prototype.render=function(){var n=c("PECurrency").getCurrencySymbol(this.props.amount.currency);return c("React").createElement("div",{className:"_52jv _4bda"+(n.length===1?" _4bdd":"")+(n.length===2?" _4bde":"")+(n.length===3?" _4bdh":"")},c("React").createElement("div",{className:c("joinClasses")(c("P2PBubbleTextColorMapping")(this.props.color),"_4bdn")},c("React").createElement("div",{className:"_4bdp",ref:function(o){this.currencySymbolEl=o}.bind(this)},n),c("React").createElement("div",{className:"_4bdr",ref:function(o){this.amountNumberEL=o}.bind(this)},this.props.amount.amount)))};function m(){i.apply(this,arguments)}m.defaultProps={color:"BLUE"};f.exports=m}),null);
__d("P2PBubbleImageComponent.react",["cx","CssBackgroundImage.react","React"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j;i=babelHelpers.inherits(k,c("React").Component);j=i&&i.prototype;k.prototype.render=function(){return c("React").createElement(c("CssBackgroundImage.react"),{className:"_tk6",backgroundPosition:"center center",imageURI:this.props.image.uri,style:{paddingTop:1/this.props.aspectRatio*100+"%"}})};function k(){i.apply(this,arguments)}k.defaultProps={aspectRatio:1.5};f.exports=k}),null);
__d("P2PBubbleTextSizeMapping",["cx"],(function a(b,c,d,e,f,g,h){"use strict";function i(j){return(j==="SMALL"?"_624_":"")+(j==="MEDIUM"?" _6250":"")+(j==="LARGE"?" _6251":"")}f.exports=i}),null);
__d("P2PBubbleTextComponent.react",["cx","FacepileRounded.react","Image.react","P2PBubbleTextColorMapping","P2PBubbleTextSizeMapping","React","joinClasses"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=4,l=k+1,m=16,n=12;i=babelHelpers.inherits(o,c("React").Component);j=i&&i.prototype;o.prototype.renderFacepile=function(){var p=this.props.facepileUsers;if(p.length===0)return null;var q=p.map(function(s){return{image_src:s.profile_picture.uri,name:s.profile_picture.name||"",entity_id:s.id}}),r=q.length===l?l:k;return c("React").createElement(c("FacepileRounded.react"),{className:"_1du_ _1dv0",imageSize:m,numProfilesToDisplay:r,profiles:q,showNames:true})};o.prototype.renderImage=function(){__p&&__p();var p=this.props.images;if(p.length===0)return null;var q=[];for(var r=p.entries(),s=Array.isArray(r),t=0,r=s?r:r[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var u;if(s){if(t>=r.length)break;u=r[t++]}else{t=r.next();if(t.done)break;u=t.value}var v=u,w=v[0],x=v[1];q.push(c("React").createElement(c("Image.react"),{className:"_3-8_ _1dv0",height:n+"px",key:"Image"+w,src:x.uri,width:n+"px"}))}return q};o.prototype.render=function(){var p=this.props.alignment;return c("React").createElement("div",{className:c("joinClasses")(c("P2PBubbleTextColorMapping")(this.props.color),c("P2PBubbleTextSizeMapping")(this.props.size),"_3-8n _2pi8"+(p==="LEFT"?" _52ju":"")+(p==="CENTER"?" _52jv":"")+(p==="RIGHT"?" _52jw":""))},this.renderFacepile(),this.renderImage(),c("React").createElement("span",{className:"_1dv8"},this.props.text))};function o(){i.apply(this,arguments)}o.defaultProps={alignment:"CENTER",color:"BLACK",facepileUsers:[],images:[],size:"MEDIUM"};f.exports=o}),null);
__d("P2PMercuryAttachmentBubble.react",["cx","fbt","BackgroundImage.react","MessengerEnvironment","Link.react","P2PBigAmount.react","P2PGKValues","React","URI","formatDate","joinClasses"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("React").PropTypes;j=babelHelpers.inherits(m,c("React").Component);k=j&&j.prototype;m.prototype.renderBigAmount=function(){return c("React").createElement(c("P2PBigAmount.react"),{amount:this.props.amount,className:"_3oh-",currencyCode:this.props.currencyCode,isPending:this.props.isPending})};m.prototype.renderStatusFooter=function(){var n=void 0;if(c("MessengerEnvironment").messengerui)n=i._("Status");else n=i._("STATUS");return c("React").createElement("div",{className:"_5qco"},this.renderMemoFooter(),c("React").createElement("div",{className:"_5qcp"},c("React").createElement("div",{className:"_5qcq"},n),this.renderStatusWithDate()))};m.prototype.renderBannerFooter=function(){if(!this.props.bannerContent)return null;return c("React").createElement("div",{className:"_5qco"},this.props.bannerContent)};m.prototype.renderStatusWithDate=function(){var n=this.props.date,o=this.props.statusText,p=void 0;if(n){p=c("formatDate")(n,"M jS, g:ia");return c("React").createElement("div",null,c("React").createElement("div",{className:"_5qcr"},o),c("React").createElement("div",{className:"_5qcs"},"\xb7"),c("React").createElement("div",{className:"_5qct"},p))}return c("React").createElement("div",null,o)};m.prototype.renderMemoFooter=function(){var n=this.props.memoText,o=void 0;if(!n)return null;if(c("MessengerEnvironment").messengerui)o=i._("For");else o=i._("FOR");return c("React").createElement("div",{className:"_5qcp _3-94"},c("React").createElement("div",{className:"_5qcq"},o),c("React").createElement("div",{className:"_5qd0"},n))};m.prototype.renderMemoPhoto=function(){__p&&__p();var n=this.props.memoPhotoURLs&&this.props.memoPhotoURLs[0];if(!c("P2PGKValues").P2PWWWMemoPhotoEligible||!n)return null;var o=192,p=100;if(this.props.isMessagesView){o=220;p=110}else if(c("MessengerEnvironment").messengerui){o=350;p=120}return c("React").createElement(c("BackgroundImage.react"),{className:"_rou",width:o,height:p,backgroundSize:"cover",src:n})};m.prototype.renderStandaloneMemoSection=function(){var n=this.renderMemoFooter();if(!n)return null;return c("React").createElement("div",{className:"_nvv"},n)};m.prototype.renderTopSection=function(){if(!this.props.topContent)return null;return c("React").createElement("div",{className:"_5qd1"},this.props.topContent)};m.prototype.renderReceiverText=function(){if(!this.props.isGroupThread)return null;if(this.props.isPaymentRequest)return c("React").createElement("div",{className:"_nvw"},i._("From {Name of the person receiving money}",[i.param("Name of the person receiving money",this.props.receiverName)]));return c("React").createElement("div",{className:"_nvw"},i._("Sent to {Name of the person receiving money}",[i.param("Name of the person receiving money",this.props.receiverName)]))};m.prototype.render=function(){var n=this.renderBannerFooter(),o=void 0;if(!n)o=this.renderStatusFooter();else if(this.props.forceMemoTextShown)o=this.renderStandaloneMemoSection();return c("React").createElement("div",{className:c("joinClasses")(this.props.className,"_5qd2"+(this.props.isSender?" _5qd3":"")+(this.props.isMessagesView?" _5qd4":"")+(c("MessengerEnvironment").messengerui?" _5qd5":"")+(this.props.viewerIsThirdParty?" _5qd6":""))},c("React").createElement("div",{className:"_5qd7"},c("React").createElement(c("Link.react"),{className:"_5qd8",href:this.props.detailsURI,onClick:this.props.onClick,target:"_blank"},this.renderMemoPhoto(),this.renderTopSection(),c("React").createElement("div",{className:"_5qd9"},this.renderBigAmount(),this.renderReceiverText()),o),n))};function m(){j.apply(this,arguments)}m.propTypes={amount:l.string.isRequired,currencyCode:l.string.isRequired,bannerContent:l.object,date:l.number,detailsURI:l.instanceOf(c("URI")),forceMemoTextShown:l.bool,isGroupThread:l.bool,isMessagesView:l.bool,isPending:l.bool,isPaymentRequest:l.bool,isSender:l.bool,memoText:l.string,memoPhotoURLs:l.arrayOf(l.string),onClick:l.func.isRequired,receiverName:l.string,statusText:l.node,topContent:l.object};f.exports=m}),null);
__d("P2PMercuryAttachmentGroupBubble.react",["cx","fbt","BackgroundImage.react","FacepileRounded.react","MessengerEnvironment","Middot.react","Link.react","P2PAcceptMoneyDialog.react","P2PActions","P2PBigAmount.react","P2PEncryptedText.react","P2PGKValues","P2PPaymentRequestStatus","P2PText.react","React","ServerHTML.react","XUIText.react","idx","joinClasses"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=3,m=l+1,n=[c("P2PPaymentRequestStatus").TRANSFER_COMPLETED,c("P2PPaymentRequestStatus").DECLINED,c("P2PPaymentRequestStatus").INITED,c("P2PPaymentRequestStatus").EXPIRED];j=babelHelpers.inherits(o,c("React").Component);k=j&&j.prototype;function o(){var p,q;for(var r=arguments.length,s=Array(r),t=0;t<r;t++)s[t]=arguments[t];return q=(p=k.constructor).call.apply(p,[this].concat(s)),this.onAcceptMoneyClick=function(){c("P2PActions").showDialog(c("P2PAcceptMoneyDialog.react"),{creditCards:[],onClose:this.onAcceptMoneyDialogClose,transfer:this.props.pendingTransfer})}.bind(this),q}o.prototype.getMemoPhotoURL=function(){return this.props.memoPhotoURLs&&this.props.memoPhotoURLs[0]};o.prototype.getRequestProfile=function(p){var q=p.requestee||{};return{image_src:q.picture,name:q.full_name}};o.prototype.getStatusMap=function(){var p;return this.props.individualRequests.reduce(function(q,r){switch(r.currentStatus){case c("P2PPaymentRequestStatus").EXPIRED:case c("P2PPaymentRequestStatus").DECLINED:case c("P2PPaymentRequestStatus").TRANSFER_COMPLETED:q[r.currentStatus]++;break;default:q[c("P2PPaymentRequestStatus").INITED]++;break}return q},(p={},p[c("P2PPaymentRequestStatus").DECLINED]=0,p[c("P2PPaymentRequestStatus").EXPIRED]=0,p[c("P2PPaymentRequestStatus").INITED]=0,p[c("P2PPaymentRequestStatus").TRANSFER_COMPLETED]=0,p))};o.prototype.isPendingPush=function(){if(!c("P2PGKValues").P2PGroupRequestAcceptMoneyEnabled)return false;return!!this.props.isSender&&!!this.props.pendingTransfer};o.prototype.paidReuqestFilter=function(p){return p.currentStatus===c("P2PPaymentRequestStatus").TRANSFER_COMPLETED};o.prototype.renderBigAmount=function(){return c("React").createElement("div",{className:"_3-96 _3-8w _52jv"},c("React").createElement(c("P2PBigAmount.react"),{amount:this.props.amount,className:"_3oh-",currencyCode:this.props.currencyCode,isPending:this.props.isPending}))};o.prototype.onAcceptMoneyDialogClose=function(){c("P2PActions").hideDialog()};o.prototype.renderBannerFooter=function(p){if(p)return c("React").createElement(c("Link.react"),{className:"_5qd8",onClick:this.onAcceptMoneyClick},c("React").createElement(c("XUIText.react"),{className:"_4o8z",display:"block",size:"large"},i._("Accept Money")));if(!this.props.bannerContent)return null;return c("React").createElement("div",{className:"_5qco"},this.props.bannerContent)};o.prototype.renderDescription=function(){var p,q=(p=this.props)!=null?(p=p.statusDescription)!=null?p.markup:p:p;if(!q)return null;return c("React").createElement(c("P2PText.react"),{className:"_2pi9 _3-8o _52jv",type:"primary"},c("React").createElement(c("ServerHTML.react"),{blob:q}))};o.prototype.renderEncryptedText=function(p){if(!p)return null;return c("React").createElement(c("P2PText.react"),{className:"_52jv _2pi8",shade:"light",type:"secondary"},c("React").createElement(c("P2PEncryptedText.react"),{showPasswordProtected:true}))};o.prototype.renderMemoPhoto=function(){__p&&__p();var p=this.getMemoPhotoURL();if(!c("P2PGKValues").P2PWWWMemoPhotoEligible||!p)return null;var q=192,r=100;if(this.props.isMessagesView){q=220;r=110}else if(c("MessengerEnvironment").messengerui){q=350;r=120}return c("React").createElement(c("BackgroundImage.react"),{className:"_1krf",width:q,height:r,backgroundSize:"cover",src:p})};o.prototype.renderPaidPeople=function(){var p=this.props.individualRequests.filter(this.paidReuqestFilter).map(this.getRequestProfile),q=p.length===m,r=q?m:l;return c("React").createElement(c("FacepileRounded.react"),{imageSize:16,numProfilesToDisplay:r,profiles:p,showNames:true})};o.prototype.renderStatus=function(){__p&&__p();var p=this.props.status,q=this.props.individualRequests.length>1;if(!q||p===c("P2PPaymentRequestStatus").CANCELED)return this.renderStatusText();var r=this.getStatusMap(),s=n.filter(function(p){return r[p]>0}).reduce(function(t,p,u){if(t.length>0)t.push(c("React").createElement(c("Middot.react"),{key:"middot-"+u}));t.push(this.renderStatusCount(p,r[p]));return t}.bind(this),[]);return c("React").createElement(c("P2PText.react"),{className:"_52jv _2pi8",shade:"light",type:"secondary"},s)};o.prototype.renderStatusCount=function(p,q){switch(p){case c("P2PPaymentRequestStatus").DECLINED:return i._("{count} Declined",[i.param("count",q)]);case c("P2PPaymentRequestStatus").EXPIRED:return i._("{count} Expired",[i.param("count",q)]);case c("P2PPaymentRequestStatus").INITED:return i._("{count} Pending",[i.param("count",q)]);case c("P2PPaymentRequestStatus").TRANSFER_COMPLETED:return c("React").createElement("span",{key:"status-paid"},this.renderPaidPeople(),this.renderPaidText(q));default:return null}};o.prototype.renderPaidText=function(p){var q=p===1?"":p;if(this.props.isSender)return i._("{count} Completed",[i.param("count",q)]);return i._("{count} Paid",[i.param("count",q)])};o.prototype.renderStatusText=function(){return c("React").createElement(c("P2PText.react"),{className:"_52jv",shade:"light",type:"secondary"},this.renderPaidPeople(),this.props.statusText)};o.prototype.renderViewRequest=function(p){if(p||this.props.bannerContent)return null;return c("React").createElement(c("XUIText.react"),{className:"_4o8z",display:"block",size:"large"},i._("See Details"))};o.prototype.render=function(){var p=!!this.getMemoPhotoURL(),q=this.props.isMessagesView,r=this.isPendingPush(),s=this.props.viewerIsThirdParty;return c("React").createElement("div",{className:c("joinClasses")(this.props.className,"_5qd2"+(this.props.isSender?" _5qd3":"")+(q?" _5qd4":"")+" _33x2"+(p?" _nvj":"")+(s?" _5qd6":""))},c("React").createElement(c("Link.react"),{className:"_5qd8",href:this.props.detailsURI,onClick:this.props.onClick,target:"_blank"},c("React").createElement("div",{className:"_33x3"},this.renderMemoPhoto(),this.renderBigAmount(),this.renderDescription(),this.renderStatus(),this.renderEncryptedText(r)),this.renderViewRequest(r)),this.renderBannerFooter(r))};f.exports=o}),null);
__d("P2PMercuryAttachmentServerDrivenBubble.react",["cx","Link.react","P2PBubbleActionComponent.react","P2PBubbleAmountComponent.react","P2PBubbleImageComponent.react","P2PBubbleTextComponent.react","React","URI","XP2PTransactionDetailController"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j;i=babelHelpers.inherits(k,c("React").Component);j=i&&i.prototype;k.prototype.getTransferDetailsURI=function(){var l=this.props.rootAction.receiptView;if(!l)return null;return c("XP2PTransactionDetailController").getURIBuilder().setString("id",l.id).getURI()};k.prototype.renderComponents=function(){__p&&__p();var l=[];for(var m=this.props.components.entries(),n=Array.isArray(m),o=0,m=n?m:m[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var p;if(n){if(o>=m.length)break;p=m[o++]}else{o=m.next();if(o.done)break;p=o.value}var q=p,r=q[0],s=q[1];switch(s.componentType){case"IMAGE":if(s.image&&s.image.uri)l.push(c("React").createElement(c("P2PBubbleImageComponent.react"),{key:"Component"+r+":IMAGE",aspectRatio:s.aspectRatio,image:s.image}));break;case"AMOUNT":if(s.amount)l.push(c("React").createElement(c("P2PBubbleAmountComponent.react"),{key:"Component"+r+":AMOUNT",amount:s.amount,color:s.color}));break;case"TEXT":if(s.text)l.push(c("React").createElement(c("P2PBubbleTextComponent.react"),{key:"Component"+r+":TEXT",alignment:s.alignment,color:s.color,facepileUsers:s.facepileUsers,images:s.images,size:s.size,text:s.text}));break;default:}}return l};k.prototype.renderActions=function(){__p&&__p();var l=[];for(var m=this.props.actions.entries(),n=Array.isArray(m),o=0,m=n?m:m[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var p;if(n){if(o>=m.length)break;p=m[o++]}else{o=m.next();if(o.done)break;p=o.value}var q=p,r=q[0],s=q[1];l.push(c("React").createElement(c("P2PBubbleActionComponent.react"),{key:"Action"+r+":"+s.actionIdentifier,actionDatas:s.actionDatas,actionIdentifier:s.actionIdentifier,moneyTransfer:s.moneyTransfer,actionStyle:s.style,title:s.title,receiptView:s.receiptView}))}return l};k.prototype.render=function(){return c("React").createElement("div",{className:"_20xd"},c("React").createElement(c("Link.react"),{className:"_20xg",href:this.getTransferDetailsURI(),target:"_blank"},this.renderComponents()),this.renderActions())};function k(){i.apply(this,arguments)}f.exports=k}),null);
__d("P2PPaymentRequest",["P2PPaymentRequestStatus","immutable"],(function a(b,c,d,e,f,g){"use strict";var h,i,j=Math.round(Date.now()/1e3);h=babelHelpers.inherits(k,c("immutable").Record({amount:"",amountWithSymbol:"",creationTime:j,currency:"",currentStatus:c("P2PPaymentRequestStatus").INITED,groupThreadFBID:"",id:"",individualRequests:[],memoText:"",requestee:{},requester:{},statusDescription:"",transfer:{},transferID:"",updatedTime:j}));i=h&&h.prototype;function k(){h.apply(this,arguments)}f.exports=k}),null);
__d("P2PPaymentRequestsStore",["P2PActionConstants","Arbiter","ChannelConstants","CurrentUser","EventEmitter","immutable","ImmutableObject","P2PActions","P2PAPI","P2PChannelType","P2PDispatcher","P2PPaymentRequest","P2PPaymentRequestStatus"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=c("immutable").List,k=null,l=false,m=null,n=false,o=null,p=j(),q=false,r=false;h=babelHelpers.inherits(s,c("EventEmitter"));i=h&&h.prototype;function s(){i.constructor.call(this);c("Arbiter").subscribe(c("ChannelConstants").getArbiterType(c("P2PChannelType").PAYMENT_REQUEST_STATUS_CHANGED),this.handleChannelPaymentRequestStatusChanged.bind(this));c("P2PDispatcher").register(this.onEventDispatched.bind(this))}s.prototype.onEventDispatched=function(t){__p&&__p();var u=t.data,v=t.type;switch(v){case c("P2PActionConstants").PAYMENT_REQUEST_INITIATED:q=true;o=null;this.emit("change");break;case c("P2PActionConstants").PAYMENT_REQUEST_INITIATED_COMPLETE:q=false;this.emit("change");break;case c("P2PActionConstants").PAYMENT_REQUEST_CREATED:this.handlePaymentRequestCreated(u);this.emit("change");break;case c("P2PActionConstants").PAYMENT_REQUEST_CREATED_ERROR:o=new(c("ImmutableObject"))(u.error);this.emit("change");break;case c("P2PActionConstants").PAYMENT_REQUEST_UPDATED:this.handlePaymentRequestUpdated(u);this.emit("change");break;case c("P2PActionConstants").PAYMENT_REQUEST_DECLINE_INITIATED:n=true;m=null;this.emit("change");break;case c("P2PActionConstants").PAYMENT_REQUEST_DECLINED:n=false;m=null;this.handlePaymentRequestDeclined(u);this.emit("change");break;case c("P2PActionConstants").PAYMENT_REQUEST_DECLINE_ERROR:n=false;m=new(c("ImmutableObject"))(u.error);this.emit("change");break;case c("P2PActionConstants").PAYMENT_REQUEST_CANCEL_INITIATED:l=true;k=null;this.emit("change");break;case c("P2PActionConstants").PAYMENT_REQUEST_CANCELED:l=false;k=null;this.handlePaymentRequestCanceled(u);this.emit("change");break;case c("P2PActionConstants").PAYMENT_REQUEST_CANCEL_ERROR:l=false;k=new(c("ImmutableObject"))(u.error);this.emit("change");break;case c("P2PActionConstants").DIALOG_CLOSED:m=null;this.emit("change");break;case c("P2PActionConstants").PAYMENT_REQUESTS_FETCHED:this.handlePaymentRequestsFetched(u);this.emit("change");break}};s.prototype.handlePaymentRequestCreated=function(t){var u=p.toArray();u.push(new(c("P2PPaymentRequest"))(t));u.sort(function(v,w){return v.creationTime-w.creationTime});p=j(u)};s.prototype.handlePaymentRequestUpdated=function(t){if(t.groupRequestID)this.updateIndividualRequest(t);delete t.groupRequestID;this.updateRequest(t.id,t)};s.prototype.handlePaymentRequestDeclined=function(t){this.updateRequest(t,{currentStatus:c("P2PPaymentRequestStatus").DECLINED})};s.prototype.handlePaymentRequestCanceled=function(t){this.updateRequest(t,{currentStatus:c("P2PPaymentRequestStatus").CANCELED})};s.prototype.handleChannelPaymentRequestStatusChanged=function(t,u){var v=u.obj;c("P2PActions").paymentRequestUpdated({id:v.id,currentStatus:v.current_status,groupRequestID:v.group_request_id,transfer:v.transfer})};s.prototype.handlePaymentRequestsFetched=function(t){this.$P2PPaymentRequestsStore1(t)};s.prototype.$P2PPaymentRequestsStore1=function(t){t=t.sort(function(v,w){return v.creationTime-w.creationTime});t.forEach(function(v,w){if(!this.getPaymentRequestByID(v.id))p=p.push(new(c("P2PPaymentRequest"))(v))}.bind(this));var u=p.toArray();u.sort(function(v,w){return v.creationTime-w.creationTime});p=j(u)};s.prototype.isPaymentRequestInitiated=function(){return q};s.prototype.isPaymentRequestDeclining=function(){return n};s.prototype.isPaymentRequestCanceling=function(){return l};s.prototype.getPaymentRequestByID=function(t){return p.find(function(u){return t===u.id})};s.prototype.getPaymentRequestError=function(){return o};s.prototype.getPaymentRequestDeclineError=function(){return m};s.prototype.getPaymentRequestCancelError=function(){return k};s.prototype.getPendingPaymentRequest=function(){if(!r){r=true;c("P2PAPI").getPendingPaymentRequests()}return p.filter(function(t){return t.requestee.id===c("CurrentUser").getID()&&t.currentStatus===c("P2PPaymentRequestStatus").INITED}).last()};s.prototype.updateRequest=function(t,u){p.forEach(function(v,w){if(t===v.id)p=p.set(w,v.merge(v,u))})};s.prototype.updateIndividualRequest=function(t){var u=t.id,v=t.groupRequestID,w=p.findIndex(function(C){return v===C.id}),x=p.get(w),y=x.individualRequests.findIndex(function(C){return u===C.id}),z=x.individualRequests.slice(0),A=z[y],B=babelHelpers["extends"]({},A,t);z[y]=B;x=x.set("individualRequests",z);p=p.set(w,x)};s.prototype.getPaymentRequests=function(){return p};f.exports=new s()}),null);
__d("P2PSimpleDialog.react",["fbt","FBPaymentsErrorNotice_DEPRECATED.react","P2PButton.react","P2PDialog.react","P2PDialogBody.react","P2PDialogFooter.react","P2PDialogTitle.react","P2PLoadingMask.react","React"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("React").PropTypes;i=babelHelpers.inherits(l,c("React").Component);j=i&&i.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.handleToggle=function(r){if(!r)this.props.onCancel()}.bind(this),n}l.prototype.render=function(){var m=void 0;if(this.props.error)m=c("React").createElement(c("FBPaymentsErrorNotice_DEPRECATED.react"),{error:this.props.error});return c("React").createElement(c("P2PDialog.react"),{behaviors:this.props.behaviors,layerHideOnBlur:false,onToggle:this.handleToggle,repositionOnUpdate:true,shown:true,width:this.props.width},c("React").createElement(c("P2PDialogTitle.react"),null,this.props.title),c("React").createElement(c("P2PDialogBody.react"),null,m,this.props.bodyText,c("React").createElement(c("P2PLoadingMask.react"),{visible:this.props.loading})),c("React").createElement(c("P2PDialogFooter.react"),null,c("React").createElement(c("P2PButton.react"),{disabled:this.props.loading,label:this.props.cancelButtonText,onClick:this.props.onCancel,size:"medium"}),c("React").createElement(c("P2PButton.react"),{disabled:this.props.loading,label:this.props.confirmButtonText,onClick:this.props.onConfirm,size:"medium",use:"confirm"})))};l.propTypes={bodyText:k.string.isRequired,cancelButtonText:k.string,confirmButtonText:k.string,error:k.object,loading:k.bool,onCancel:k.func.isRequired,onConfirm:k.func.isRequired,title:k.string.isRequired,width:k.number};l.defaultProps={cancelButtonText:h._("Cancel"),confirmButtonText:h._("Confirm"),width:300};f.exports=l}),null);
__d("P2PPaymentRequestCancelDialogContainer.react",["fbt","P2PActions","P2PAPI","P2PLogger","P2PPaymentLoggerEvent","P2PPaymentLoggerEventFlow","P2PPaymentRequest","P2PPaymentRequestsStore","P2PSimpleDialog.react","React","StoreAndPropBasedStateMixin"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i=c("React").PropTypes,j=c("React").createClass({displayName:"P2PPaymentRequestCancelDialogContainer",mixins:[c("StoreAndPropBasedStateMixin")(c("P2PPaymentRequestsStore"))],propTypes:{paymentRequest:i.instanceOf(c("P2PPaymentRequest")).isRequired},statics:{calculateState:function k(l){return{error:c("P2PPaymentRequestsStore").getPaymentRequestCancelError(),loading:c("P2PPaymentRequestsStore").isPaymentRequestCanceling()}}},log:function k(l,m){c("P2PLogger").log(l,{www_event_flow:c("P2PPaymentLoggerEventFlow").UI_FLOW_P2P_REQUEST,request_id:this.props.paymentRequest.id})},componentDidMount:function k(){this.log(c("P2PPaymentLoggerEvent").UI_ACTN_INITIATE_CANCEL_REQUEST)},handleCancel:function k(){c("P2PActions").hideDialog()},handleConfirm:function k(){c("P2PAPI").cancelPaymentRequest({error:function(){this.log(c("P2PPaymentLoggerEvent").UI_ACTN_CANCEL_REQUEST_FAIL)}.bind(this),paymentRequestID:this.props.paymentRequest.id,success:function(){this.log(c("P2PPaymentLoggerEvent").UI_ACTN_CANCEL_REQUEST_SUCCESS)}.bind(this)});this.log(c("P2PPaymentLoggerEvent").UI_ACTN_CONFIRM_CANCEL_REQUEST)},renderBodyText:function k(){var l=this.props.paymentRequest.requestee.name;return h._("{Name of requestee} will be notified that the request was canceled.",[h.param("Name of requestee",l)])},render:function k(){return c("React").createElement(c("P2PSimpleDialog.react"),{bodyText:this.renderBodyText(),error:this.state.error,loading:this.state.loading,cancelButtonText:h._("Back"),confirmButtonText:h._("Cancel"),onCancel:this.handleCancel,onConfirm:this.handleConfirm,title:h._("Cancel Request?")})}});f.exports=j}),null);
__d("P2PPaymentRequestDeclineDialogContainer.react",["fbt","P2PActions","P2PAPI","P2PLogger","P2PPaymentLoggerEvent","P2PPaymentLoggerEventFlow","P2PPaymentRequest","P2PPaymentRequestsStore","P2PSimpleDialog.react","React","StoreAndPropBasedStateMixin"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i=c("React").PropTypes,j=c("React").createClass({displayName:"P2PPaymentRequestDeclineDialogContainer",mixins:[c("StoreAndPropBasedStateMixin")(c("P2PPaymentRequestsStore"))],propTypes:{paymentRequest:i.instanceOf(c("P2PPaymentRequest")).isRequired},statics:{calculateState:function k(l){return{error:c("P2PPaymentRequestsStore").getPaymentRequestDeclineError(),loading:c("P2PPaymentRequestsStore").isPaymentRequestDeclining()}}},log:function k(l,m){c("P2PLogger").log(l,{www_event_flow:c("P2PPaymentLoggerEventFlow").UI_FLOW_P2P_REQUEST,request_id:this.props.paymentRequest.id})},componentDidMount:function k(){this.log(c("P2PPaymentLoggerEvent").UI_ACTN_INITIATE_DECLINE_REQUEST)},handleCancel:function k(){c("P2PActions").hideDialog()},handleConfirm:function k(){c("P2PAPI").declinePaymentRequest({error:function(){this.log(c("P2PPaymentLoggerEvent").UI_ACTN_DECLINE_REQUEST_FAIL)}.bind(this),paymentRequestID:this.props.paymentRequest.id,success:function(){this.log(c("P2PPaymentLoggerEvent").UI_ACTN_DECLINE_REQUEST_SUCCESS)}.bind(this)});this.log(c("P2PPaymentLoggerEvent").UI_ACTN_CONFIRM_DECLINE_REQUEST)},renderBodyText:function k(){var l=this.props.paymentRequest.requester.name;return h._("{Name of requester} will be notified that the request was declined.",[h.param("Name of requester",l)])},render:function k(){return c("React").createElement(c("P2PSimpleDialog.react"),{bodyText:this.renderBodyText(),error:this.state.error,loading:this.state.loading,cancelButtonText:h._("Back"),confirmButtonText:h._("Decline"),onCancel:this.handleCancel,onConfirm:this.handleConfirm,title:h._("Decline Request?")})}});f.exports=j}),null);
__d("P2PPaymentRequestActionHelper",["fbt","MercuryIDs","P2PActions","P2PPaymentRequest","P2PPaymentRequestCancelDialogContainer.react","P2PPaymentRequestStatus","P2PPaymentRequestDeclineDialogContainer.react","P2PTransferParam","P2PTransferStatus"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i=function i(k){switch(k){case c("P2PTransferStatus").CANCELED_DECLINED:return c("P2PPaymentRequestStatus").DECLINED;case c("P2PTransferStatus").CANCELED_EXPIRED:return c("P2PPaymentRequestStatus").EXPIRED;case c("P2PTransferStatus").CANCELED_RECIPIENT_RISK:case c("P2PTransferStatus").CANCELED_SAME_CARD:case c("P2PTransferStatus").CANCELED_SENDER_RISK:case c("P2PTransferStatus").CANCELED_SYSTEM_FAIL:return c("P2PPaymentRequestStatus").CANCELED;case c("P2PTransferStatus").COMPLETED:return c("P2PPaymentRequestStatus").TRANSFER_COMPLETED;case c("P2PTransferStatus").INTERMEDIATE_PROCESSING:case c("P2PTransferStatus").PENDING_PUSH_FAIL:case c("P2PTransferStatus").PENDING_SENDER_INITED:case c("P2PTransferStatus").PENDING_RECIPIENT_NUX:case c("P2PTransferStatus").PENDING_SENDER_VERIFICATION:case c("P2PTransferStatus").PENDING_SENDER_MANUAL_REVIEW:case c("P2PTransferStatus").PENDING_RECIPIENT_PROCESSING:case c("P2PTransferStatus").PENDING_RECIPIENT_VERIFICATION:case c("P2PTransferStatus").PENDING_RECIPIENT_MANUAL_REVIEW:case c("P2PTransferStatus").PENDING_SENDER_VERIFICATION_PROCESSING:case c("P2PTransferStatus").PENDING_RECIPIENT_VERIFICATION_PROCESSING:default:return c("P2PPaymentRequestStatus").TRANSFER_INITED}},j={initDeclinePaymentRequestFlow:function k(l){c("P2PActions").showDialog(c("P2PPaymentRequestDeclineDialogContainer.react"),{paymentRequest:l})},initPayForPaymentRequestFlow:function k(l,m){var n=[],o=l.groupThreadFBID,p=void 0;if(o){n.push(l.requester.id);p=c("MercuryIDs").getThreadIDFromThreadFBID(o)}else p=c("MercuryIDs").getThreadIDFromUserID(l.requester.id);c("P2PActions").chatSendViewOpened({amount:l.amount,memoText:l.memoText,paymentRequestID:l.id,threadID:p,useModal:true,referrer:m,groupSendRecipientUserIDs:n,groupThreadFBID:o})},initCancelPaymentRequestFlow:function k(l){c("P2PActions").showDialog(c("P2PPaymentRequestCancelDialogContainer.react"),{paymentRequest:l})},getPaymentRequest:function k(l){return new(c("P2PPaymentRequest"))({amount:l.amount,amountWithSymbol:l.amountWithSymbol,creationTime:l.creationTime,currency:l.currency,currentStatus:i(l[c("P2PTransferParam").STATUS]),groupThreadFBID:l.groupThreadFBID,individualRequests:[],memoText:l.memoText,requestee:l.sender,requester:l.receiver,statusDescription:l.statusDescription,trnasfer:l,transferID:l[c("P2PTransferParam").TRANSFER_ID],updatedTime:l.updatedTime})},getStatusText:function k(l){__p&&__p();var m=l.currentStatus,n=h._("Canceled"),o=h._("Paid"),p=h._("Declined"),q=h._("Pending"),r=void 0;switch(m){case c("P2PPaymentRequestStatus").DECLINED:r=p;break;case c("P2PPaymentRequestStatus").CANCELED:case c("P2PPaymentRequestStatus").TRANSFER_FAILED:r=n;break;case c("P2PPaymentRequestStatus").TRANSFER_COMPLETED:r=o;break;default:r=q;break}return r}};f.exports=j}),null);
__d("P2PMercuryAttachment.react",["cx","fbt","CurrentUser","P2PAcceptMoneyDialog.react","P2PActions","P2PButton.react","P2PCreditCardStore","P2PEncryptedText.react","P2PGKValues","P2PGroupSendReceiptDialog.react","P2PLinkConstants","P2PMercuryAttachmentBubble.react","P2PMercuryAttachmentGroupBubble.react","P2PMercuryAttachmentServerDrivenBubble.react","P2PNUXRendererUtils","P2PPaymentRequestActionHelper","P2PTransferParam","P2PTransferStatus","P2PVerificationFlowHelper","React","URI","XP2PTransactionDetailController"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k;j=babelHelpers.inherits(l,c("React").Component);k=j&&j.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=k.constructor).call.apply(m,[this].concat(p)),this.handleConfirmInfoButtonClicked=function(){c("P2PVerificationFlowHelper").startVerificationFlow(this.props.transfer[c("P2PTransferParam").TRANSFER_ID],false)}.bind(this),this.handleAddCardButtonClicked=function(){c("P2PActions").showDialog(c("P2PAcceptMoneyDialog.react"),{creditCards:this.props.creditCards,onClose:this.handleAcceptMoneyDialogClose,transfer:this.props.transfer})}.bind(this),this.handleBubbleClick=function(){if(this.viewerIsThirdParty())c("P2PActions").showDialog(c("P2PGroupSendReceiptDialog.react"),{amount:this.props.transfer.amount,onClose:this.handleGroupSendReceiptClosed,receiver:this.props.transfer.receiver,sender:this.props.transfer.sender})}.bind(this),n}l.prototype.viewerIsSender=function(){return c("CurrentUser").getID()===this.props.transfer.sender.id};l.prototype.viewerIsReceiver=function(){return c("CurrentUser").getID()===this.props.transfer.receiver.id};l.prototype.viewerIsThirdParty=function(){return!this.viewerIsSender()&&!this.viewerIsReceiver()};l.prototype.getStatus=function(){var m=i._("Paid"),n=i._("Pending"),o=i._("Completed"),p=i._("Canceled"),q=i._("Sent"),r=this.viewerIsSender(),s=this.viewerIsThirdParty();switch(this.props.transfer[c("P2PTransferParam").STATUS]){case c("P2PTransferStatus").PENDING_RECIPIENT_PROCESSING:case c("P2PTransferStatus").INTERMEDIATE_PROCESSING:case c("P2PTransferStatus").PENDING_RECIPIENT_NUX:case c("P2PTransferStatus").PENDING_RECIPIENT_VERIFICATION:case c("P2PTransferStatus").PENDING_RECIPIENT_MANUAL_REVIEW:case c("P2PTransferStatus").PENDING_RECIPIENT_VERIFICATION_PROCESSING:case c("P2PTransferStatus").PENDING_PUSH_FAIL:case c("P2PTransferStatus").PENDING_SENDER_INITED:return r||s?q:n;case c("P2PTransferStatus").PENDING_SENDER_MANUAL_REVIEW:case c("P2PTransferStatus").PENDING_SENDER_VERIFICATION:case c("P2PTransferStatus").PENDING_SENDER_VERIFICATION_PROCESSING:return n;case c("P2PTransferStatus").CANCELED_SENDER_RISK:case c("P2PTransferStatus").CANCELED_DECLINED:case c("P2PTransferStatus").CANCELED_RECIPIENT_RISK:case c("P2PTransferStatus").CANCELED_SYSTEM_FAIL:case c("P2PTransferStatus").CANCELED_EXPIRED:case c("P2PTransferStatus").CANCELED_SAME_CARD:return p;case c("P2PTransferStatus").COMPLETED:return r||s?m:o;default:return n}};l.prototype.isGrayStatus=function(){switch(this.props.transfer[c("P2PTransferParam").STATUS]){case c("P2PTransferStatus").INTERMEDIATE_PROCESSING:case c("P2PTransferStatus").PENDING_RECIPIENT_VERIFICATION:case c("P2PTransferStatus").PENDING_RECIPIENT_VERIFICATION_PROCESSING:case c("P2PTransferStatus").PENDING_RECIPIENT_MANUAL_REVIEW:case c("P2PTransferStatus").PENDING_RECIPIENT_NUX:case c("P2PTransferStatus").PENDING_RECIPIENT_PROCESSING:case c("P2PTransferStatus").PENDING_PUSH_FAIL:return this.viewerIsReceiver();case c("P2PTransferStatus").PENDING_SENDER_MANUAL_REVIEW:case c("P2PTransferStatus").PENDING_SENDER_VERIFICATION:case c("P2PTransferStatus").PENDING_SENDER_VERIFICATION_PROCESSING:case c("P2PTransferStatus").CANCELED_SENDER_RISK:case c("P2PTransferStatus").CANCELED_DECLINED:case c("P2PTransferStatus").CANCELED_RECIPIENT_RISK:case c("P2PTransferStatus").CANCELED_SYSTEM_FAIL:case c("P2PTransferStatus").CANCELED_EXPIRED:case c("P2PTransferStatus").CANCELED_SAME_CARD:return true;case c("P2PTransferStatus").COMPLETED:case c("P2PTransferStatus").PENDING_SENDER_INITED:return false;default:return false}};l.prototype.shouldRenderBannerFooter=function(){if(c("P2PNUXRendererUtils").doesNUXNeedCreditCards(this.props.transfer)&&!c("P2PCreditCardStore").isCreditCardsFetchComplete()||this.viewerIsThirdParty())return false;return c("P2PNUXRendererUtils").isRecipientActionableStatus(this.props.transfer)};l.prototype.handleAcceptMoneyDialogClose=function(){c("P2PActions").hideDialog()};l.prototype.renderInlineBanner=function(){var m=this.props.transfer[c("P2PTransferParam").STATUS];switch(m){case c("P2PTransferStatus").PENDING_RECIPIENT_NUX:return this.renderPendingRecipientNUX();case c("P2PTransferStatus").PENDING_RECIPIENT_VERIFICATION:return this.renderPendingRecipientVerification();case c("P2PTransferStatus").PENDING_PUSH_FAIL:return this.renderPendingPushFail();default:return null}};l.prototype.renderPendingRecipientNUX=function(){var m=this.props.transfer;return c("React").createElement("div",null,c("React").createElement("div",{className:"_3asc"},i._("{sender_name} Sent You Money!",[i.param("sender_name",m.sender.name)])),c("React").createElement("div",{className:"_3asd"},i._("It's free to accept it. Just add a debit card."),c("React").createElement("div",{className:"_2pic"},c("React").createElement(c("P2PEncryptedText.react"),{showPasswordProtected:true}))),c("React").createElement("div",{className:"_5abs"},c("React").createElement(c("P2PButton.react"),{use:"confirm",size:"medium",label:i._("Add Debit Card"),type:"primary",onClick:this.handleAddCardButtonClicked})))};l.prototype.renderPendingRecipientVerification=function(){return c("React").createElement("div",null,c("React").createElement("div",{className:"_3asc"},i._("Please Confirm Your Info")),c("React").createElement("div",{className:"_3asd"},i._("To accept the money {sender_name} sent you, please confirm your information.",[i.param("sender_name",this.props.transfer.sender.name)])),c("React").createElement("div",{className:"_5abs"},c("React").createElement(c("P2PButton.react"),{use:"confirm",size:"medium",label:i._("Confirm Info"),type:"primary",onClick:this.handleConfirmInfoButtonClicked})))};l.prototype.renderPendingPushFail=function(){var m=this.props.transfer;return c("React").createElement("div",null,c("React").createElement("div",{className:"_3asc"},i._("Update Your Card")),c("React").createElement("div",{className:"_3asd"},i._("{currency}{amount} from {sender_name} couldn't be deposited using your debit card.",[i.param("currency",m.currency),i.param("amount",m.amount),i.param("sender_name",m.sender.name)])),c("React").createElement("div",{className:"_5abs"},c("React").createElement(c("P2PButton.react"),{use:"confirm",size:"medium",label:i._("Learn More"),type:"primary",href:new(c("URI"))(c("P2PLinkConstants").helpTransferPushFailURI),target:"_blank"})))};l.prototype.getTransferStatusDate=function(){var m=void 0,n=this.props.transfer[c("P2PTransferParam").STATUS];switch(n){case c("P2PTransferStatus").COMPLETED:m=this.props.transfer.completedTime;break;case c("P2PTransferStatus").CANCELED_SENDER_RISK:case c("P2PTransferStatus").CANCELED_DECLINED:case c("P2PTransferStatus").CANCELED_RECIPIENT_RISK:case c("P2PTransferStatus").CANCELED_SYSTEM_FAIL:case c("P2PTransferStatus").CANCELED_EXPIRED:case c("P2PTransferStatus").CANCELED_SAME_CARD:m=this.props.transfer.updatedTime;break}if(!m)m=this.props.transfer.creationTime;return m};l.prototype.getTransferDetailsURI=function(){if(this.viewerIsThirdParty())return null;return c("XP2PTransactionDetailController").getURIBuilder().setString("id",this.props.transfer[c("P2PTransferParam").TRANSFER_ID]).getURI()};l.prototype.handleGroupSendReceiptClosed=function(){c("P2PActions").hideDialog()};l.prototype.render=function(){__p&&__p();var m=this.shouldRenderBannerFooter(),n=m?this.renderInlineBanner():null,o=this.props.transfer,p=o.memoText,q=o.memoPhotoURLs,r=m?o:null,s=!!(p&&n);if(c("P2PGKValues").P2PServerDrivenBubbleWWW&&o.bubbleView){var t=o.bubbleView;return c("React").createElement(c("P2PMercuryAttachmentServerDrivenBubble.react"),{actions:t.actions,components:t.components,robotext:t.robotext,rootAction:t.rootAction})}else if(c("P2PGKValues").P2PV2Bubble){var u=c("P2PPaymentRequestActionHelper").getPaymentRequest(o);return c("React").createElement(c("P2PMercuryAttachmentGroupBubble.react"),{amount:o.amount,currencyCode:o.currency,className:this.props.className,date:this.getTransferStatusDate(),detailsURI:this.getTransferDetailsURI(),bannerContent:n,forceMemoTextShown:s,individualRequests:[u],isGroupThread:!!o.groupThreadFBID,isMessagesView:this.props.theme==="messages",isPending:this.isGrayStatus(),isSender:this.viewerIsSender(),memoText:p,memoPhotoURLs:q,pendingTransfer:r,status:u.currentStatus,statusDescription:o.statusDescription,statusText:this.getStatus(),onClick:this.handleBubbleClick})}return c("React").createElement("div",{className:this.props.className},c("React").createElement(c("P2PMercuryAttachmentBubble.react"),{amount:o.amount,currencyCode:o.currency,className:this.props.className,date:this.getTransferStatusDate(),detailsURI:this.getTransferDetailsURI(),bannerContent:n,forceMemoTextShown:s,isGroupThread:!!o.groupThreadFBID,isMessagesView:this.props.theme==="messages",isPending:this.isGrayStatus(),isSender:this.viewerIsSender(),memoText:p,memoPhotoURLs:q,onClick:this.handleBubbleClick,receiverName:o.receiver.full_name,statusText:this.getStatus()}))};f.exports=l}),null);
__d("P2PMercuryShareAttachmentContainer.react",["cx","MercuryShareAttachmentReactShape","MercuryShareAttachmentRenderLocations","P2PActions","P2PCreditCardStore","P2PMercuryAttachment.react","P2PNUXRendererUtils","P2PTransferStore","React","StoreAndPropBasedStateMixin"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i=c("React").PropTypes,j=c("React").createClass({displayName:"P2PMercuryShareAttachmentContainer",propTypes:{attachment:c("MercuryShareAttachmentReactShape"),location:i.oneOf(c("MercuryShareAttachmentRenderLocations").getValues())},mixins:[c("StoreAndPropBasedStateMixin")(c("P2PTransferStore"),c("P2PCreditCardStore"))],statics:{calculateState:function k(l){var m=[],n=l.attachment.target,o=n&&c("P2PTransferStore").getTransferByID(n.transfer_id);if(o&&c("P2PNUXRendererUtils").doesNUXNeedCreditCards(o))m=c("P2PCreditCardStore").getAll();return{creditCardAsyncRequestState:c("P2PCreditCardStore").getAsyncRequestState(),creditCards:m,transfer:o}}},componentWillMount:function k(){var l=this.props.attachment.target;if(l&&!c("P2PTransferStore").getTransferByID(l.transfer_id))c("P2PActions").transferAdded(l)},render:function k(){var l=this.state.transfer;if(!l)return c("React").createElement("span",null);var m={creditCards:this.state.creditCards,creditCardAsyncRequestState:this.state.creditCardAsyncRequestState,transfer:l};if(this.props.location===c("MercuryShareAttachmentRenderLocations").MESSENGER)m.theme="messenger";return c("React").createElement(c("P2PMercuryAttachment.react"),babelHelpers["extends"]({},m,{className:"_3fyk _60m8"}))}});f.exports=j}),null);
__d("P2PPaymentRequestMercuryShareAttachment.react",["cx","fbt","CurrentUser","P2PButton.react","P2PGKValues","P2PPaymentRequestActionHelper","P2PMercuryAttachmentBubble.react","P2PMercuryAttachmentGroupBubble.react","P2PPaymentRequestStatus","P2PText.react","React","XP2PPaymentRequestReceiptController","idx"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k;j=babelHelpers.inherits(l,c("React").Component);k=j&&j.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=k.constructor).call.apply(m,[this].concat(p)),this.handleDeclineClick=function(){c("P2PPaymentRequestActionHelper").initDeclinePaymentRequestFlow(this.props.paymentRequest)}.bind(this),this.handlePayClick=function(){c("P2PPaymentRequestActionHelper").initPayForPaymentRequestFlow(this.props.paymentRequest,"bubble")}.bind(this),this.handleClick=function(){if(this.isThirdParty()||this.isGroupPaymentRequest())this.props.viewReceipt()}.bind(this),n}l.prototype.isSender=function(){var m,n=(m=this.props)!=null?(m=m.paymentRequest)!=null?(m=m.requester)!=null?m.id:m:m:m;return c("CurrentUser").getID()===n};l.prototype.isReceiver=function(){var m,n=c("CurrentUser").getID(),o=this.props.paymentRequest,p=(m=o)!=null?(m=m.requestee)!=null?m.id:m:m;if(n===p)return true;var q=o.individualRequests.find(function(r){var s;return n===((s=r)!=null?(s=s.requestee)!=null?s.id:s:s)});return!!q};l.prototype.isThirdParty=function(){return!this.isSender()&&!this.isReceiver()};l.prototype.renderBannerContent=function(){var m=this.props.paymentRequest.currentStatus,n=this.isReceiver();if(!n||m!==c("P2PPaymentRequestStatus").INITED)return null;return c("React").createElement("div",{className:"_2v-"},c("React").createElement("div",{className:"_2v_"},c("React").createElement(c("P2PButton.react"),{className:"_2w2",label:i._("Decline"),onClick:this.handleDeclineClick,size:"medium",type:"primary"})),c("React").createElement("div",{className:"_2v_"},c("React").createElement(c("P2PButton.react"),{className:"_2w2",label:i._("Pay"),onClick:this.handlePayClick,size:"medium",type:"primary",use:"confirm"})))};l.prototype.renderStatusText=function(){var m=this.props.paymentRequest;if(this.isReceiver()&&m.currentStatus===c("P2PPaymentRequestStatus").INITED)return null;return c("P2PPaymentRequestActionHelper").getStatusText(m)};l.prototype.renderTopContent=function(){if(this.isSender())return c("React").createElement(c("P2PText.react"),{type:"primary",weight:"bold"},i._("You requested"));return c("React").createElement(c("P2PText.react"),{type:"primary",weight:"bold"},i._("{Name of user} requested",[i.param("Name of user",this.props.paymentRequest.requester.name)]))};l.prototype.getDetailsURI=function(){if(this.isThirdParty()||this.isGroupPaymentRequest())return null;return c("XP2PPaymentRequestReceiptController").getURIBuilder().setString("id",this.props.paymentRequest.id).getURI()};l.prototype.getDate=function(){var m=this.props.paymentRequest,n=m.currentStatus,o=void 0;switch(n){case c("P2PPaymentRequestStatus").DECLINED:case c("P2PPaymentRequestStatus").CANCELED:case c("P2PPaymentRequestStatus").TRANSFER_FAILED:case c("P2PPaymentRequestStatus").TRANSFER_INITED:case c("P2PPaymentRequestStatus").TRANSFER_COMPLETED:o=m.updatedTime;break;default:o=m.creationTime;break}return o};l.prototype.getIndividualRequests=function(){var m=this.props.paymentRequest,n=m.individualRequests;if(n.length>1)return n;return[m]};l.prototype.isGroupPaymentRequest=function(){var m=this.props.paymentRequest.individualRequests||[];return!!m.length};l.prototype.render=function(){__p&&__p();var m=this.props,n=m.paymentRequest,o=this.isGroupPaymentRequest();if(o||c("P2PGKValues").P2PV2Bubble){var p=this.getIndividualRequests(),q=true;for(var r=p,s=Array.isArray(r),t=0,r=s?r:r[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var u;if(s){if(t>=r.length)break;u=r[t++]}else{t=r.next();if(t.done)break;u=t.value}var v=u;if(v.currentStatus===c("P2PPaymentRequestStatus").TRANSFER_COMPLETED){q=false;break}}return c("React").createElement(c("P2PMercuryAttachmentGroupBubble.react"),{amount:n.amount,currencyCode:n.currency,date:this.getDate(),detailsURI:this.getDetailsURI(),bannerContent:this.renderBannerContent(),forceMemoTextShown:true,individualRequests:p,isGroupThread:!!n.groupThreadFBID,isMessagesView:false,isPending:q,isSender:this.isSender(),memoText:n.memoText,pendingTransfer:this.props.pendingTransfer,status:n.currentStatus,statusDescription:n.statusDescription,statusText:this.renderStatusText(),onClick:this.handleClick})}return c("React").createElement(c("P2PMercuryAttachmentBubble.react"),{amount:n.amount,currencyCode:n.currency,date:this.getDate(),detailsURI:this.getDetailsURI(),bannerContent:this.renderBannerContent(),forceMemoTextShown:true,isGroupThread:!!n.groupThreadFBID,isMessagesView:false,isPaymentRequest:true,isPending:true,isSender:this.isSender(),memoText:n.memoText,onClick:this.handleClick,receiverName:n.requestee.full_name,statusText:this.renderStatusText(),topContent:this.renderTopContent()})};f.exports=l}),null);
__d("P2PPaymentRequestMercuryShareAttachmentContainer.react",["cx","MercuryFallbackShareAttachment.react","MercuryShareAttachmentReactShape","MercuryShareAttachmentRenderLocations","P2PActions","P2PGroupPaymentRequestReceiptDialog.react","P2PPaymentRequestMercuryShareAttachment.react","P2PPaymentRequestsStore","P2PTransferStatus","P2PTransferStore","React","StoreAndPropBasedStateMixin","idx"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i=c("React").PropTypes,j=c("React").createClass({displayName:"P2PPaymentRequestMercuryShareAttachmentContainer",propTypes:{attachment:c("MercuryShareAttachmentReactShape"),location:i.oneOf(c("MercuryShareAttachmentRenderLocations").getValues())},mixins:[c("StoreAndPropBasedStateMixin")(c("P2PPaymentRequestsStore"),c("P2PTransferStore"))],statics:{calculateState:function k(l){var m,n=(m=l)!=null?(m=m.attachment)!=null?(m=m.target)!=null?m.id:m:m:m;if(!n)return{};var o=c("P2PPaymentRequestsStore").getPaymentRequestByID(n);return{paymentRequest:o,pendingTransfer:j.getPendingTransfer(o)}},getPendingTransfer:function k(l){__p&&__p();if(!l)return null;var m=l.individualRequests||[];return m.map(function(n){var o=n.transfer;if(!o)return null;var p=o.transfer_id,q=c("P2PTransferStore").getTransferByID(p);if(!q){c("P2PActions").transferAdded(o);return o}return q}).find(function(n){var o=n&&n.status||0;return o===c("P2PTransferStatus").PENDING_PUSH_FAIL||o===c("P2PTransferStatus").PENDING_RECIPIENT_NUX})}},componentWillMount:function k(){var l=this.props.attachment.target||{};if(!c("P2PPaymentRequestsStore").getPaymentRequestByID(l.id))c("P2PActions").paymentRequestCreated(l);var m=l.individualRequests||[];m.forEach(function(n){var o=n.transfer;if(o&&!c("P2PTransferStore").getTransferByID(o.transfer_id))c("P2PActions").transferAdded(o)})},shouldComponentUpdate:function k(l,m){if(this.props.location!==l.location)return true;if(this.state.paymentRequest!==m.paymentRequest)return true;return!!this.state.pendingTransfer===!!m.pendingTransfer},viewReceipt:function k(){var l=this.state.paymentRequest;c("P2PActions").showDialog(c("P2PGroupPaymentRequestReceiptDialog.react"),{amount:l.amount,individualRequests:l.individualRequests,requestee:l.requestee,requester:l.requester})},render:function k(){var l=this.state.paymentRequest;if(!l)return c("React").createElement(c("MercuryFallbackShareAttachment.react"),{attachment:this.props.attachment,location:this.props.location});var m=l.individualRequests&&l.individualRequests.length>1;return c("React").createElement("div",{className:!m?"_3fyk":""},c("React").createElement(c("P2PPaymentRequestMercuryShareAttachment.react"),{location:this.props.location,viewReceipt:this.viewReceipt,paymentRequest:l,pendingTransfer:this.state.pendingTransfer}))}});f.exports=j}),null);