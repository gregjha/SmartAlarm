if (self.CavalryLogger) { CavalryLogger.start_js(["x5g8\/"]); }

__d("MercurySyncDataFetcherImpl",["errorCode","Promise","AsyncResponse","Bootloader","FBIDCheck","MercuryPayloadSource","MessagingConfig","setTimeoutAcrossTransitions"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i=c("MessagingConfig").syncFetchRequestTimeoutMs;function j(p,q){return new(c("Promise"))(function(r,s){k(p,q,r,s,0)})}function k(p,q,r,s,t){__p&&__p();if(t>c("MessagingConfig").syncFetchRetries){s();return}var u=t===0?0:c("MessagingConfig").syncFetchInitialTimeoutMs*Math.pow(c("MessagingConfig").syncFetchTimeoutMultiplier,t);c("setTimeoutAcrossTransitions")(function(){__p&&__p();var v=false,w=function w(x){__p&&__p();var y;if(v)return;if(x.errors&&x.errors.length>0)(function(){var z=x.errors[0].message;if(z)c("Bootloader").loadModules(["MessengerWebGraphQLTypedLogger","MessengerWebGraphQLEvent"],function(A,B){new A().setErrorMessage(z).setEvent(B.DFF_FAILURE).log()},"MercurySyncDataFetcherImpl")})();v=true;k(p,q,r,s,t+1)};c("Bootloader").loadModules(["messengerGraphQLThreadlistFetcherRe"],function(x){return x.fetchAll(p,[q],!c("FBIDCheck").isUser_deprecated(p)).then(function(y){v=true;r(new(c("AsyncResponse"))(null,babelHelpers["extends"]({},y,{payload_source:c("MercuryPayloadSource").SERVER_INVALIDATE_GLOBAL_STATE})))},w)},"MercurySyncDataFetcherImpl")},u)}function l(p,q,r){return new(c("Promise"))(function(s,t){m(p,q,r,s,t,0)})}function m(p,q,r,s,t,u){__p&&__p();if(u>c("MessagingConfig").syncFetchRetries){t();return}var v=u===0?0:c("MessagingConfig").syncFetchInitialTimeoutMs*Math.pow(c("MessagingConfig").syncFetchTimeoutMultiplier,u);c("setTimeoutAcrossTransitions")(function(){var w=false,x=function x(y){if(w)return;w=true;m(p,q,r,s,t,u+1)};c("Bootloader").loadModules(["messengerThreadDFFFetcherRe"],function(y){return y.fetch(p,{id:q,limit:r},!c("FBIDCheck").isUser_deprecated(p)).then(function(z){w=true;s(new(c("AsyncResponse"))(null,babelHelpers["extends"]({},z,{payload_source:c("MercuryPayloadSource").SERVER_INVALIDATE_THREAD_STATE})))},x)},"MercurySyncDataFetcherImpl")},v)}function n(p,q,r){return new(c("Promise"))(function(s,t){o(p,q,r,s,t,0)})}function o(p,q,r,s,t,u){__p&&__p();if(u>c("MessagingConfig").syncFetchRetries){t();return}var v=u===0?0:c("MessagingConfig").syncFetchInitialTimeoutMs*Math.pow(c("MessagingConfig").syncFetchTimeoutMultiplier,u);c("setTimeoutAcrossTransitions")(function(){var w=false,x=function x(y){if(w)return;w=true;o(p,q,r,s,t,u+1)};c("Bootloader").loadModules(["messengerMessageDFFFetcherRe"],function(y){return y.fetch(p,{thread_id:q,message_id:r},!c("FBIDCheck").isUser_deprecated(p)).then(function(z){w=true;s(new(c("AsyncResponse"))(null,babelHelpers["extends"]({},z)))},x)},"MercurySyncDataFetcherImpl")},v)}f.exports={fetchThreadlistFromGraphQL:j,fetchThreadFromGraphQL:l,fetchMessageFromGraphQL:n}}),null);