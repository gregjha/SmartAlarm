if (self.CavalryLogger) { CavalryLogger.start_js(["J5mnh"]); }

__d("convertFromDraftStateToRaw",["invariant","ContentBlock","ContentBlockNode","DraftStringKey","encodeEntityRanges","encodeInlineStyleRanges"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i=function i(o,p){return{key:o.getKey(),text:o.getText(),type:o.getType(),depth:o.getDepth(),inlineStyleRanges:c("encodeInlineStyleRanges")(o),entityRanges:c("encodeEntityRanges")(o,p),data:o.getData().toObject()}},j=function j(o,p,q,r){__p&&__p();if(o instanceof c("ContentBlock")){q.push(i(o,p));return}o instanceof c("ContentBlockNode")||h(0);var s=o.getParentKey(),t=r[o.getKey()]=babelHelpers["extends"]({},i(o,p),{children:[]});if(s){r[s].children.push(t);return}q.push(t)},k=function k(o,p,q,r){var s=c("DraftStringKey").stringify(p);if(r[s])return;r[s]=p;q[s]=""+o},l=function l(o,p){var q=p.entityMap,r=[],s={},t={},u=0;o.getBlockMap().forEach(function(v){v.findEntityRanges(function(w){return w.getEntity()!==null},function(w){return k(u++,v.getEntityAt(w),q,t)});j(v,q,r,s)});return{blocks:r,entityMap:q}},m=function m(o,p){var q=p.blocks,r=p.entityMap,s={};Object.keys(r).forEach(function(t,u){var v=o.getEntity(c("DraftStringKey").unstringify(t));s[u]={type:v.getType(),mutability:v.getMutability(),data:v.getData()}});return{blocks:q,entityMap:s}},n=function n(o){var p={entityMap:{},blocks:[]};p=l(o,p);p=m(o,p);return p};f.exports=n}),null);