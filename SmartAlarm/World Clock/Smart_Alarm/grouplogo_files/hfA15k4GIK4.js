if (self.CavalryLogger) { CavalryLogger.start_js(["LITx3"]); }

__d("MessengerContextBannerContainer.react",["DOMDimensions","immutable","MercuryIDs","MercuryParticipants","MercuryThreads","MessengerContextBanner.react","MessengerContextInformationStore","PagesMessagingMercuryChatTabStore","PagesMessengerContextBanner.react","ReactComponentWithPureRenderMixin","React","ReactDOM","MercuryShareAttachmentRenderLocations","StoreAndPropBasedStateMixin"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("React").PropTypes,i=c("React").createClass({displayName:"MessengerContextBannerContainer",mixins:[c("ReactComponentWithPureRenderMixin"),c("StoreAndPropBasedStateMixin")(c("MercuryParticipants"),c("MercuryThreads"),c("MessengerContextInformationStore"),c("PagesMessagingMercuryChatTabStore"))],propTypes:{location:h.string.isRequired,onResize:h.func,otherUserFBIDs:h.arrayOf(h.string),threadID:h.string,viewer:h.string.isRequired},statics:{calculateState:function j(k){__p&&__p();var l=null,m=null;if(k.threadID){l=c("MercuryThreads").getForFBID(k.viewer).getOrFetch(k.threadID);m=l&&l.participants}else if(k.otherUserFBIDs&&k.otherUserFBIDs.length===1)m=k.otherUserFBIDs.map(function(s){return c("MercuryParticipants").getIDFromVanityOrFBID(s)});var n=c("immutable").Map();if(m)n=n.withMutations(function(s){m&&m.forEach(function(t){s.set(t,c("MercuryParticipants").getOrFetch(t))})});var o=null,p=null;if(l){o=n.get(c("MercuryIDs").getParticipantIDFromFromThreadID(l.thread_id));p=l.associated_object}else o=m&&n.get(m[0]);var q=c("PagesMessagingMercuryChatTabStore").getStateByThread(k.threadID),r=q.coverPhotoData;return babelHelpers["extends"]({associatedObject:p,contact:o,coverPhotoData:r,participantIDs:m,participants:n,thread:l},i.getContextInformation(o&&o.fbid&&o.fbid.toString()))},getContextInformation:function j(k){var l=void 0;if(k)l=c("MessengerContextInformationStore").getOrFetch(k.toString());return l||{connectionContext:"",contextItems:[]}}},componentDidUpdate:function j(){var k=c("ReactDOM").findDOMNode(this);if(!k)return;var l=c("DOMDimensions").getElementDimensions(k).height;if(this.props.onResize)this.props.onResize(l)},render:function j(){__p&&__p();if(!this.state.contact){if(this.state.associatedObject&&this.props.location==c("MercuryShareAttachmentRenderLocations").MESSENGER)return c("React").createElement(c("MessengerContextBanner.react"),{associatedObject:this.state.associatedObject,contextItems:this.state.contextItems,location:this.props.location,participantIDs:this.state.participantIDs,participants:this.state.participants,style:this.props.style,thread:this.state.thread,viewer:this.props.viewer});return null}if(this.state.contact.type==="page"){if(!this.state.connectionContext&&!this.state.contextItems.length)return null;if(this.props.location===c("MercuryShareAttachmentRenderLocations").CHAT)return c("React").createElement(c("PagesMessengerContextBanner.react"),{coverPhotoData:this.state.coverPhotoData,style:this.props.style,thread:this.state.thread,viewer:this.props.viewer})}return c("React").createElement(c("MessengerContextBanner.react"),{contactName:this.state.contact.name,connectionContext:this.state.connectionContext,contextItems:this.state.contextItems,isVerified:this.state.contact.is_verified,location:this.props.location,participantIDs:this.state.participantIDs,participants:this.state.participants,style:this.props.style,thread:this.state.thread,viewer:this.props.viewer})}});f.exports=i}),null);