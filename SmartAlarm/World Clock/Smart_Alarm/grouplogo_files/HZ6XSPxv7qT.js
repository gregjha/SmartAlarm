if (self.CavalryLogger) { CavalryLogger.start_js(["f\/B+g"]); }

__d("formatNumber",["fbt","intlNumUtils"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();function i(n,o){return c("intlNumUtils").formatNumber(n,o)}function j(n,o){var p=h._({"*":"{number}+"},[h.param("number",c("intlNumUtils").formatNumberWithThousandDelimiters(n,o),[0,n])]);return p.toString()}function k(n,o){var p=h._({"*":"\u003C{number}"},[h.param("number",c("intlNumUtils").formatNumberWithThousandDelimiters(n,o),[0,n])]);return p.toString()}function l(n,o,p){return n>o?j(o,p):c("intlNumUtils").formatNumberWithThousandDelimiters(n,p)}function m(n,o,p){return n<o?k(o,p):c("intlNumUtils").formatNumberWithThousandDelimiters(n,p)}i.withThousandDelimiters=c("intlNumUtils").formatNumberWithThousandDelimiters;i.withMaxLimit=l;i.withMinLimit=m;f.exports=i}),null);
__d("AbstractBadge.react",["cx","invariant","React","formatNumber","joinClasses"],(function a(b,c,d,e,f,g,h,i){__p&&__p();var j,k,l=c("React").PropTypes;function m(o){return parseInt(o,10)===o}j=babelHelpers.inherits(n,c("React").PureComponent);k=j&&j.prototype;function n(o){"use strict";k.constructor.call(this,o)}n.prototype.render=function(){"use strict";var o=this.props,p=o.count,q=o.maxcount,r=o.label,s=babelHelpers.objectWithoutProperties(o,["count","maxcount","label"]);m(p)||i(0);m(q)||i(0);var t="_51lp"+(p>q?" _51lr":"")+(!this.props.allowZero&&p===0?" hidden_elem":""),u=r?c("React").createElement("span",{className:"accessible_elem","aria-hidden":p?"false":"true"},"\xa0",r):null,v=c("formatNumber").withMaxLimit(p,q);if(u!==null)v=c("React").createElement("span",{"aria-hidden":"true"},v);return c("React").createElement("span",babelHelpers["extends"]({},s,{className:c("joinClasses")(this.props.className,t)}),v,u)};n.propTypes={className:l.string,count:l.number.isRequired,maxcount:l.number,label:l.string};n.defaultProps={maxcount:20};f.exports=n}),null);
__d("XUIBadge.react",["cx","React","AbstractBadge.react","joinClasses"],(function a(b,c,d,e,f,g,h){__p&&__p();var i,j,k=c("React").PropTypes;i=babelHelpers.inherits(l,c("React").Component);j=i&&i.prototype;l.prototype.render=function(){"use strict";var m=this.props.type,n="_5ugh"+(m==="regular"?" _5ugf":"")+(m==="special"?" _5ugg":"");return c("React").createElement(c("AbstractBadge.react"),babelHelpers["extends"]({},this.props,{className:c("joinClasses")(this.props.className,n),type:null}))};function l(){"use strict";i.apply(this,arguments)}l.propTypes={type:k.oneOf(["regular","special"]),allowZero:k.bool};l.defaultProps={type:"regular"};f.exports=l}),null);
__d("StickersTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(){this.clear()}h.prototype.log=function(){c("GeneratedLoggerUtils").log("logger:StickersLoggerConfig",this.$StickersTypedLogger1,c("Banzai").BASIC)};h.prototype.logVital=function(){c("GeneratedLoggerUtils").log("logger:StickersLoggerConfig",this.$StickersTypedLogger1,c("Banzai").VITAL)};h.prototype.clear=function(){this.$StickersTypedLogger1={};return this};h.prototype.updateData=function(j){this.$StickersTypedLogger1=babelHelpers["extends"]({},this.$StickersTypedLogger1,j);return this};h.prototype.setEvent=function(j){this.$StickersTypedLogger1.event=j;return this};h.prototype.setNumsearchresults=function(j){this.$StickersTypedLogger1.numsearchresults=j;return this};h.prototype.setPackid=function(j){this.$StickersTypedLogger1.packid=j;return this};h.prototype.setPackids=function(j){this.$StickersTypedLogger1.packids=c("GeneratedLoggerUtils").serializeVector(j);return this};h.prototype.setSearchtoken=function(j){this.$StickersTypedLogger1.searchtoken=j;return this};h.prototype.setStickerid=function(j){this.$StickersTypedLogger1.stickerid=j;return this};h.prototype.setTagid=function(j){this.$StickersTypedLogger1.tagid=j;return this};h.prototype.setTriggeredword=function(j){this.$StickersTypedLogger1.triggeredword=j;return this};h.prototype.setTriggerused=function(j){this.$StickersTypedLogger1.triggerused=j;return this};var i={event:true,numsearchresults:true,packid:true,packids:true,searchtoken:true,stickerid:true,tagid:true,triggeredword:true,triggerused:true};f.exports=h}),null);
__d("MessengerHotLikeSVG.react",["cssVar","cx","fbt","CurrentUser","MessengerEnvironment","React","joinClasses","uniqueID"],(function a(b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k,l,m=c("React").PropTypes,n="transparent",o=j._("Thumbs Up Sign");k=babelHelpers.inherits(p,c("React").Component);l=k&&k.prototype;function p(){var q,r;for(var s=arguments.length,t=Array(s),u=0;u<s;u++)t[u]=arguments[u];return r=(q=l.constructor).call.apply(q,[this].concat(t)),this.state={titleId:c("uniqueID")()},r}p.prototype.render=function(){var q=c("CurrentUser").isWorkUser()?"#1479fb":"#0084ff",r=this.props.color||(c("MessengerEnvironment").messengerui?q:"#4080ff");return c("React").createElement("div",{className:c("joinClasses")(this.props.className,"_1i1j")},c("React").createElement("svg",{"aria-labelledby":this.state.titleId,height:"100%",role:"img",version:"1.1",viewBox:"0 0 256 256",width:"100%",x:"0px",y:"0px"},c("React").createElement("title",{id:this.state.titleId},o),c("React").createElement("g",null,c("React").createElement("g",null,c("React").createElement("polyline",{fill:n,points:"256,0 258,256 2,258 "}),c("React").createElement("path",{d:"M254,147.1c0-12.7-4.4-16.4-9-20.1c2.6-4.2,5.1-10.2,5.1-18c0-15.8-12.3-25.7-32-25.7h-52c-0.5,0-1-0.5-0.9-1 c1.4-8.6,3-24,3-31.7c0-16.7-4-37.5-19.3-45.7c-4.5-2.4-8.3-3.7-14.1-3.7c-8.8,0-14.6,3.6-16.7,5.9c-1.3,1.4-1.9,3.3-1.8,5.2 l1.3,34.6c0.2,2.8-0.3,5.4-1.6,7.7l-24,47.8c-1.7,3.5-4.2,6.6-7.6,8.5c-3.5,2-6.5,5.9-6.5,9.5v94.8C78,230,94,238,112.3,238h86.1 c13.5,0,22.4-4.5,27.2-13.5c4.4-8.2,3.2-15.8,1.4-21.5c7.4-2.3,14.8-8,16.9-18.3c1.3-6.6-0.7-12.1-2.9-16.2 C247.5,165,254,159.8,254,147.1z",fill:r,stroke:n,strokeLinecap:"round",strokeWidth:"5%"}),c("React").createElement("path",{fill:r,d:"M56.2,100H13.8C7.3,100,2,105.3,2,111.8v128.5c0,6.5,5.3,11.8,11.8,11.8h42.4c6.5,0,11.8-5.3,11.8-11.8V111.8 C68,105.3,62.7,100,56.2,100z"})))))};p.propTypes={color:m.string};f.exports=p}),null);
__d("MessagesEmoticons.react",["cx","fbt","Grid.react","React","ShimButton.react","emptyFunction"],(function a(b,c,d,e,f,g,h,i){__p&&__p();var j,k,l=c("Grid.react").GridItem,m=c("React").PropTypes,n=8,o={smile:i._("smile"),frown:i._("frown"),tongue:i._("tongue"),grin:i._("grin"),gasp:i._("gasp"),wink:i._("wink"),pacman:i._("pacman"),grumpy:i._("grumpy"),unsure:i._("unsure"),cry:i._("cry"),kiki:i._("kiki"),glasses:i._("glasses"),sunglasses:i._("sunglasses"),heart:i._("heart"),devil:i._("devil"),angel:i._("angel"),squint:i._("squint"),confused:i._("confused"),upset:i._("upset"),colonthree:i._("colonthree"),like:i._("like")};j=babelHelpers.inherits(p,c("React").Component);k=j&&j.prototype;p.prototype.getEmoticons=function(){"use strict";return Object.keys(o).map(function(q){return c("React").createElement(l,{key:q},c("React").createElement("div",{className:"panelCell"},c("React").createElement(c("ShimButton.react"),{"aria-label":o[q],className:"emoticon emoticon_"+q,form:"link",onClick:function(){return this.props.onEmoticonSelect(q)}.bind(this)})))}.bind(this))};p.prototype.render=function(){"use strict";return c("React").createElement("div",{className:"emoticonsTable"},c("React").createElement(c("Grid.react"),{cols:n,alignv:"middle",alignh:"center",spacing:"pam"},this.getEmoticons()))};function p(){"use strict";j.apply(this,arguments)}p.propTypes={onEmoticonSelect:m.func};p.defaultProps={onEmoticonSelect:c("emptyFunction")};f.exports=p}),null);
__d("Sticker.react",["cx","fbt","Arbiter","MessengerHotLikeSVG.react","React","ReactDOM","PaddedStickerConfig","StickerConstants","emptyFunction","getElementPosition","getObjectValues","joinClasses"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=c("React").PropTypes,k=83,l=5e3,m=10,n={CLICK:"click",HOVER:"hover",LOAD_AND_HOVER:"load_and_hover",ANIMATE_FOREVER:"animate_forever"},o=c("React").createClass({displayName:"Sticker",propTypes:{accessibilityLabel:j.string,animationTime:j.number,animationTrigger:j.oneOf(c("getObjectValues")(n)),forceCursorPointer:j.bool,frameCount:j.number.isRequired,frameRate:j.number,framesPerCol:j.number.isRequired,framesPerRow:j.number.isRequired,onAttachmentLoad:j.func,onStickerClick:j.func,packID:j.string,packName:j.string,sourceURI:j.string.isRequired,sourceWidth:j.number.isRequired,sourceHeight:j.number.isRequired,spriteURI:j.string,stickerID:j.string,subscribedThreadID:j.string,testID:j.string},getInitialState:function p(){return{index:0,hasAnimated:false,unsubscribeID:null}},getDefaultProps:function p(){return{animationTime:l,accessibilityLabel:"",forceCursorPointer:false,frameRate:k,onStickerClick:c("emptyFunction"),packID:null,packName:""}},componentDidMount:function p(){this.props.onAttachmentLoad&&this.props.onAttachmentLoad();this._stopIntervalID=0;if((this.props.animationTrigger===n.LOAD_AND_HOVER||this.props.animationTrigger===n.ANIMATE_FOREVER)&&this.props.frameCount>1&&this.props.spriteURI)this.startAnimation();if(this.props.subscribedThreadID&&this.props.frameCount>1){var q=c("Arbiter").subscribe(this.props.subscribedThreadID,function(r,s){this.isScrolledIntoView(s.scrollTop,s.viewHeight,s.top)}.bind(this));this.setState({unsubscribeID:q})}},componentWillUnmount:function p(){if(this.state.unsubscribeID)c("Arbiter").unsubscribe(this.state.unsubscribeID);if(this.isAnimating())clearInterval(this._stopIntervalID)},isAnimating:function p(){return!!this._stopIntervalID},getWidth:function p(){return Math.floor(this.props.sourceWidth)},getHeight:function p(){return Math.floor(this.props.sourceHeight)},preloadSprite:function p(){var q=new window.Image();q.onload=function(){if(this.isMounted()&&!this.state.hasAnimated){this.setState({hasAnimated:true});this._stopIntervalID=setInterval(this.incrementFrameIndex,this.props.frameRate)}}.bind(this);if(c("PaddedStickerConfig").ChatPaddedAnimatedStickerGK&&this.props.paddedSpriteURI)q.src=this.props.paddedSpriteURI;else q.src=this.props.spriteURI},isScrolledIntoView:function p(q,r,s){var t=c("getElementPosition")(c("ReactDOM").findDOMNode(this)),u=q+t.y-s,v=q+r,w=u+t.height;if(this.props.frameCount>1&&!this.state.hasAnimated&&w-m<=v&&u+m>=q)this.startAnimation()},startAnimation:function p(){if(!this.state.hasAnimated&&this.props.spriteURI)this.preloadSprite();else if(!this.isAnimating()){this.setState({hasAnimated:true});this._stopIntervalID=setInterval(this.incrementFrameIndex,this.props.frameRate)}},stopAnimation:function p(){this.setState({index:0});clearInterval(this._stopIntervalID);this._stopIntervalID=0},toggleAnimation:function p(){if(this.isAnimating())this.stopAnimation();else this.startAnimation()},shouldStopAnimating:function p(){var q=this.state.index%this.props.frameCount;if(this.props.animationTrigger===n.ANIMATE_FOREVER)return false;if(!(q===0&&this.state.index*this.props.frameRate>this.props.animationTime))return false;if(this.props.animationTrigger===n.CLICK)return true;return!this.state.isHovered},incrementFrameIndex:function p(){if(this.shouldStopAnimating())this.stopAnimation();else this.setState({index:this.state.index+1})},getStyle:function p(){__p&&__p();var q=0,r=this.props.spriteURI;if(c("PaddedStickerConfig").ChatPaddedAnimatedStickerGK&&this.props.paddedSpriteURI){r=this.props.paddedSpriteURI;var s=240/Math.min(this.getHeight(),this.getWidth());q=Math.floor(c("StickerConstants").SPRITE_PADDING/s)}var t=this.state.index%this.props.frameCount,u=t%this.props.framesPerRow*(this.getWidth()+q*2)+q,v=Math.floor(t/this.props.framesPerRow)*(this.getHeight()+q*2)+q,w=this.props.frameCount>1&&this.props.animationTrigger===n.CLICK||this._isStickerClickable(this.props.packID),x=this.props.forceCursorPointer||w?"pointer":"default";if(!this.state.hasAnimated||!this.props.spriteURI)return{backgroundImage:this._isHotLike()?null:"url("+this.props.sourceURI+")",backgroundRepeat:"no-repeat",backgroundSize:this.getWidth()+"px "+this.getHeight()+"px",cursor:x,height:this.getHeight(),width:this.getWidth()};else return{backgroundImage:"url("+r+")",backgroundPosition:-u+"px "+-v+"px",backgroundSize:(this.getWidth()+q*2)*this.props.framesPerRow+"px "+(this.getHeight()+q*2)*this.props.framesPerCol+"px",cursor:x,height:this.getHeight(),width:this.getWidth(),imageRendering:"-webkit-optimize-contrast"}},_isStickerClickable:function p(q){return q&&q!=c("StickerConstants").MOBILE_LIKE_STICKER_PACK_ID&&q!=c("StickerConstants").GRAVEYARD_PACK_ID},onStickerClick:function p(){if(!this._isStickerClickable(this.props.packID))return;if(this.props.onStickerClick)this.props.onStickerClick(this.props.packID,this.props.stickerID)},mouseLeft:function p(){this.setState({isHovered:false})},mouseEntered:function p(){this.setState({isHovered:true});if(!this.isAnimating())this.startAnimation()},tabFocusSelected:function p(){this.setState({isHovered:true});if(!this.isAnimating())this.startAnimation()},tabFocusUnselected:function p(){this.setState({isHovered:false})},getAriaLabel:function p(){return i._("{pack name} {sticker name} sticker",[i.param("pack name",this.props.packName),i.param("sticker name",this.props.accessibilityLabel)])},render:function p(){__p&&__p();var q=void 0,r=void 0;if(this.props.animationTrigger===n.CLICK&&this.props.frameCount>1&&this.props.spriteURI)q=true;else if((this.props.animationTrigger===n.HOVER||this.props.animationTrigger===n.LOAD_AND_HOVER)&&this.props.frameCount>1&&this.props.spriteURI)r=true;var s=q?this.toggleAnimation:null;if(this.props.packID)s=this.onStickerClick;var t=this.props.className,u=null;if(this._isHotLike()){t=c("joinClasses")(t,"_576q");u=c("React").createElement(c("MessengerHotLikeSVG.react"),{color:this.props.customColor})}return c("React").createElement("div",{"aria-label":this.getAriaLabel(),className:t,"data-testid":this.props.testID,onBlur:this.tabFocusUnselected,onClick:s,onFocus:this.tabFocusSelected,onMouseEnter:r?this.mouseEntered:null,onMouseLeave:r?this.mouseLeft:null,role:"img",style:this.getStyle(),tabIndex:"0"},u)},_isHotLike:function p(){if(!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect)return this.props.stickerID===c("StickerConstants").HOT_LIKE_SMALL_STICKER_ID||this.props.stickerID===c("StickerConstants").HOT_LIKE_MEDIUM_STICKER_ID||this.props.stickerID===c("StickerConstants").HOT_LIKE_LARGE_STICKER_ID;return false}});f.exports=o}),null);
__d("StickerUtils",[],(function a(b,c,d,e,f,g){__p&&__p();var h={getScaledDimensions:function i(j,k,l){__p&&__p();var m,n,o;if(k>j){o=l/k;m=j*o;n=k*o}else{o=l/j;m=j*o;n=k*o}return{height:Math.round(m),width:Math.round(n)}},capitalizeWords:function i(j){var k=j.split(" ");for(var l=0;l<k.length;l++){var m=k[l].charAt(0).toUpperCase();k[l]=m+k[l].substr(1)}return k.join(" ")}};f.exports=h}),null);
__d("StickerInterfaces",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({MESSAGES:"messages",NEO:"neo",COMMENTS:"comments",STICKERED:"stickered",COMPOSER:"composer",POSTS:"posts",FRAMES:"frames",SMS:"sms",MONTAGE:"montage"})}),null);
__d("AbstractDialogFitHeight",["csx","cx","CSS","DOM","Event","Style","SubscriptionsHandler","Vector","throttle"],(function a(b,c,d,e,f,g,h,i){__p&&__p();var j=450,k=100,l=67,m=67;function n(o){"use strict";this.$AbstractDialogFitHeight1=o}n.prototype.enable=function(){"use strict";__p&&__p();this.$AbstractDialogFitHeight2=new(c("SubscriptionsHandler"))();this.$AbstractDialogFitHeight2.addSubscriptions(this.$AbstractDialogFitHeight1.subscribe("beforeshow",this.$AbstractDialogFitHeight3.bind(this)),c("Event").listen(window,"resize",c("throttle")(this.$AbstractDialogFitHeight3.bind(this))));this.$AbstractDialogFitHeight4=c("DOM").find(this.$AbstractDialogFitHeight1.getRoot(),"._4-i2");c("CSS").addClass(this.$AbstractDialogFitHeight4,"_5pfh");c("CSS").addClass(this.$AbstractDialogFitHeight1.getRoot(),"_3thl");this.$AbstractDialogFitHeight5=k;if(c("DOM").scry(this.$AbstractDialogFitHeight1.getRoot(),"._4-i0").length)this.$AbstractDialogFitHeight5+=l;if(c("DOM").scry(this.$AbstractDialogFitHeight1.getRoot(),"._5a8u").length)this.$AbstractDialogFitHeight5+=m};n.prototype.disable=function(){"use strict";this.$AbstractDialogFitHeight2.release();this.$AbstractDialogFitHeight2=null;c("CSS").removeClass(this.$AbstractDialogFitHeight4,"_5pfh");c("CSS").removeClass(this.$AbstractDialogFitHeight1.getRoot(),"_3thl")};n.prototype.$AbstractDialogFitHeight3=function(){"use strict";var o=c("Vector").getViewportDimensions().y,p=o-this.$AbstractDialogFitHeight5;c("Style").set(this.$AbstractDialogFitHeight4,this.getHeightProperty(),Math.max(j,p)+"px");this.$AbstractDialogFitHeight1.updatePosition()};f.exports=n}),null);
__d("DialogFitHeight",["AbstractDialogFitHeight"],(function a(b,c,d,e,f,g){__p&&__p();var h,i;h=babelHelpers.inherits(j,c("AbstractDialogFitHeight"));i=h&&h.prototype;j.prototype.getHeightProperty=function(){"use strict";return"height"};function j(){"use strict";h.apply(this,arguments)}f.exports=j}),null);
__d("StickersStoreController",["cx","Bootloader","DialogFitHeight","DOM","LayerAutoFocus","LayerFadeOnHide","LayerHideOnEscape","PureStoreBasedStateMixin","React","ReactDOM","StickersActions","StickersDispatcher","StickersStateStore","XUIDialog.react","XUIDialogBody.react","XUISpinner.react","isSocialPlugin","requestAnimationFrame"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i=c("React").PropTypes,j=688,k=320,l=null,m=c("React").createClass({displayName:"StoreLayer",mixins:[c("PureStoreBasedStateMixin")(c("StickersStateStore"))],propTypes:{isComposer:i.bool,onToggle:i.func.isRequired,shown:i.bool.isRequired},getDefaultProps:function r(){return{isComposer:false}},statics:{calculateState:function r(){return{packID:c("StickersStateStore").getState().get("storePackID")}}},getInitialState:function r(){return{renderStore:function s(){return c("React").createElement("div",{className:"_5r5e"},c("React").createElement(c("XUISpinner.react"),{background:"light",size:"large"}))}}},componentWillMount:function r(){c("StickersDispatcher").explicitlyRegisterStores([c("StickersStateStore")])},shouldComponentUpdate:function r(s){return!!s.shown},componentDidMount:function r(){c("Bootloader").loadModules(["StickersStore.react","react-relay/classic/container/RelayRootContainer","StickersStorePackListRoute","StickersStorePackDetailRoute"],function(s,t,u,v){this.setState({renderStore:function(){var w=this.state.packID?new v({packID:this.state.packID}):new u();return c("React").createElement(t,{Component:s,route:w,renderFetched:function(x){return c("React").createElement(s,babelHelpers["extends"]({},x,{isComposer:this.props.isComposer,packID:this.state.packID,shown:this.props.shown}))}.bind(this)})}.bind(this)})}.bind(this),"StickersStoreController")},_onToggle:function r(s){c("requestAnimationFrame")(function(){return this.props.onToggle(s)}.bind(this))},render:function r(){var s=c("isSocialPlugin")()&&document.body.offsetWidth<j?k:j;return c("React").createElement(c("XUIDialog.react"),{behaviors:{DialogFitHeight:c("DialogFitHeight"),LayerAutoFocus:c("LayerAutoFocus"),LayerFadeOnHide:c("LayerFadeOnHide"),LayerHideOnEscape:c("LayerHideOnEscape")},onToggle:this._onToggle,shown:this.props.shown,width:s},c("React").createElement(c("XUIDialogBody.react"),{className:"_5rq- autofocus"},this.state.renderStore()))}}),n=function n(r){if(!l){l=c("DOM").create("div");c("DOM").appendContent(document.body,l)}c("ReactDOM").render(c("React").createElement(m,{isComposer:r,onToggle:p,shown:true}),l)},o=function o(){if(!l)return;c("ReactDOM").render(c("React").createElement(m,{shown:false,onToggle:p}),l)},p=function p(r){r?n():o()},q={showStore:function r(s,t){c("StickersActions").selectStorePack(s);n(!!t)}};f.exports=q}),null);
__d("getViewerRecordID",["react-relay/classic/store/RelayStore"],(function a(b,c,d,e,f,g){"use strict";var h=c("react-relay/classic/store/RelayStore").getStoreData();function i(){return h.getCachedStore().getDataID("viewer")}f.exports=i}),null);
__d("StickersFlyoutPackSelector.react",["cx","fbt","ix","Animation","Image.react","Link.react","Locale","React","ReactDOM","RelayClassic","RelayAPIConfig","react-relay/classic/mutation/RelayMutation","react-relay/classic/mutation/RelayMutationType","react-relay/classic/query/RelayQL","react-relay/classic/store/RelayStore","StickersConfig","StickersActions","StickersStoreController","StickerConstants","StickerInterfaces","XUIBadge.react","asset","emptyFunction","getObjectValues","getViewerRecordID"],(function a(b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k,l,m,n,o=c("React").PropTypes,p=4,q=200,r=i._("Sticker Store"),s=function s(w,x){if(w.id==c("StickerConstants").SEARCH_PACK_ID)return x?j("404874"):j("415283");if(w.id==c("StickerConstants").MRU_STICKER_PACK)return x?j("430464"):j("430471");if(w.id==c("StickerConstants").EMOTICON_PACK_ID)return j("87143");if(w.id==c("StickerConstants").OZ_PACK_ID)return w.icon;return w.thumbnail_image?w.thumbnail_image.uri:null},t=function t(w){var x=w.pack,y=c("StickersConfig").search_pack?w.index===1||w.index===2:w.index===1,z="_5r8a"+(w.selected?" _5r8b":"")+(x.id==c("StickerConstants").MRU_STICKER_PACK?" _5qcj":"")+(x.id==c("StickerConstants").SEARCH_PACK_ID?" _5qck":"")+(y?" _eb3":""),A=w.isComments&&!x.is_comments_capable&&x.id!==c("StickerConstants").MRU_STICKER_PACK&&x.id!==c("StickerConstants").SEARCH_PACK_ID&&x.id!==c("StickerConstants").EMOTICON_PACK_ID,B=i._("This pack is only available in photos"),C=i._("This pack is only available in messages"),D=A?c("emptyFunction"):function(){return w.onClick(x.id)},E=s(x,w.selected);if(E===null)return null;var F=!x.is_messenger_capable&&x.is_composer_capable?B:C;return c("React").createElement(c("Link.react"),{"aria-label":A?F:x.name,className:z,"data-hover":"tooltip","data-id":x.id,"data-tooltip-content":A?F:x.name,onClick:D,role:"button",tabIndex:"0"},c("React").createElement(c("Image.react"),{className:(A?"_2ji6":"")+" _5r8c"+(c("StickersConfig").search_pack?" _1viy":""),src:E}))};t.propTypes={index:o.number,isComments:o.bool,onClick:o.func,pack:o.object.isRequired,selected:o.bool};t.defaultProps={isComments:false,onClick:c("emptyFunction")};k=babelHelpers.inherits(u,c("React").Component);l=k&&k.prototype;function u(){var w,x;for(var y=arguments.length,z=Array(y),A=0;A<y;A++)z[A]=arguments[A];return x=(w=l.constructor).call.apply(w,[this].concat(z)),this.state={animating:false,page:0},this.$StickersFlyoutPackSelector10=function(){this.$StickersFlyoutPackSelector8()&&this.$StickersFlyoutPackSelector4(this.state.page-1,q)}.bind(this),this.$StickersFlyoutPackSelector11=function(){this.$StickersFlyoutPackSelector9()&&this.$StickersFlyoutPackSelector4(this.state.page+1,q)}.bind(this),this.$StickersFlyoutPackSelector12=function(){c("StickersStoreController").showStore(null,this.props.stickerInterface==c("StickerInterfaces").COMPOSER);c("react-relay/classic/store/RelayStore").commitUpdate(new v({actor_id:c("RelayAPIConfig").actorID}),{onSuccess:c("emptyFunction"),onFailure:c("emptyFunction")})}.bind(this),x}u.prototype.componentDidMount=function(){if(this.props.selectedPackID)return;this.$StickersFlyoutPackSelector1()};u.prototype.shouldComponentUpdate=function(w,x){return!x.animating};u.prototype.componentWillReceiveProps=function(w){if(w.selectedPackID)return;this.$StickersFlyoutPackSelector1()};u.prototype.onFlyoutShown=function(){if(this.$StickersFlyoutPackSelector2().length>0){var w=this.$StickersFlyoutPackSelector3(this.props.selectedPackID);if(this.state.page!==w)this.$StickersFlyoutPackSelector4(w,0)}};u.prototype.$StickersFlyoutPackSelector1=function(){var w=this.$StickersFlyoutPackSelector2();if(w.length>0)this.$StickersFlyoutPackSelector5(w[0].id);else c("StickersActions").trayLoaded()};u.prototype.$StickersFlyoutPackSelector2=function(){var w=this.props.packs.sticker_store.tray_packs.edges.map(function(x){return x.node});if(c("StickersConfig").oz_pack)w.unshift(c("StickersConfig").oz_pack);if(c("StickersConfig").mru_stickers_count!==0)w.unshift(c("StickersConfig").mru_pack);if(c("StickersConfig").search_pack)w.unshift(c("StickersConfig").search_pack);return w};u.prototype.$StickersFlyoutPackSelector3=function(w){var x=this.$StickersFlyoutPackSelector2();for(var y=0;y<x.length;y++)if(x[y].id==w)return y<=p?0:Math.floor((y-1)/p);return 0};u.prototype.$StickersFlyoutPackSelector4=function(w,x){if(this.state.animating)return;this.setState({animating:true,page:w},function(){var y=c("ReactDOM").findDOMNode(this.refs.positioner),z=this.$StickersFlyoutPackSelector6(w);new(c("Animation"))(y).to(z.reference,z.offset+"px").ondone(function(){return this.setState({animating:false})}.bind(this)).duration(x).go()})};u.prototype.$StickersFlyoutPackSelector6=function(w){var x=c("ReactDOM").findDOMNode(this.refs.positioner),y=x.childNodes[w].offsetLeft;if(c("Locale").isRTL()){var z=x.offsetWidth,A=x.childNodes[w].offsetWidth;return{reference:"right",offset:y+A-z}}return{reference:"left",offset:-y}};u.prototype.$StickersFlyoutPackSelector7=function(){return Math.max(1,Math.ceil((this.$StickersFlyoutPackSelector2().length-1)/p))};u.prototype.$StickersFlyoutPackSelector8=function(){return this.state.page>0};u.prototype.$StickersFlyoutPackSelector9=function(){return this.state.page+1<this.$StickersFlyoutPackSelector7()};u.prototype.render=function(){return c("React").createElement("div",{className:"_5r85"},this.$StickersFlyoutPackSelector13(),this.$StickersFlyoutPackSelector14(),this.$StickersFlyoutPackSelector15(),c("React").createElement("div",{className:"_5r88"},c("React").createElement("div",{className:"_5r89",ref:"positioner"},this.$StickersFlyoutPackSelector16())))};u.prototype.$StickersFlyoutPackSelector5=function(w){c("StickersActions").selectTrayPack(w)};u.prototype.$StickersFlyoutPackSelector16=function(){var w=this.$StickersFlyoutPackSelector2().map(function(A,B){return c("React").createElement(t,{key:A.id,onClick:function(){return this.$StickersFlyoutPackSelector5(A.id)}.bind(this),pack:A,selected:this.props.selectedPackID===A.id,index:B,isComments:this.props.stickerInterface==c("StickerInterfaces").COMMENTS})}.bind(this)),x=[];for(var y=0;y<w.length;y+=p){var z=y;y===0&&y++;x.push(c("React").createElement("div",{className:"_5r81",key:y},w.slice(z,y+p)))}return x};u.prototype.$StickersFlyoutPackSelector13=function(){return c("React").createElement("a",{"aria-label":r,className:"_5r86 rfloat","data-hover":"tooltip",href:"#",onClick:this.$StickersFlyoutPackSelector12,role:"button",tabIndex:"0"},c("React").createElement(c("Image.react"),{className:"_5r87",src:j("392514")}),this.$StickersFlyoutPackSelector17())};u.prototype.$StickersFlyoutPackSelector17=function(){if(!this.props.packs.num_new_sticker_packs)return null;return c("React").createElement(c("XUIBadge.react"),{className:"rfloat _3fhs",count:this.props.packs.num_new_sticker_packs,maxcount:9,type:"special"})};u.prototype.$StickersFlyoutPackSelector14=function(){if(!this.$StickersFlyoutPackSelector8())return null;var w=c("Locale").isRTL()?j("384087"):j("409864");return c("React").createElement(c("Link.react"),{className:"_37wu lfloat",onClick:this.$StickersFlyoutPackSelector10,role:"button",tabIndex:"0"},c("React").createElement(c("Image.react"),{className:"_5r84",src:w}))};u.prototype.$StickersFlyoutPackSelector15=function(){if(!this.$StickersFlyoutPackSelector9())return null;var w=c("Locale").isRTL()?j("409864"):j("384087");return c("React").createElement(c("Link.react"),{className:"_37wv rfloat",onClick:this.$StickersFlyoutPackSelector11,role:"button",tabIndex:"0"},c("React").createElement(c("Image.react"),{className:"_5r84",src:w}))};u.propTypes={stickerInterface:o.oneOf(c("getObjectValues")(c("StickerInterfaces"))),selectedPackID:o.string};u.defaultProps={stickerInterface:c("StickerInterfaces").MESSAGES};f.exports=c("RelayClassic").createContainer(u,{initialVariables:{stickerInterface:c("StickerInterfaces").MESSAGES},fragments:{packs:function w(x){return function(){return{children:[{fieldName:"num_new_sticker_packs",kind:"Field",metadata:{},type:"Int"},{children:[{calls:[{kind:"Call",metadata:{type:"StickerInterfaces"},name:"interface",value:{kind:"CallVariable",callVariableName:"stickerInterface"}},{kind:"Call",metadata:{type:"Int"},name:"first",value:{kind:"CallValue",callValue:1e4}}],children:[{children:[{children:[{fieldName:"id",kind:"Field",metadata:{isRequisite:true},type:"ID"},{fieldName:"is_comments_capable",kind:"Field",metadata:{},type:"Boolean"},{fieldName:"is_messenger_capable",kind:"Field",metadata:{},type:"Boolean"},{fieldName:"is_composer_capable",kind:"Field",metadata:{},type:"Boolean"},{fieldName:"name",kind:"Field",metadata:{},type:"String"},{calls:[{kind:"Call",metadata:{type:"Int"},name:"width",value:{kind:"CallValue",callValue:20}},{kind:"Call",metadata:{type:"Int"},name:"height",value:{kind:"CallValue",callValue:20}}],children:[{fieldName:"uri",kind:"Field",metadata:{},type:"Url"}],fieldName:"thumbnail_image",kind:"Field",metadata:{canHaveSubselections:true},type:"Image"}],fieldName:"node",kind:"Field",metadata:{canHaveSubselections:true,inferredRootCallName:"node",inferredPrimaryKey:"id",isRequisite:true},type:"StickerPack"},{fieldName:"cursor",kind:"Field",metadata:{isGenerated:true,isRequisite:true},type:"ID"}],fieldName:"edges",kind:"Field",metadata:{canHaveSubselections:true,isPlural:true},type:"PacksInTrayEdge"},{children:[{fieldName:"has_next_page",kind:"Field",metadata:{isGenerated:true,isRequisite:true},type:"Boolean"},{fieldName:"has_previous_page",kind:"Field",metadata:{isGenerated:true,isRequisite:true},type:"Boolean"}],fieldName:"page_info",kind:"Field",metadata:{canHaveSubselections:true,isGenerated:true,isRequisite:true},type:"PageInfo"}],fieldName:"tray_packs",kind:"Field",metadata:{canHaveSubselections:true,isConnection:true},type:"PacksInTrayConnection"}],fieldName:"sticker_store",kind:"Field",metadata:{canHaveSubselections:true},type:"StickerStore"}],id:c("react-relay/classic/query/RelayQL").__id(),kind:"Fragment",metadata:{},name:"StickersFlyoutPackSelector_react_PacksRelayQL",type:"Viewer"}}()}}});m=babelHelpers.inherits(v,c("react-relay/classic/mutation/RelayMutation"));n=m&&m.prototype;v.prototype.getMutation=function(){return function(){return{calls:[{kind:"Call",metadata:{},name:"set_sticker_store_opened",value:{kind:"CallVariable",callVariableName:"input"}}],children:[{fieldName:"client_mutation_id",kind:"Field",metadata:{isGenerated:true,isRequisite:true},type:"ID"}],kind:"Mutation",metadata:{inputType:"SetStickerStoreOpenedData!"},name:"StickersFlyoutPackSelector_react",responseType:"SetStickerStoreOpenedResponsePayload"}}()};v.prototype.getVariables=function(){return{actor_id:this.props.actor_id}};v.prototype.getFatQuery=function(){return function(){return{children:[{children:[{fieldName:"num_new_sticker_packs",kind:"Field",metadata:{},type:"Int"}],fieldName:"viewer",kind:"Field",metadata:{canHaveSubselections:true},type:"Viewer"}],id:c("react-relay/classic/query/RelayQL").__id(),kind:"Fragment",metadata:{},name:"StickersFlyoutPackSelector_reactRelayQL",type:"SetStickerStoreOpenedResponsePayload"}}()};v.prototype.getOptimisticResponse=function(){return{viewer:{num_new_sticker_packs:0}}};v.prototype.getConfigs=function(){var w=c("getViewerRecordID")();return[{type:c("react-relay/classic/mutation/RelayMutationType").FIELDS_CHANGE,fieldIDs:w?{viewer:w}:{}}]};function v(){m.apply(this,arguments)}}),null);
__d("StickersFlyoutPackSelectorRoute",["react-relay/classic/query/RelayQL","react-relay/classic/route/RelayRoute"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("react-relay/classic/route/RelayRoute"));i=h&&h.prototype;function j(){h.apply(this,arguments)}j.routeName="StickersFlyoutPackSelectorRoute";j.paramDefinitions={stickerInterface:{required:true,type:"String"}};j.queries={packs:function k(l,m){return function(n){return{children:[].concat.apply([],[c("react-relay/classic/query/RelayQL").__frag(n)]),fieldName:"viewer",kind:"Query",metadata:{},name:"StickersFlyoutPackSelectorRoute",type:"Viewer"}}(l.getFragment("packs",{stickerInterface:m.stickerInterface}))}};f.exports=j}),null);
__d("StickersFlyoutStickerSelector.react",["cx","fbt","ix","AddCommentFlyoutSizeType","Grid.react","Image.react","React","RelayClassic","react-relay/classic/query/RelayQL","ScrollableArea.react","Sticker.react","StickerConstants","StickerInterfaces","StickersActions","StickersConfig","StickersStateStore","StickerUtils","getObjectValues","throttle"],(function a(b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k,l,m=c("Grid.react").GridItem,n=c("React").PropTypes,o=320,p=255,q=278,r=308,s=36,t=112,u=Math.ceil(c("StickerConstants").TRAY_SIZE*(window.devicePixelRatio||1));k=babelHelpers.inherits(v,c("React").Component);l=k&&k.prototype;function v(){__p&&__p();var x,y;for(var z=arguments.length,A=Array(z),B=0;B<z;B++)A[B]=arguments[B];return y=(x=l.constructor).call.apply(x,[this].concat(A)),this.$StickersFlyoutStickerSelector1=function(){__p&&__p();if(this.props.stickers_for_pack||this.props.stickers_for_mru_pack){var C=this.props.stickers_for_pack?this.props.stickers_for_pack.stickers.edges:this.props.stickers_for_mru_pack.recently_used_stickers.edges;if(this.props.stickers_for_mru_pack){var D=c("StickersStateStore").getState();if(!D.get("recentStickersLoaded"))c("StickersActions").loadRecentStickers(this.props.stickers_for_mru_pack.recently_used_stickers.edges.map(function(E){return E.node}));else return this.props.recentStickers.filter(function(E){return this.$StickersFlyoutStickerSelector5(E)}.bind(this))}return C.filter(function(E){return this.$StickersFlyoutStickerSelector5(E.node)}.bind(this))}else if(this.props.stickers_for_search)return this.props.stickers_for_search.sticker_results.edges;else return null}.bind(this),this.$StickersFlyoutStickerSelector5=function(C){var D=this.props.stickerInterface,E=C.pack;if(D===c("StickerInterfaces").COMPOSER)return E.is_composer_capable;else if(D===c("StickerInterfaces").COMMENTS)return E.is_comments_capable;else if(D===c("StickerInterfaces").MESSAGES)return E.is_messenger_capable;else return true}.bind(this),this.$StickersFlyoutStickerSelector2=function(){var C=(o-s*2-t)/2;return c("React").createElement("div",{className:"_5jdt",style:{marginTop:C+"px"}},c("React").createElement(c("Image.react"),{src:j("87146")}),c("React").createElement("p",null,i._("No Stickers to Show")))},this.$StickersFlyoutStickerSelector3=function(){var C=this.refs.stickerScrollable;if(C){var D=C.getArea().getScrollTop();this.props.onScroll&&this.props.onScroll(D)}}.bind(this),y}v.prototype.render=function(){var x=this.$StickersFlyoutStickerSelector1();if(!x||x.length===0)return this.$StickersFlyoutStickerSelector2();var y=this.props.size==="small"?o:p,z=this.props.size==="small"?q:r;return c("React").createElement(c("ScrollableArea.react"),{ref:"stickerScrollable",height:this.props.height||y,onScroll:c("throttle")(this.$StickersFlyoutStickerSelector3,200),width:z,fade:true},c("React").createElement("div",{className:"_5r8k"},c("React").createElement(c("Grid.react"),{cols:4,fixed:true},this.$StickersFlyoutStickerSelector4(x))))};v.prototype.$StickersFlyoutStickerSelector4=function(x){return x.map(function(y){var z=y.node||y,A=z.sprite_image?z.sprite_image.uri:null,B=z.padded_sprite_image?z.padded_sprite_image.uri:null,C=c("StickerUtils").getScaledDimensions(z.image.height,z.image.width,c("StickerConstants").TRAY_SIZE);return c("React").createElement(m,{key:z.id},c("React").createElement("div",{className:"_5r8h",onClick:function(event){return this.props.onStickerClick(z,event)}.bind(this),onKeyDown:function(event){return this.props.onStickerKeyDown(z,event)}.bind(this),role:"presentation"},c("React").createElement(c("Sticker.react"),{accessibilityLabel:z.label,animationTrigger:"hover",className:"_5r8i",forceCursorPointer:true,frameCount:z.frame_count,frameRate:z.frame_rate||83,framesPerCol:z.frames_per_column,framesPerRow:z.frames_per_row,sourceHeight:C.height,sourceURI:z.image.uri,sourceWidth:C.width,spriteURI:A,packName:z.pack.name,paddedSpriteURI:B,stickerID:z.id})))}.bind(this))};v.propTypes={height:n.number,onScroll:n.func,onStickerClick:n.func.isRequired,onStickerKeyDown:n.func.isRequired,recentStickers:n.array.isRequired,stickerInterface:n.oneOf(c("getObjectValues")(c("StickerInterfaces"))),size:n.oneOf(Object.values(c("AddCommentFlyoutSizeType")))};v.defaultProps={stickerInterface:c("StickerInterfaces").MESSAGES,size:c("AddCommentFlyoutSizeType").SMALL};var w=function(x,y,z,A,B,C){return{children:[{fieldName:"id",kind:"Field",metadata:{isRequisite:true},type:"ID"},{fieldName:"label",kind:"Field",metadata:{},type:"String"},{fieldName:"frame_count",kind:"Field",metadata:{},type:"Int"},{fieldName:"frame_rate",kind:"Field",metadata:{},type:"Int"},{fieldName:"frames_per_column",kind:"Field",metadata:{},type:"Int"},{fieldName:"frames_per_row",kind:"Field",metadata:{},type:"Int"},{calls:[{kind:"Call",metadata:{type:"Int"},name:"width",value:c("react-relay/classic/query/RelayQL").__var(x)},{kind:"Call",metadata:{type:"Int"},name:"height",value:c("react-relay/classic/query/RelayQL").__var(y)}],children:[{fieldName:"height",kind:"Field",metadata:{},type:"Int"},{fieldName:"width",kind:"Field",metadata:{},type:"Int"},{fieldName:"uri",kind:"Field",metadata:{},type:"Url"}],fieldName:"image",kind:"Field",metadata:{canHaveSubselections:true},type:"Image"},{calls:[{kind:"Call",metadata:{type:"Int"},name:"width",value:c("react-relay/classic/query/RelayQL").__var(z)},{kind:"Call",metadata:{type:"Int"},name:"height",value:c("react-relay/classic/query/RelayQL").__var(A)}],children:[{fieldName:"uri",kind:"Field",metadata:{},type:"Url"}],fieldName:"sprite_image",kind:"Field",metadata:{canHaveSubselections:true},type:"Image"},{calls:[{kind:"Call",metadata:{type:"Int"},name:"width",value:c("react-relay/classic/query/RelayQL").__var(B)},{kind:"Call",metadata:{type:"Int"},name:"height",value:c("react-relay/classic/query/RelayQL").__var(C)}],children:[{fieldName:"uri",kind:"Field",metadata:{},type:"Url"}],fieldName:"padded_sprite_image",kind:"Field",metadata:{canHaveSubselections:true},type:"Image"},{children:[{fieldName:"name",kind:"Field",metadata:{},type:"String"},{fieldName:"is_comments_capable",kind:"Field",metadata:{},type:"Boolean"},{fieldName:"is_composer_capable",kind:"Field",metadata:{},type:"Boolean"},{fieldName:"is_messenger_capable",kind:"Field",metadata:{},type:"Boolean"},{fieldName:"id",kind:"Field",metadata:{isGenerated:true,isRequisite:true},type:"ID"}],fieldName:"pack",kind:"Field",metadata:{canHaveSubselections:true,inferredRootCallName:"node",inferredPrimaryKey:"id"},type:"StickerPack"}],id:c("react-relay/classic/query/RelayQL").__id(),kind:"Fragment",metadata:{},name:"StickersFlyoutStickerSelector_reactRelayQL",type:"Sticker"}}(u,u,u,u,u,u);f.exports=c("RelayClassic").createContainer(v,{initialVariables:{stickerInterface:c("StickerInterfaces").MESSAGES},fragments:{stickers_for_pack:function x(){return function(y){return{children:[{calls:[{kind:"Call",metadata:{type:"Int"},name:"first",value:{kind:"CallValue",callValue:1e3}}],children:[{children:[{children:[].concat.apply([],[{fieldName:"id",kind:"Field",metadata:{isGenerated:true,isRequisite:true},type:"ID"},c("react-relay/classic/query/RelayQL").__frag(y)]),fieldName:"node",kind:"Field",metadata:{canHaveSubselections:true,inferredRootCallName:"node",inferredPrimaryKey:"id",isRequisite:true},type:"Sticker"},{fieldName:"cursor",kind:"Field",metadata:{isGenerated:true,isRequisite:true},type:"ID"}],fieldName:"edges",kind:"Field",metadata:{canHaveSubselections:true,isPlural:true},type:"StickersInPackEdge"},{children:[{fieldName:"has_next_page",kind:"Field",metadata:{isGenerated:true,isRequisite:true},type:"Boolean"},{fieldName:"has_previous_page",kind:"Field",metadata:{isGenerated:true,isRequisite:true},type:"Boolean"}],fieldName:"page_info",kind:"Field",metadata:{canHaveSubselections:true,isGenerated:true,isRequisite:true},type:"PageInfo"}],fieldName:"stickers",kind:"Field",metadata:{canHaveSubselections:true,isConnection:true,isFindable:true},type:"StickersInPackConnection"},{fieldName:"id",kind:"Field",metadata:{isGenerated:true,isRequisite:true},type:"ID"}],id:c("react-relay/classic/query/RelayQL").__id(),kind:"Fragment",metadata:{},name:"StickersFlyoutStickerSelector_react_Stickers_for_packRelayQL",type:"StickerPack"}}(w)},stickers_for_search:function x(y){var z=y.stickerInterface;return function(A){return{children:[{calls:[{kind:"Call",metadata:{type:"StickerInterfaces"},name:"interface",value:{kind:"CallVariable",callVariableName:"stickerInterface"}},{kind:"Call",metadata:{type:"Int"},name:"first",value:{kind:"CallValue",callValue:40}}],children:[{children:[{children:[].concat.apply([],[{fieldName:"id",kind:"Field",metadata:{isGenerated:true,isRequisite:true},type:"ID"},c("react-relay/classic/query/RelayQL").__frag(A)]),fieldName:"node",kind:"Field",metadata:{canHaveSubselections:true,inferredRootCallName:"node",inferredPrimaryKey:"id",isRequisite:true},type:"Sticker"},{fieldName:"cursor",kind:"Field",metadata:{isGenerated:true,isRequisite:true},type:"ID"}],fieldName:"edges",kind:"Field",metadata:{canHaveSubselections:true,isPlural:true},type:"StickerSearchResultsEdge"},{children:[{fieldName:"has_next_page",kind:"Field",metadata:{isGenerated:true,isRequisite:true},type:"Boolean"},{fieldName:"has_previous_page",kind:"Field",metadata:{isGenerated:true,isRequisite:true},type:"Boolean"}],fieldName:"page_info",kind:"Field",metadata:{canHaveSubselections:true,isGenerated:true,isRequisite:true},type:"PageInfo"}],fieldName:"sticker_results",kind:"Field",metadata:{canHaveSubselections:true,isConnection:true},type:"StickerSearchResultsConnection"}],id:c("react-relay/classic/query/RelayQL").__id(),kind:"Fragment",metadata:{},name:"StickersFlyoutStickerSelector_react_Stickers_for_searchRelayQL",type:"StickerSearchQuery"}}(w)},stickers_for_mru_pack:function x(){return function(y,z){return{children:[{calls:[{kind:"Call",metadata:{type:"Int"},name:"first",value:c("react-relay/classic/query/RelayQL").__var(y)}],children:[{children:[{children:[].concat.apply([],[{fieldName:"id",kind:"Field",metadata:{isGenerated:true,isRequisite:true},type:"ID"},c("react-relay/classic/query/RelayQL").__frag(z)]),fieldName:"node",kind:"Field",metadata:{canHaveSubselections:true,inferredRootCallName:"node",inferredPrimaryKey:"id",isRequisite:true},type:"Sticker"},{fieldName:"cursor",kind:"Field",metadata:{isGenerated:true,isRequisite:true},type:"ID"}],fieldName:"edges",kind:"Field",metadata:{canHaveSubselections:true,isPlural:true},type:"RecentlyUsedStickersEdge"},{children:[{fieldName:"has_next_page",kind:"Field",metadata:{isGenerated:true,isRequisite:true},type:"Boolean"},{fieldName:"has_previous_page",kind:"Field",metadata:{isGenerated:true,isRequisite:true},type:"Boolean"}],fieldName:"page_info",kind:"Field",metadata:{canHaveSubselections:true,isGenerated:true,isRequisite:true},type:"PageInfo"}],fieldName:"recently_used_stickers",kind:"Field",metadata:{canHaveSubselections:true,isConnection:true,isFindable:true},type:"RecentlyUsedStickersConnection"}],id:c("react-relay/classic/query/RelayQL").__id(),kind:"Fragment",metadata:{},name:"StickersFlyoutStickerSelector_react_Stickers_for_mru_packRelayQL",type:"Viewer"}}(c("StickersConfig").max_mru_stickers,w)}}})}),null);
__d("StickersFlyoutStickersForMRUPackRoute",["react-relay/classic/query/RelayQL","react-relay/classic/route/RelayRoute"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("react-relay/classic/route/RelayRoute"));i=h&&h.prototype;function j(){h.apply(this,arguments)}j.routeName="StickersFlyoutStickersForMRUPackRoute";j.queries={stickers_for_mru_pack:function k(l){return function(m){return{children:[].concat.apply([],[c("react-relay/classic/query/RelayQL").__frag(m)]),fieldName:"viewer",kind:"Query",metadata:{},name:"StickersFlyoutStickersForMRUPackRoute",type:"Viewer"}}(l.getFragment("stickers_for_mru_pack"))}};f.exports=j}),null);
__d("StickersFlyoutStickersForPackRoute",["react-relay/classic/query/RelayQL","react-relay/classic/route/RelayRoute"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("react-relay/classic/route/RelayRoute"));i=h&&h.prototype;function j(){h.apply(this,arguments)}j.routeName="StickersFlyoutStickersForPackRoute";j.paramDefinitions={id:{required:true,type:"String"}};j.queries={stickers_for_pack:function k(l){return function(m){return{calls:[{kind:"Call",metadata:{type:"ID!"},name:"id",value:{kind:"CallVariable",callVariableName:"id"}}],children:[].concat.apply([],[{fieldName:"id",kind:"Field",metadata:{isGenerated:true,isRequisite:true},type:"ID"},{fieldName:"__typename",kind:"Field",metadata:{isGenerated:true,isRequisite:true},type:"String"},c("react-relay/classic/query/RelayQL").__frag(m)]),fieldName:"node",kind:"Query",metadata:{isAbstract:true,identifyingArgName:"id",identifyingArgType:"ID!"},name:"StickersFlyoutStickersForPackRoute",type:"Node"}}(l.getFragment("stickers_for_pack"))}};f.exports=j}),null);
__d("StickersFlyoutStickersForSearchRoute",["react-relay/classic/query/RelayQL","react-relay/classic/route/RelayRoute"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("react-relay/classic/route/RelayRoute"));i=h&&h.prototype;function j(){h.apply(this,arguments)}j.routeName="StickersFlyoutStickersForSearchRoute";j.paramDefinitions={query:{required:true,type:"String"},stickerInterface:{required:true,type:"String"}};j.queries={stickers_for_search:function k(l,m){var n=m.stickerInterface;return function(o){return{calls:[{kind:"Call",metadata:{type:"String!"},name:"query",value:{kind:"CallVariable",callVariableName:"query"}}],children:[].concat.apply([],[c("react-relay/classic/query/RelayQL").__frag(o)]),fieldName:"sticker_search",kind:"Query",metadata:{identifyingArgName:"query",identifyingArgType:"String!"},name:"StickersFlyoutStickersForSearchRoute",type:"StickerSearchQuery"}}(l.getFragment("stickers_for_search",{stickerInterface:n}))}};f.exports=j}),null);
__d("StickersFlyoutTags.react",["cx","Grid.react","Image.react","React","RelayClassic","react-relay/classic/query/RelayQL","ScrollableArea.react","XUIButton.react"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i=c("Grid.react").GridItem,j=function j(k){var l=k.tags.sticker_store.sticker_tags.edges.filter(function(m){return m.node.thumbnail_image.uri!==null}).sort(function(m,n){return m.node.order-n.node.order}).map(function(m,n){return c("React").createElement(i,{key:n,className:"_3iqe"},c("React").createElement("div",{className:"_t5c"+(n<2?" _1b27":"")+(n%2===0?" _t5d":"")+(n%2!==0?" _t5e":"")},c("React").createElement(c("XUIButton.react"),{image:c("React").createElement(c("Image.react"),{src:m.node.thumbnail_image.uri}),label:m.node.name,onClick:function o(){return k.onTagSelect(m.node)},className:"_5jdu",style:{background:"#"+m.node.color_code},disabled:k.inputDisabled})))});return c("React").createElement(c("ScrollableArea.react"),{height:k.height,width:k.width,shadow:true,fade:true,className:"_5jei"},c("React").createElement(c("Grid.react"),{spacing:"pas",cols:2,fixed:true},l))};f.exports=c("RelayClassic").createContainer(j,{fragments:{tags:function k(){return function(){return{children:[{children:[{calls:[{kind:"Call",metadata:{type:"StickerTagType"},name:"sticker_tag_type",value:{kind:"CallValue",callValue:"FEATURED"}},{kind:"Call",metadata:{type:"Int"},name:"first",value:{kind:"CallValue",callValue:20}}],children:[{children:[{children:[{fieldName:"order",kind:"Field",metadata:{},type:"Int"},{fieldName:"color_code",kind:"Field",metadata:{},type:"String"},{fieldName:"name",kind:"Field",metadata:{},type:"String"},{children:[{fieldName:"uri",kind:"Field",metadata:{},type:"Url"}],fieldName:"thumbnail_image",kind:"Field",metadata:{canHaveSubselections:true},type:"Image"},{fieldName:"id",kind:"Field",metadata:{isGenerated:true,isRequisite:true},type:"ID"}],fieldName:"node",kind:"Field",metadata:{canHaveSubselections:true,inferredRootCallName:"node",inferredPrimaryKey:"id",isRequisite:true},type:"StickerTag"},{fieldName:"cursor",kind:"Field",metadata:{isGenerated:true,isRequisite:true},type:"ID"}],fieldName:"edges",kind:"Field",metadata:{canHaveSubselections:true,isPlural:true},type:"AllStickerTagsEdge"},{children:[{fieldName:"has_next_page",kind:"Field",metadata:{isGenerated:true,isRequisite:true},type:"Boolean"},{fieldName:"has_previous_page",kind:"Field",metadata:{isGenerated:true,isRequisite:true},type:"Boolean"}],fieldName:"page_info",kind:"Field",metadata:{canHaveSubselections:true,isGenerated:true,isRequisite:true},type:"PageInfo"}],fieldName:"sticker_tags",kind:"Field",metadata:{canHaveSubselections:true,isConnection:true},type:"AllStickerTagsConnection"}],fieldName:"sticker_store",kind:"Field",metadata:{canHaveSubselections:true},type:"StickerStore"}],id:c("react-relay/classic/query/RelayQL").__id(),kind:"Fragment",metadata:{},name:"StickersFlyoutTags_react_TagsRelayQL",type:"Viewer"}}()}}})}),null);
__d("StickersFlyoutTagsRoute",["react-relay/classic/query/RelayQL","react-relay/classic/route/RelayRoute"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("react-relay/classic/route/RelayRoute"));i=h&&h.prototype;function j(){h.apply(this,arguments)}j.routeName="StickersFlyoutTagsRoute";j.queries={tags:function k(l){return function(m){return{children:[].concat.apply([],[c("react-relay/classic/query/RelayQL").__frag(m)]),fieldName:"viewer",kind:"Query",metadata:{},name:"StickersFlyoutTagsRoute",type:"Viewer"}}(l.getFragment("tags"))}};f.exports=j}),null);
__d("StickersFlyoutTagSelector.react",["cx","fbt","AddCommentFlyoutSizeType","Banzai","React","react-relay/classic/container/RelayRootContainer","StickersFlyoutStickerSelector.react","StickersFlyoutStickersForSearchRoute","StickersFlyoutTags.react","StickersFlyoutTagsRoute","StickerInterfaces","StickersTypedLogger","StickerUtils","XUICloseButton.react","XUISpinner.react","XUITextInput.react","debounce","getObjectValues"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=c("React").PropTypes,k=320,l=257,m=278,n=324,o=36,p=c("debounce")(function(r){if(!r||r.length<2)return;new(c("StickersTypedLogger"))().setEvent("search_sticker").setSearchtoken(r).log()},1e3),q=c("React").createClass({displayName:"StickersFlyoutTagSelector",propTypes:{onStickerClick:j.func.isRequired,onStickerKeyDown:j.func.isRequired,stickerInterface:j.oneOf(c("getObjectValues")(c("StickerInterfaces"))),shown:j.bool,size:j.oneOf(Object.values(c("AddCommentFlyoutSizeType")))},getInitialState:function r(){return{input:"",isScrolling:false,tagChosen:false}},getDefaultProps:function r(){return{stickerInterface:c("StickerInterfaces").MESSAGES,size:c("AddCommentFlyoutSizeType").SMALL}},componentDidMount:function r(){this._focusInput()},componentWillReceiveProps:function r(s){if(s.shown&&!this.props.shown)this.setState(this.getInitialState(),this._focusInput)},shouldComponentUpdate:function r(s){return s.shown},render:function r(){return c("React").createElement("div",{className:"_217a"+(this.state.isScrolling?" _1hg1":"")},c("React").createElement("div",{className:"_5jdr"},c("React").createElement("span",{className:"_5jds"}),c("React").createElement(c("XUITextInput.react"),{onChange:this._inputChanged,onClick:function s(t){return t&&t.stopPropagation()},ref:"inputField",placeholder:i._("Search stickers"),value:this.state.input}),c("React").createElement(c("XUICloseButton.react"),{size:"small",onClick:this._handleResetButtonClick,className:this.state.input.length===0?"hidden_elem":""})),this._renderContentArea())},_renderContentArea:function r(){__p&&__p();var s=this.props.size==="small"?k:l,t=this.props.size==="small"?m:n,u=this._normalizeInput(this.state.input),v=c("React").createElement("div",{className:"_e0r"},c("React").createElement(c("XUISpinner.react"),{size:"large"}));if(this.state.tagChosen||u.length>1){p(u);return c("React").createElement(c("react-relay/classic/container/RelayRootContainer"),{Component:c("StickersFlyoutStickerSelector.react"),route:new(c("StickersFlyoutStickersForSearchRoute"))({query:u,stickerInterface:this.props.stickerInterface}),renderLoading:function w(){return v},renderFetched:function(w){return c("React").createElement(c("StickersFlyoutStickerSelector.react"),babelHelpers["extends"]({},w,{ref:"selector",height:s-o,onScroll:this._onScroll,onStickerClick:this._onStickerClick,onStickerKeyDown:this.props.onStickerKeyDown,recentStickers:[],stickerInterface:this.props.stickerInterface,size:this.props.size}))}.bind(this)})}else return c("React").createElement(c("react-relay/classic/container/RelayRootContainer"),{Component:c("StickersFlyoutTags.react"),route:new(c("StickersFlyoutTagsRoute"))(),renderLoading:function w(){return v},renderFetched:function(w){return c("React").createElement(c("StickersFlyoutTags.react"),babelHelpers["extends"]({},w,{height:s-o,inputDisabled:u.length===1,onTagSelect:this._selectTag,width:t-16}))}.bind(this)})},_onScroll:function r(s){this.setState({isScrolling:!!s})},_selectTag:function r(s){new(c("StickersTypedLogger"))().setEvent("select_tag").setTagid(s.id).log();this.setState({tagChosen:true,input:c("StickerUtils").capitalizeWords(s.name)});this._focusInput()},_normalizeInput:function r(s){return s.trim().replace(/\s+/," ").toLowerCase()},_handleResetButtonClick:function r(s){s.preventDefault();this.setState(this.getInitialState())},_inputChanged:function r(s){this.setState({input:s.target.value,tagChosen:false,isScrolling:false})},_focusInput:function r(){this.refs.inputField.focusInput&&this.refs.inputField.focusInput()},_onStickerClick:function r(s,event){this.props.onStickerClick(s,event);try{if(c("Banzai").isEnabled("sticker_search_ranking")){var t={query:this._normalizeInput(this.state.input),sticker_id:s.id};c("Banzai").post("sticker_search_click",t,c("Banzai").VITAL)}}catch(u){}}});f.exports=q}),null);
__d("StickersFlyout.react",["cx","fbt","AddCommentFlyoutSizeType","Keys","MessagesEmoticons.react","ReactComponentWithPureRenderMixin","PureStoreBasedStateMixin","React","react-relay/classic/container/RelayRootContainer","StickerConstants","StickersActions","StickersConfig","StickersFlyoutPackSelector.react","StickersFlyoutPackSelectorRoute","StickersFlyoutStickerSelector.react","StickersFlyoutStickersForPackRoute","StickersFlyoutStickersForMRUPackRoute","StickersFlyoutTagSelector.react","StickerInterfaces","StickersStateStore","StickersDispatcher","StickersTypedLogger","XUISpinner.react","idx","getObjectValues","joinClasses"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=c("React").PropTypes,k=c("StickerConstants").SEARCH_PACK_ID,l=["Enter"," "],m=c("React").createClass({displayName:"StickersFlyout",mixins:[c("ReactComponentWithPureRenderMixin"),c("PureStoreBasedStateMixin")(c("StickersStateStore"))],statics:{calculateState:function n(){var o=c("StickersStateStore").getState();return{packID:o.get("trayPackID"),trayLoaded:o.get("trayLoaded")}}},propTypes:{stickerInterface:j.oneOf(c("getObjectValues")(c("StickerInterfaces"))),onStickerSelect:j.func.isRequired,onEmoticonSelect:j.func,onShown:j.func,onHidden:j.func,onEscKeyDown:j.func,shown:j.bool,size:j.oneOf(Object.values(c("AddCommentFlyoutSizeType")))},getDefaultProps:function n(){return{stickerInterface:c("StickerInterfaces").MESSAGES,shown:false,size:c("AddCommentFlyoutSizeType").SMALL}},componentWillMount:function n(){c("StickersDispatcher").explicitlyRegisterStores([c("StickersStateStore")])},componentDidMount:function n(){if(this.props.shown)this._onShown()},componentWillReceiveProps:function n(o){if(o.shown)this._onShownWrapper();else this._onHidden()},componentDidUpdate:function n(o){if(!o.shown&&this.props.shown)this._onShown();else if(o.shown&&!this.props.shown)this._onHidden()},_onShownWrapper:function n(){if(this.props.onShown)this.props.onShown(this._onShown);else this._onShown()},_onShown:function n(){new(c("StickersTypedLogger"))().setEvent("open_tray").log()},_onHidden:function n(){this.props.onHidden&&this.props.onHidden()},_onKeyDown:function n(event){if(event.keyCode===c("Keys").ESC&&this.props.onEscKeyDown){event.stopPropagation();event.preventDefault();this.props.onEscKeyDown()}},_onKeyPress:function n(event){if(this.state.packID!==k&&l.indexOf(event.key)===-1)c("StickersActions").selectTrayPack(k)},loadPack:function n(){__p&&__p();var o=c("React").createElement("div",{className:"_e0r"},c("React").createElement(c("XUISpinner.react"),{size:"large"}));if(!this.state.trayLoaded)return o;if(this.state.packID===c("StickerConstants").EMOTICON_PACK_ID)return c("React").createElement("div",{className:"_5r8l","data-id":this.state.packID},c("React").createElement(c("MessagesEmoticons.react"),{onEmoticonSelect:this.props.onEmoticonSelect}));if(this.state.packID===k&&c("StickersConfig").search_pack)return c("React").createElement("div",{className:"_5r8l"},c("React").createElement(c("StickersFlyoutTagSelector.react"),{className:"fbStickersFlyoutTagSelector",stickerInterface:this.props.stickerInterface,shown:this.props.shown,onStickerClick:this._onStickerClick,onStickerKeyDown:this._onStickerKeyDown,size:this.props.size}));var p=this.state.packID===c("StickerConstants").MRU_STICKER_PACK?new(c("StickersFlyoutStickersForMRUPackRoute"))():new(c("StickersFlyoutStickersForPackRoute"))({id:this.state.packID});return c("React").createElement("div",{className:"_5r8l","data-id":this.state.packID},c("React").createElement(c("react-relay/classic/container/RelayRootContainer"),{Component:c("StickersFlyoutStickerSelector.react"),route:p,renderLoading:function q(){return o},renderFetched:function(q){return c("React").createElement(c("StickersFlyoutStickerSelector.react"),babelHelpers["extends"]({},q,{recentStickers:c("StickersStateStore").getState().get("recentStickers"),stickerInterface:this.props.stickerInterface,onStickerClick:this._onStickerClick,onStickerKeyDown:this._onStickerKeyDown,size:this.props.size}))}.bind(this)}))},_onStickerClick:function n(o,event){var p;if(c("StickersStateStore").getState().get("recentStickersLoaded"))c("StickersActions").addRecentSticker(o);this.props.onStickerSelect(o.id,event,{label:o.label,uri:(p=o)!=null?(p=p.image)!=null?p.uri:p:p})},_onStickerKeyDown:function n(o,event){if(event.keyCode===c("Keys").RETURN){event.stopPropagation();event.preventDefault();this.props.onStickerSelect(o.id,event,{label:o.label})}},render:function n(){return c("React").createElement("div",{"aria-label":i._("Stickers"),className:c("joinClasses")(this.props.className,"_5r8f"),onKeyDown:this._onKeyDown,onKeyPress:this._onKeyPress,role:"dialog"},c("React").createElement("div",{className:"_5r8e"},c("React").createElement(c("react-relay/classic/container/RelayRootContainer"),{Component:c("StickersFlyoutPackSelector.react"),route:new(c("StickersFlyoutPackSelectorRoute"))({stickerInterface:this.props.stickerInterface}),renderFetched:function(o){return c("React").createElement(c("StickersFlyoutPackSelector.react"),babelHelpers["extends"]({},o,{selectedPackID:this.state.packID,stickerInterface:this.props.stickerInterface,shown:this.props.shown}))}.bind(this)})),c("React").createElement("div",{className:"_5r8m"},this.loadPack()))}});f.exports=m}),null);