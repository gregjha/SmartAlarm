if (self.CavalryLogger) { CavalryLogger.start_js(["\/tmhn"]); }

__d("MercuryDelayedDispatcher",["MercuryDispatcher","MercuryServerPayloadPreprocessor","MercuryServerRequests","MercurySingletonProvider","MercuryThreadIDMap"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(j){this.$MercuryDelayedDispatcher1=j;this.$MercuryDelayedDispatcher2=[];this.$MercuryDelayedDispatcher3=c("MercuryThreadIDMap").getForFBID(this.$MercuryDelayedDispatcher1);this.$MercuryDelayedDispatcher4=c("MercuryDispatcher").getForFBID(this.$MercuryDelayedDispatcher1);this.$MercuryDelayedDispatcher5=c("MercuryServerRequests").getForFBID(this.$MercuryDelayedDispatcher1);this.$MercuryDelayedDispatcher6=c("MercuryServerPayloadPreprocessor").getForFBID(this.$MercuryDelayedDispatcher1);this.$MercuryDelayedDispatcher4.subscribe("model-update-completed",function(k,l){return this.$MercuryDelayedDispatcher7()}.bind(this))}h.getForFBID=function(j){return i.getForFBID(j)};h.get=function(){return i.get()};h.prototype.handleUpdateWaitForThread=function(j,k){var l=this.$MercuryDelayedDispatcher3.getClientIDFromServerIDNow(k);if(l){this.$MercuryDelayedDispatcher8(j);return}this.$MercuryDelayedDispatcher3.getClientIDFromServerID(k,function(){return this.$MercuryDelayedDispatcher2.push({thread_fbid:k,payload:j})}.bind(this));this.$MercuryDelayedDispatcher5.ensureThreadIsFetched(k)};h.prototype.$MercuryDelayedDispatcher7=function(){if(this.$MercuryDelayedDispatcher2&&this.$MercuryDelayedDispatcher2.length){var j=this.$MercuryDelayedDispatcher2.shift(),k=j.thread_fbid,l=j.payload;this.handleUpdateWaitForThread(l,k)}};h.prototype.$MercuryDelayedDispatcher8=function(j){if(j.from_client)this.$MercuryDelayedDispatcher4.handleUpdate(j);else this.$MercuryDelayedDispatcher6.handleUpdate(j)};var i=new(c("MercurySingletonProvider"))(h);f.exports=h}),null);