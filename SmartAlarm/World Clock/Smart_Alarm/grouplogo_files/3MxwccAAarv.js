if (self.CavalryLogger) { CavalryLogger.start_js(["AF3\/U"]); }

__d("MessengerMount",["cx","Bootloader","CSS","ChannelConnection","ChannelManager","CurrentUser","HotLikeSound","InstantGamesGateKeepers","mercuryBlockedParticipantsRe","mercuryIgnoredParticipantsRe","MercuryDelayedRoger","MercuryDeliveryReceiptsRe","MercuryDeliveryState","MercuryOrderedThreadlist","MercuryParticipants","MercuryServerPayloadPreprocessor","MercurySyncEnvironment","MercuryThreads","MercuryThreadIDMap","MercuryUnreadState","MercuryUnseenState","messengerReact","MessengerActions","MessengerAsyncWrapper","messengerDialogsRe","MessengerAttributionTagsStore","MessengerComposerActions","MessengerBrowserAlerts","MessengerComposerStore","MessengerConfig","MessengerEnvironment","messengerInitialDataTransformerRe","MessengerMDotMeReferralStore","MessengerPage","MessengerRTCMessageHandler","MessengerSettingsStore","messengerSearchConfirmationDialogReact","MessengerStateStore","MessengerThreadSearchStore","MessengerURIListener","MessengerURIConstants","MessengerURISerializer","MessengerView","MNPlatformTagsDataManager","OmniMStore","React","ReactDOM","URI","gkx","goURI","OrderedFriendsList","PageHooks"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i=c("MercuryDelayedRoger").get(),j=c("messengerReact").jsComponent,k=c("messengerSearchConfirmationDialogReact").jsComponent;c("OrderedFriendsList");c("PageHooks");c("ChannelManager").startChannelManager();var l={mount:function q(r,s){__p&&__p();c("MessengerEnvironment").setMessengerUI(true);c("MessengerPage").emit(c("MessengerPage").Events.JS_LOADED);var t=c("CurrentUser").getID();m(t);n(t);o(t,s);c("MessengerPage").emit(c("MessengerPage").Events.DATA_INITIALIZED);if(document.documentElement)c("CSS").addClass(document.documentElement,"_51l0");if(document.body){var u=document.body;c("CSS").addClass(u,"_z4_");if(c("MessengerConfig").SFFontEnabled)c("CSS").addClass(u,"__6g");if(c("MessengerConfig").SegoeUIDisabled)c("CSS").addClass(u,"_2por");if(c("MessengerEnvironment").facebookdotcom)c("CSS").addClass(u,"_mvg")}c("HotLikeSound").setCheckSoundEnabledFunc(function(){return c("MessengerSettingsStore").getSettings().sound_enabled});c("ReactDOM").render(c("React").createElement(c("MessengerAsyncWrapper"),null,c("React").createElement(j,{employeeData:s.employeeData,facebookNotificationTokens:s.facebookNotificationTokens,showWorkchatUpsellBanner:s.showWorkchatUpsellBanner,promotionData:s.promotionData,isFirstRedirect:!c("gkx")("AT71LRcbgltkBEoVFCCCdNV29c5_0WezosqmKxl4WEXk8XQNpOgP_oLFicsbGWor0e-3lTCNH9el3cQIDbyD2Ry3"),viewer:t,onMount:function v(){return p(s)}})),r)}};function m(q){__p&&__p();i;c("MercuryDeliveryReceiptsRe").getForFBID(q);c("MercuryDeliveryState").getForFBID(q);c("MercuryOrderedThreadlist").getForFBID(q);c("MercuryParticipants");c("mercuryBlockedParticipantsRe").getForFBID(q);c("mercuryIgnoredParticipantsRe").getForFBID(q);c("MercuryThreads").getForFBID(q);c("MercuryUnreadState").getForFBID(q);c("MercuryUnseenState").getForFBID(q);c("MessengerAttributionTagsStore");c("MessengerComposerStore");c("MessengerMDotMeReferralStore");c("MessengerSettingsStore");c("MessengerStateStore");c("MessengerThreadSearchStore").getForFBID(q)}function n(q){c("MessengerURIListener").start();c("MercurySyncEnvironment").setUp();c("MessengerBrowserAlerts").init(q);c("MessengerRTCMessageHandler").init();c("ChannelConnection");c("OmniMStore").setUp()}function o(q,r){__p&&__p();var s,t=c("MercuryServerPayloadPreprocessor").getForFBID(q),u=r.lastReadThreadKey;if(r.graphqlPayload){var v=c("messengerInitialDataTransformerRe").transform(r.graphqlPayload),w=v[0];u=v[1];w.message_blocked_ids=r.mercuryPayload.message_blocked_ids;t.handleUpdate(w)}else t.handleUpdate(r.mercuryPayload);var x=new(c("URI"))(window.location.href),y=c("MessengerURISerializer").deserialize(x);if(y.query)(function(){var B=y.masterView===c("MessengerView").MASTER.SEARCH,C=y.query;y.query=null;y.masterView=c("MessengerView").MASTER.RECENT;c("messengerDialogsRe").showDialog(function(){return c("React").createElement(k,{term:C,onSearch:function D(){c("messengerDialogsRe").removeAllDialogs();B?c("MessengerActions").changeQueryAll(C):c("MessengerActions").changeQuery(C)}})})})();c("goURI")(c("MessengerURISerializer").serialize(y),false,true);if(x.getPath().match(c("MessengerURIConstants").COMPOSE_SUBPATH+"/?$"))return;if(y.masterView===c("MessengerView").MASTER.PAYMENT)return;c("MessengerActions").changeMDotMeReferral(r.mDotMeReferral,r.mDotMeReferralThreadKey);var z=c("MercuryThreadIDMap").get(),A=z.getClientIDFromServerIDNow(u);if(A){c("MessengerComposerActions").exitComposeState();c("MessengerActions").selectThread(A)}else if(x.getPath()==="/")c("MessengerActions").changeDetailView(c("MessengerView").DETAIL.COMPOSE);c("MNPlatformTagsDataManager").updateThreadTabAfterSelectThread(r.messagingSource,r.mDotMeReferralThreadKey&&r.mDotMeReferralThreadKey.toString())}function p(q){__p&&__p();c("MessengerPage").emit(c("MessengerPage").Events.APP_MOUNTED);if(q.gameData&&q.gameData.gameID&&c("InstantGamesGateKeepers").messenger_dot_com_shareable_link_open_game)c("Bootloader").loadModules(["MessengerGamesQuicksilverPlayerContainer.react","InstantGameContextType","QuicksilverSources"],function(r,s,t){var u=null,v=s.SOLO;if(q.gameData.contextSourceID){u=q.gameData.contextSourceID;v=s.THREAD}c("messengerDialogsRe").showDialog(function(){return c("React").createElement(r,{contextSourceID:u,contextType:v,onHide:function w(){return c("messengerDialogsRe").removeAllDialogs()},gameID:q.gameData.gameID,source:t.M_ME_LINK,sourceID:null})})},"MessengerMount")}f.exports=l}),null);