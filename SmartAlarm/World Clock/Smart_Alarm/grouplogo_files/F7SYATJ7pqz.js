if (self.CavalryLogger) { CavalryLogger.start_js(["KHEvr"]); }

__d("MessengerEditorStateManager",["CacheStorage","ComposedEntityMutability","ComposedEntityMutabilityToName","ComposedEntityTypeToName","DraftEntityInstance","EditorState","MessengerConstants","SelectionState","decodeBlocks","encodeBlocks","mapObject"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=new(c("CacheStorage"))("localstorage"),i=c("ComposedEntityMutability").IMMUTABLE,j=void 0,k={get:function l(m){__p&&__p();if(!m)return this._getEmptyEditorState();if(m===c("MessengerConstants").NEW_THREAD_KEY)return j||this._getEmptyEditorState();var n=h.get(m,false);if(!n)return this._getEmptyEditorState();var o=n.encodedBlocks,p=c("mapObject")(o.entityMap,function(s,t){return new(c("DraftEntityInstance"))({type:c("ComposedEntityTypeToName")[s.type],mutability:c("ComposedEntityMutabilityToName")[i],data:s.data})}),q=c("decodeBlocks")(o.blocks,p),r=c("EditorState").createWithContent(q);return c("EditorState").acceptSelection(r,new(c("SelectionState"))(n.selection))},set:function l(m,n){if(m===c("MessengerConstants").NEW_THREAD_KEY){j=n;return}var o=c("encodeBlocks")(n.getCurrentContent()),p=n.getSelection().toJS();h.set(m,{encodedBlocks:o,selection:p})},_getEmptyEditorState:function l(){var m=c("EditorState").createEmpty();return c("EditorState").forceSelection(m,m.getSelection())}};f.exports=k}),null);