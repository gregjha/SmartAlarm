if (self.CavalryLogger) { CavalryLogger.start_js(["dZRHK"]); }

__d("MessengerSharedFilesContainer.react",["fbt","messengerInfoPanelSectionReact","MessengerSharedFiles.react","React","RelayClassic","react-relay/classic/query/RelayQL"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i=c("messengerInfoPanelSectionReact").jsComponent,j=c("React").PropTypes,k=10,l=c("React").createClass({displayName:"MessengerSharedFilesContainer",propTypes:{sharedFiles:j.object,threadFBID:j.string,isCollapsed:j.bool,onToggle:j.func,relay:j.object},getInitialState:function m(){var n=true;if(this.props.sharedFiles)n=this.props.sharedFiles.message_shared_media.count<=k;return{isAllFilesShown:n,isLoadingFiles:false}},_toggleExpand:function m(){if(this.state.isLoadingFiles||!this.props.sharedFiles)return;var n=this.props.sharedFiles.message_shared_media,o=n.count,p=this.state.isAllFilesShown;this.setState({isLoadingFiles:true},function(){if(this.props.relay)this.props.relay.setVariables({count:p?k:o},function(q){if(q.done||q.aborted)this.setState({isAllFilesShown:!p,isLoadingFiles:false})}.bind(this))}.bind(this))},render:function m(){var n=this.props,o=n.sharedFiles,p=n.threadFBID,q=n.isCollapsed,r=n.onToggle;if(!p||!o)return null;var s=o.message_shared_media;if(!s||s.count===0)return null;return c("React").createElement(i,{isCollapsible:true,isCollapsed:q,onToggle:r,title:h._("Shared Files")},c("React").createElement(c("MessengerSharedFiles.react"),{isExpanded:this.state.isAllFilesShown,hasOverflow:s.count>k,isLoadingFiles:this.state.isLoadingFiles,toggleExpand:this._toggleExpand,sharedFiles:s,threadFBID:p}))}});f.exports=c("RelayClassic").createContainer(l,{initialVariables:{count:k},fragments:{sharedFiles:function m(){return function(n){return{children:[{calls:[{kind:"Call",metadata:{type:"MessageMediaType"},name:"message_shared_media_type",value:{kind:"CallValue",callValue:"FILE"}},{kind:"Call",metadata:{type:"Int"},name:"first",value:{kind:"CallVariable",callVariableName:"count"}}],children:[].concat.apply([],[{fieldName:"count",kind:"Field",metadata:{},type:"Int"},c("react-relay/classic/query/RelayQL").__frag(n)]),fieldName:"message_shared_media",kind:"Field",metadata:{canHaveSubselections:true,isConnection:true,isFindable:true},type:"MessageSharedMediaConnection"},{fieldName:"id",kind:"Field",metadata:{isGenerated:true,isRequisite:true},type:"ID"}],id:c("react-relay/classic/query/RelayQL").__id(),kind:"Fragment",metadata:{},name:"MessengerSharedFilesContainer_react_SharedFilesRelayQL",type:"MessageThread"}}(c("MessengerSharedFiles.react").getFragment("sharedFiles"))}}})}),null);