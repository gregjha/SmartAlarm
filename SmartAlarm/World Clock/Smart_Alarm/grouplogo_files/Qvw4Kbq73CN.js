if (self.CavalryLogger) { CavalryLogger.start_js(["br1em"]); }

__d("wrapNullableForReact",[],(function a(b,c,d,e,f,g){"use strict";function h(i){if(i!=null)return i;else return undefined}f.exports=h}),null);
__d("PhotoResizeMath",[],(function a(b,c,d,e,f,g){__p&&__p();var h={getScaledPhotoDimensions:function i(j,k,l,m,n){var o=j/k,p=l/m;if(l&&m&&n==="stretch")return{width:l,height:m};if(!l&&m||n==="contain"!==o>=p)return{width:m*o,height:m};if(l)return{width:l,height:l/o};return{width:j,height:k}}};f.exports=h}),null);
__d("PixelzFocus",[],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h={search:function i(j,k){__p&&__p();var l=0,m=j.length-1;while(l<=m){var n=l+Math.floor((m-l)/2),o=j[n];if(o>k)m=n-1;else if(o<k)l=n+1;else return n}return Math.min(l,m)},forceSpecificPoint:function i(j,k,l){var m=1e-9,n=h.search(j,k-l-m)+1,o=h.search(j,k+l);return j.slice(n,o+1)},findBiggestSets:function i(j,k){__p&&__p();var l=[],m=-1;for(var n=0;n<j.length;++n){var o=j[n],p=n,q=h.search(j,o+k),r=q-p;if(r>m)l=[];if(r>=m){m=r;l.push({low:p,high:q})}}return l},getBestSet:function i(j,k,l){var m=-1,n=null;for(var o=0;o<k.length;++o){var p=k[o],q=j[p.low],r=j[p.high],s=q+(r-q)/2,t=Math.min(q-(s-l),s+l-r);if(t>m){m=t;n=p}}return n},getFocusFromSet:function i(j,k){var l=j[k.low],m=j[k.high];return l+(m-l)/2},clampFocus:function i(j,k){var l=k/2,m=1-k/2;if(j<l)return l;if(j>m)return m;return j},convertFromCenterToCSS:function i(j,k){if(Math.abs(1-k)<1e-5)return 0;return(j-k/2)/(1-k)},convertFromCSSToCenter:function i(j,k){return j*(1-k)+k/2},getVisible:function i(j,k){if(j<k)return j/k;return k/j},getHidden:function i(j,k){return 1-h.getVisible(j,k)},focusHorizontally:function i(j,k){return j<k},convertVectorFromCenterToCSS:function i(j,k,l){var m=h.focusHorizontally(k,l),n=void 0;if(m)n=j.x/100;else n=j.x/100;var o=h.convertFromCenterToCSS(n,h.getVisible(k,l));if(m)return{x:o,y:0};else return{x:0,y:o}},getCropRect:function i(j,k,l){var m=h.focusHorizontally(k,l),n=h.getVisible(k,l);if(m){var o=(1-n)*j.x;return{left:o,top:0,width:n,height:1}}else{var p=(1-n)*j.y;return{left:0,top:p,width:1,height:n}}}};f.exports=h}),null);
__d("loadImage",["Promise"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(i,j){var k=new Image();k.onload=function(){j(k.width,k.height,k)};k.src=i}h.loadImagePromise=function(i){return new(c("Promise"))(function(j,k){var l=new Image();l.onerror=k;l.onload=function(){return j(l)};l.src=i})};f.exports=h}),null);
__d("Pixelz.react",["cx","loadImage","joinClasses","React","PhotoResizeMath","PixelzFocus"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i=c("React").PropTypes,j=c("React").createClass({displayName:"Pixelz",propTypes:{width:i.number,height:i.number,resizeMode:i.oneOf(["contain","cover","stretch"]),alt:i.string,letterbox:i.bool,borderRadius:i.number,insetBorderColor:i.string,animated:i.bool,upscale:i.bool,cropRect:function k(l,m,n){var o=l[m],p="Invalid prop `"+m+"` supplied to `"+n+"`, expected a rectangle with values normalized between 0 and 1.";if(o.left<0||o.top<0||o.width<0||o.height<0||o.left+o.width>1||o.top+o.height>1)return new Error(p)},focus:function k(l,m,n){__p&&__p();var k=l[m],o="Invalid prop `"+m+"` supplied to `"+n+"`, expected either a {x, y, type} vector where type is `css` or `center` or an array of {x, y} vectors. All the vectors have with values normalized between 0 and 1.";if(Array.isArray(k)){for(var p=0;p<k.length;++p)if(!(k[p].x>=0&&k[p].x<=1)||!(k[p].y>=0&&k[p].y<=1))return new Error(o)}else{if(!k.type)k.type="css";if(!(k.x>=0&&k.x<=1)||!(k.y>=0&&k.y<=1)||!["center","css"].includes(k.type))return new Error(o)}}},getDefaultProps:function k(){return{resizeMode:"cover",alt:"",letterbox:true,upscale:true,cropRect:{width:1,height:1,top:0,left:0},focus:{x:.5,y:.5,type:"css"}}},getInitialState:function k(){return{srcDimensions:{}}},getSrcDimensions:function k(){var l=this.props.src,m=this.state.srcDimensions[l];if(m)return m;c("loadImage")(l,function(n,o){var p={};p[l]={width:n,height:o};this.isMounted()&&this.setState({srcDimensions:p})}.bind(this));return null},getCropSrcDimensions:function k(){var l=this.getSrcDimensions();return{width:l.width*this.props.cropRect.width,height:l.height*this.props.cropRect.height}},getUpscaleCropDimensions:function k(){var l=this.getCropSrcDimensions();return c("PhotoResizeMath").getScaledPhotoDimensions(l.width,l.height,this.props.width,this.props.height,this.props.resizeMode)},getCropDimensions:function k(){var l=this.getUpscaleCropDimensions(),m=this.getCropSrcDimensions();if(!this.props.upscale)return{width:Math.min(l.width,m.width),height:Math.min(l.height,m.height)};return l},getCropAspectRatio:function k(){var l=this.getCropDimensions();return l.width/l.height},getContainerDimensions:function k(){if(this.props.letterbox&&this.props.width&&this.props.height)return{width:this.props.width,height:this.props.height};return this.getCropDimensions()},getContainerAspectRatio:function k(){var l=this.getContainerDimensions();return l.width/l.height},getContainerPosition:function k(){return{left:0,top:0}},getFocus:function k(){__p&&__p();var l=this.props.focus;if(!Array.isArray(l)&&l.type==="css")return{x:l.x,y:l.y};var m=this.getContainerAspectRatio(),n=this.getCropAspectRatio(),o=c("PixelzFocus").getVisible(m,n),p=c("PixelzFocus").focusHorizontally(m,n),q=void 0;if(!Array.isArray(l))q=c("PixelzFocus").convertFromCenterToCSS(p?l.x:l.y,o);else{var r=l.map(function(u){return p?u.x:u.y});r.sort();var s=c("PixelzFocus").findBiggestSets(r,o),t=c("PixelzFocus").getBestSet(r,s,o);q=c("PixelzFocus").getFocusFromSet(r,t)}return{x:p?q:.5,y:p?.5:q}},getCropPosition:function k(){var l=this.getCropDimensions(),m=this.getContainerDimensions(),n=this.getFocus();return{left:n.x*(m.width-l.width),top:n.y*(m.height-l.height)}},getScaleDimensions:function k(){var l=this.getCropDimensions();return{width:l.width/this.props.cropRect.width,height:l.height/this.props.cropRect.height}},getScalePosition:function k(){var l=this.getScaleDimensions();return{left:-l.width*this.props.cropRect.left,top:-l.height*this.props.cropRect.top}},getClipCropRectangle:function k(){var l=this.getContainerDimensions(),m=this.getCropDimensions(),n=this.getContainerPosition(),o=this.getCropPosition(),p=Math.max(n.left,o.left),q=Math.max(n.top,o.top),r=Math.min(n.top+l.height,o.top+m.height),s=Math.min(n.left+l.width,o.left+m.width);return{left:p,top:q,width:s-p,height:r-q}},getClipCropPosition:function k(){var l=this.getClipCropRectangle();return{left:l.left,top:l.top}},getClipCropDimensions:function k(){var l=this.getClipCropRectangle();return{width:l.width,height:l.height}},getClipScalePosition:function k(){var l=this.getScalePosition(),m=this.getClipCropPosition(),n=this.getCropPosition();return{left:l.left+(n.left-m.left),top:l.top+(n.top-m.top)}},getClipScaleDimensions:function k(){return this.getScaleDimensions()},areDimensionsEqual:function k(l,m){return l.width===m.width&&l.height===m.height},shouldAddAllNodesAndStyles:function k(){return this.props.animated},hasCrop:function k(){if(this.shouldAddAllNodesAndStyles())return true;var l=this.getContainerDimensions(),m=this.getClipCropDimensions(),n=this.getClipScaleDimensions();if(this.areDimensionsEqual(l,m)||this.areDimensionsEqual(m,n))return false;return true},hasContainer:function k(){if(this.shouldAddAllNodesAndStyles()||this.hasInsetBorder())return true;var l=this.getContainerDimensions(),m=this.getClipScaleDimensions();if(this.areDimensionsEqual(l,m))return false;return true},hasInsetBorder:function k(){return this.shouldAddAllNodesAndStyles()||this.props.insetBorderColor},applyPositionStyle:function k(l,m){if(this.shouldAddAllNodesAndStyles()||m.left)l.left=Math.round(m.left);if(this.shouldAddAllNodesAndStyles()||m.top)l.top=Math.round(m.top)},applyDimensionsStyle:function k(l,m){l.width=Math.round(m.width);l.height=Math.round(m.height)},applyBorderRadiusStyle:function k(l){if(this.shouldAddAllNodesAndStyles()||this.props.borderRadius)l.borderRadius=this.props.borderRadius||0},getScaleStyle:function k(){var l={},m=this.getClipCropDimensions(),n=this.getClipScaleDimensions();if(this.shouldAddAllNodesAndStyles()||!this.areDimensionsEqual(m,n))this.applyPositionStyle(l,this.getClipScalePosition());else this.applyPositionStyle(l,this.getClipCropPosition());this.applyDimensionsStyle(l,this.getClipScaleDimensions());this.applyBorderRadiusStyle(l);return l},getCropStyle:function k(){var l={};this.applyPositionStyle(l,this.getClipCropPosition());this.applyDimensionsStyle(l,this.getClipCropDimensions());this.applyBorderRadiusStyle(l);return l},getInsetBorderStyle:function k(){var l={borderColor:this.props.insetBorderColor||"transparent"};this.applyPositionStyle(l,this.getClipCropPosition());this.applyDimensionsStyle(l,this.getClipCropDimensions());this.applyBorderRadiusStyle(l);return l},getContainerStyle:function k(){var l={};this.applyDimensionsStyle(l,this.getContainerDimensions());this.applyBorderRadiusStyle(l);return l},getScale:function k(){var l=this.getScaleStyle(),m=l.width,n=l.height;l=babelHelpers["extends"]({},l);delete l.width;delete l.height;return c("React").createElement("img",babelHelpers["extends"]({},this.props,{alt:this.props.alt,className:c("joinClasses")(this.props.className,"_56wb"+(this.shouldAddAllNodesAndStyles()?" _56t5":"")),src:this.props.src,style:babelHelpers["extends"]({},this.props.style||{},l),width:m,height:n}))},getCrop:function k(){var l=this.getScale();if(!this.hasCrop())return l;return c("React").createElement("div",{className:"_56ma"+(this.shouldAddAllNodesAndStyles()?" _56t5":""),style:this.getCropStyle()},l)},getInsetBorder:function k(){if(!this.hasInsetBorder())return null;return c("React").createElement("div",{className:"_56lv"+(this.shouldAddAllNodesAndStyles()?" _56t5":""),style:this.getInsetBorderStyle()})},getContainer:function k(){var l=this.getCrop();if(!this.hasContainer())return l;var m=this.getInsetBorder();return c("React").createElement("div",{className:"_56jj"+(this.shouldAddAllNodesAndStyles()?" _56t5":""),"data-skipchecker":null,style:this.getContainerStyle()},l,m)},render:function k(){var l=this.getSrcDimensions();if(!l)return c("React").createElement("span",{"data-skipchecker":null});return this.getContainer()}});f.exports=j}),null);
__d("MessengerGraphQLTypeaheadAdapter_game.graphql",[],(function a(b,c,d,e,f,g){"use strict";var h={kind:"Fragment",name:"MessengerGraphQLTypeaheadAdapter_game",type:"Application",metadata:null,argumentDefinitions:[],selections:[{kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"name",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"instant_game_info",storageKey:null,args:null,concreteType:"GamesInstantPlayStyleInfo",plural:false,selections:[{kind:"ScalarField",alias:null,name:"icon_uri",args:null,storageKey:null}]}]};f.exports=h}),null);
__d("MessengerGraphQLTypeaheadAdapter_group.graphql",[],(function a(b,c,d,e,f,g){"use strict";var h=function(){var i={kind:"ScalarField",alias:null,name:"name",args:null,storageKey:null};return{kind:"Fragment",name:"MessengerGraphQLTypeaheadAdapter_group",type:"MessageThread",metadata:null,argumentDefinitions:[],selections:[{kind:"LinkedField",alias:null,name:"thread_key",storageKey:null,args:null,concreteType:"MessageThreadKey",plural:false,selections:[{kind:"ScalarField",alias:null,name:"thread_fbid",args:null,storageKey:null}]},i,{kind:"LinkedField",alias:null,name:"image",storageKey:null,args:null,concreteType:"Image",plural:false,selections:[{kind:"ScalarField",alias:null,name:"uri",args:null,storageKey:null}]},{kind:"ScalarField",alias:null,name:"is_group_thread",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"other_participants",storageKey:"other_participants(first:250)",args:[{kind:"Literal",name:"first",value:250,type:"Int"}],concreteType:"MessagingParticipantsOfThreadConnection",plural:false,selections:[{kind:"LinkedField",alias:null,name:"edges",storageKey:null,args:null,concreteType:"MessagingParticipantsOfThreadEdge",plural:true,selections:[{kind:"LinkedField",alias:null,name:"node",storageKey:null,args:null,concreteType:"MessagingParticipant",plural:false,selections:[{kind:"LinkedField",alias:null,name:"messaging_actor",storageKey:null,args:null,concreteType:null,plural:false,selections:[{kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},i,{kind:"InlineFragment",type:"User",selections:[{kind:"ScalarField",alias:null,name:"is_messenger_user",args:null,storageKey:null}]}]}]}]}]}]}}();f.exports=h}),null);
__d("MessengerGraphQLTypeaheadAdapter_page.graphql",[],(function a(b,c,d,e,f,g){"use strict";var h={kind:"Fragment",name:"MessengerGraphQLTypeaheadAdapter_page",type:"Page",metadata:null,argumentDefinitions:[],selections:[{kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"name",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"profile_picture",storageKey:"profile_picture(height:32,width:32)",args:[{kind:"Literal",name:"height",value:32,type:"Int"},{kind:"Literal",name:"width",value:32,type:"Int"}],concreteType:"Image",plural:false,selections:[{kind:"ScalarField",alias:null,name:"uri",args:null,storageKey:null}]},{kind:"ScalarField",alias:null,name:"url",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"is_messenger_user",args:null,storageKey:null}]};f.exports=h}),null);
__d("MessengerGraphQLTypeaheadAdapter_user.graphql",[],(function a(b,c,d,e,f,g){"use strict";var h=function(){var i={kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null};return{kind:"Fragment",name:"MessengerGraphQLTypeaheadAdapter_user",type:"User",metadata:null,argumentDefinitions:[],selections:[{kind:"LinkedField",alias:null,name:"messenger_contact",storageKey:null,args:null,concreteType:"Contact",plural:false,selections:[{kind:"ScalarField",alias:null,name:"is_on_viewer_contact_list",args:null,storageKey:null}]},i,{kind:"ScalarField",alias:null,name:"is_memorialized",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"is_viewer_friend",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"is_viewer_coworker",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"profile_picture",storageKey:"profile_picture(height:32,width:32)",args:[{kind:"Literal",name:"height",value:32,type:"Int"},{kind:"Literal",name:"width",value:32,type:"Int"}],concreteType:"Image",plural:false,selections:[{kind:"ScalarField",alias:null,name:"uri",args:null,storageKey:null}]},{kind:"ScalarField",alias:null,name:"name",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"url",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"is_messenger_user",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"is_work_user",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"viewer_affinity",args:null,storageKey:null},{kind:"LinkedField",alias:"members",name:"aloha_proxy_user_owners",storageKey:"aloha_proxy_user_owners(first:10)",args:[{kind:"Literal",name:"first",value:10,type:"Int"}],concreteType:"AlohaProxyUserToAlohaProxyUserOwnersConnection",plural:false,selections:[{kind:"LinkedField",alias:null,name:"edges",storageKey:null,args:null,concreteType:"AlohaProxyUserToAlohaProxyUserOwnersEdge",plural:true,selections:[{kind:"LinkedField",alias:null,name:"node",storageKey:null,args:null,concreteType:null,plural:false,selections:[i,{kind:"ScalarField",alias:"name",name:"aloha_user_name",args:null,storageKey:null}]}]}]}]}}();f.exports=h}),null);
__d("MessengerGraphQLTypeaheadViewQuery.graphql",[],(function a(b,c,d,e,f,g){"use strict";var h=function(){var i=[{kind:"LocalArgument",name:"queryString",type:"String!",defaultValue:null},{kind:"LocalArgument",name:"canViewerSendMoneyFilter",type:"Boolean",defaultValue:null},{kind:"LocalArgument",name:"localEntryIDs",type:"[ID]!",defaultValue:null},{kind:"LocalArgument",name:"maxThreadResults",type:"Int!",defaultValue:null},{kind:"LocalArgument",name:"shouldQueryGroups",type:"Boolean!",defaultValue:null},{kind:"LocalArgument",name:"shouldQueryPages",type:"Boolean!",defaultValue:null},{kind:"LocalArgument",name:"shouldQueryThreadName",type:"Boolean!",defaultValue:null},{kind:"LocalArgument",name:"shouldQueryParticipantIDs",type:"Boolean!",defaultValue:null},{kind:"LocalArgument",name:"shouldQueryParticipantNames",type:"Boolean!",defaultValue:null},{kind:"LocalArgument",name:"shouldQueryVCEndpoint",type:"Boolean!",defaultValue:null},{kind:"LocalArgument",name:"shouldQueryInternalBot",type:"Boolean!",defaultValue:null},{kind:"LocalArgument",name:"shouldQueryRoomsAudience",type:"Boolean!",defaultValue:null},{kind:"LocalArgument",name:"shouldSkipQueryUsers",type:"Boolean!",defaultValue:null},{kind:"LocalArgument",name:"threadFBID",type:"ID!",defaultValue:null}],j=[{kind:"Variable",name:"query",variableName:"queryString",type:"String!"}],k=[{kind:"Variable",name:"id",variableName:"threadFBID",type:"ID!"}],l={kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},m={kind:"Literal",name:"first",value:20,type:"Int"},n={kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null},o={kind:"ScalarField",alias:null,name:"name",args:null,storageKey:null},p=[{kind:"ScalarField",alias:null,name:"uri",args:null,storageKey:null}],q={kind:"LinkedField",alias:null,name:"profile_picture",storageKey:"profile_picture(height:32,width:32)",args:[{kind:"Literal",name:"height",value:32,type:"Int"},{kind:"Literal",name:"width",value:32,type:"Int"}],concreteType:"Image",plural:false,selections:p},r={kind:"ScalarField",alias:null,name:"url",args:null,storageKey:null},s={kind:"ScalarField",alias:null,name:"is_messenger_user",args:null,storageKey:null},t={kind:"InlineFragment",type:"Page",selections:[o,q,r,s,{kind:"ScalarField",alias:null,name:"category_type",args:null,storageKey:null}]},u=[{kind:"LinkedField",alias:null,name:"edges",storageKey:null,args:null,concreteType:"SearchableResultsEdge",plural:true,selections:[{kind:"LinkedField",alias:null,name:"node",storageKey:null,args:null,concreteType:null,plural:false,selections:[n,l,t]}]}],v={kind:"Literal",name:"first",value:10,type:"Int"},w=[{kind:"LinkedField",alias:null,name:"node",storageKey:null,args:null,concreteType:null,plural:false,selections:[n,l,{kind:"InlineFragment",type:"User",selections:[{kind:"LinkedField",alias:null,name:"messenger_contact",storageKey:null,args:null,concreteType:"Contact",plural:false,selections:[{kind:"ScalarField",alias:null,name:"is_on_viewer_contact_list",args:null,storageKey:null},l]},{kind:"ScalarField",alias:null,name:"is_memorialized",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"is_viewer_friend",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"is_viewer_coworker",args:null,storageKey:null},q,o,r,s,{kind:"ScalarField",alias:null,name:"is_work_user",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"viewer_affinity",args:null,storageKey:null},{kind:"LinkedField",alias:"members",name:"aloha_proxy_user_owners",storageKey:"aloha_proxy_user_owners(first:10)",args:[v],concreteType:"AlohaProxyUserToAlohaProxyUserOwnersConnection",plural:false,selections:[{kind:"LinkedField",alias:null,name:"edges",storageKey:null,args:null,concreteType:"AlohaProxyUserToAlohaProxyUserOwnersEdge",plural:true,selections:[{kind:"LinkedField",alias:null,name:"node",storageKey:null,args:null,concreteType:null,plural:false,selections:[n,l,{kind:"ScalarField",alias:"name",name:"aloha_user_name",args:null,storageKey:null}]}]}]}]}]}],x={kind:"Variable",name:"last",variableName:"maxThreadResults",type:"Int"},y=[{kind:"LinkedField",alias:null,name:"edges",storageKey:null,args:null,concreteType:"ViewerMessageThreadsEdge",plural:true,selections:[{kind:"LinkedField",alias:null,name:"node",storageKey:null,args:null,concreteType:"MessageThread",plural:false,selections:[{kind:"LinkedField",alias:null,name:"thread_key",storageKey:null,args:null,concreteType:"MessageThreadKey",plural:false,selections:[{kind:"ScalarField",alias:null,name:"thread_fbid",args:null,storageKey:null}]},o,{kind:"LinkedField",alias:null,name:"image",storageKey:null,args:null,concreteType:"Image",plural:false,selections:p},{kind:"ScalarField",alias:null,name:"is_group_thread",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"other_participants",storageKey:"other_participants(first:250)",args:[{kind:"Literal",name:"first",value:250,type:"Int"}],concreteType:"MessagingParticipantsOfThreadConnection",plural:false,selections:[{kind:"LinkedField",alias:null,name:"edges",storageKey:null,args:null,concreteType:"MessagingParticipantsOfThreadEdge",plural:true,selections:[{kind:"LinkedField",alias:null,name:"node",storageKey:null,args:null,concreteType:"MessagingParticipant",plural:false,selections:[{kind:"LinkedField",alias:null,name:"messaging_actor",storageKey:null,args:null,concreteType:null,plural:false,selections:[n,l,o,{kind:"InlineFragment",type:"User",selections:[s]}]},l]}]}]},l]}]}];return{kind:"Request",operationKind:"query",name:"MessengerGraphQLTypeaheadViewQuery",id:"1711741772224728",text:null,metadata:{},fragment:{kind:"Fragment",name:"MessengerGraphQLTypeaheadViewQuery",type:"Query",metadata:null,argumentDefinitions:i,selections:[{kind:"LinkedField",alias:"profiles",name:"entities_named",storageKey:null,args:j,concreteType:"SearchableEntitiesQuery",plural:false,selections:[{kind:"FragmentSpread",name:"MessengerTypeaheadResultView_profiles",args:null}]},{kind:"Condition",passingValue:true,condition:"shouldQueryRoomsAudience",selections:[{kind:"LinkedField",alias:"roomAudience",name:"message_thread",storageKey:null,args:k,concreteType:"MessageThread",plural:false,selections:[{kind:"FragmentSpread",name:"MessengerTypeaheadResultView_roomAudience",args:null}]}]},{kind:"Condition",passingValue:true,condition:"shouldQueryGroups",selections:[{kind:"LinkedField",alias:"groups",name:"__viewer_viewer",storageKey:null,args:null,concreteType:"Viewer",plural:false,selections:[{kind:"FragmentSpread",name:"MessengerTypeaheadResultView_groups",args:null}]}]}]},operation:{kind:"Operation",name:"MessengerGraphQLTypeaheadViewQuery",argumentDefinitions:i,selections:[{kind:"LinkedField",alias:"profiles",name:"entities_named",storageKey:null,args:j,concreteType:"SearchableEntitiesQuery",plural:false,selections:[l,{kind:"Condition",passingValue:true,condition:"shouldQueryInternalBot",selections:[{kind:"LinkedField",alias:"internal_bot_results",name:"search_results",storageKey:"search_results(first:20,internal_bot:true)",args:[m,{kind:"Literal",name:"internal_bot",value:true,type:"Boolean"}],concreteType:"SearchableResultsConnection",plural:false,selections:u}]},{kind:"Condition",passingValue:true,condition:"shouldQueryVCEndpoint",selections:[{kind:"LinkedField",alias:"vc_results",name:"search_results",storageKey:"search_results(first:20,vc_endpoint:true)",args:[m,{kind:"Literal",name:"vc_endpoint",value:true,type:"Boolean"}],concreteType:"SearchableResultsConnection",plural:false,selections:u}]},{kind:"Condition",passingValue:true,condition:"shouldQueryPages",selections:[{kind:"LinkedField",alias:"page_results",name:"search_results",storageKey:"search_results(first:5,include_games:true,messenger_commerce:true)",args:[{kind:"Literal",name:"first",value:5,type:"Int"},{kind:"Literal",name:"include_games",value:true,type:"Boolean"},{kind:"Literal",name:"messenger_commerce",value:true,type:"Boolean"}],concreteType:"SearchableResultsConnection",plural:false,selections:[{kind:"LinkedField",alias:null,name:"edges",storageKey:null,args:null,concreteType:"SearchableResultsEdge",plural:true,selections:[{kind:"LinkedField",alias:null,name:"node",storageKey:null,args:null,concreteType:null,plural:false,selections:[n,l,{kind:"InlineFragment",type:"Application",selections:[o,{kind:"LinkedField",alias:null,name:"instant_game_info",storageKey:null,args:null,concreteType:"GamesInstantPlayStyleInfo",plural:false,selections:[{kind:"ScalarField",alias:null,name:"icon_uri",args:null,storageKey:null}]}]},t]}]}]}]},{kind:"Condition",passingValue:false,condition:"shouldSkipQueryUsers",selections:[{kind:"LinkedField",alias:"user_results",name:"search_results",storageKey:null,args:[{kind:"Variable",name:"can_viewer_send_money",variableName:"canViewerSendMoneyFilter",type:"Boolean"},{kind:"Literal",name:"context",value:"web_messenger_composer",type:"SearchContext"},m,{kind:"Literal",name:"include_messenger_only_results_for_web_messenger",value:true,type:"Boolean"},{kind:"Literal",name:"of_type",value:["user"],type:"[SearchEntityType]"}],concreteType:"SearchableResultsConnection",plural:false,selections:[{kind:"LinkedField",alias:null,name:"edges",storageKey:null,args:null,concreteType:"SearchableResultsEdge",plural:true,selections:w}]}]}]},{kind:"Condition",passingValue:true,condition:"shouldQueryRoomsAudience",selections:[{kind:"LinkedField",alias:"roomAudience",name:"message_thread",storageKey:null,args:k,concreteType:"MessageThread",plural:false,selections:[l,{kind:"Condition",passingValue:true,condition:"shouldQueryRoomsAudience",selections:[{kind:"LinkedField",alias:"user_results",name:"messaging_audience_list",storageKey:null,args:[v,{kind:"Variable",name:"named",variableName:"queryString",type:"String"}],concreteType:"AllAudienceListOfMessageThreadConnection",plural:false,selections:[{kind:"LinkedField",alias:null,name:"edges",storageKey:null,args:null,concreteType:"AllAudienceListOfMessageThreadEdge",plural:true,selections:w}]}]}]}]},{kind:"Condition",passingValue:true,condition:"shouldQueryGroups",selections:[{kind:"LinkedField",alias:"groups",name:"viewer",storageKey:null,args:null,concreteType:"Viewer",plural:false,selections:[{kind:"Condition",passingValue:true,condition:"shouldQueryParticipantNames",selections:[{kind:"LinkedField",alias:"threads_matching_participant_names",name:"message_threads",storageKey:null,args:[x,{kind:"Literal",name:"with_group",value:true,type:"Boolean"},{kind:"Variable",name:"with_participants",variableName:"queryString",type:"String"}],concreteType:"ViewerMessageThreadsConnection",plural:false,selections:y}]},{kind:"Condition",passingValue:true,condition:"shouldQueryParticipantIDs",selections:[{kind:"LinkedField",alias:"threads_matching_participant_ids",name:"message_threads",storageKey:null,args:[x,{kind:"Variable",name:"with_participant_ids",variableName:"localEntryIDs",type:"[ID]"}],concreteType:"ViewerMessageThreadsConnection",plural:false,selections:y}]},{kind:"Condition",passingValue:true,condition:"shouldQueryThreadName",selections:[{kind:"LinkedField",alias:"threads_matching_name",name:"message_threads",storageKey:null,args:[x,{kind:"Variable",name:"with_thread_name",variableName:"queryString",type:"String"}],concreteType:"ViewerMessageThreadsConnection",plural:false,selections:y}]}]},{kind:"LinkedHandle",alias:"groups",name:"viewer",args:null,handle:"viewer",key:"",filters:null}]}]}}}();f.exports=h}),null);
__d("MessengerTypeaheadResultView_groups.graphql",[],(function a(b,c,d,e,f,g){"use strict";var h=function(){var i={kind:"Variable",name:"last",variableName:"maxThreadResults",type:"Int"},j={kind:"ScalarField",alias:null,name:"name",args:null,storageKey:null},k=[{kind:"LinkedField",alias:null,name:"edges",storageKey:null,args:null,concreteType:"ViewerMessageThreadsEdge",plural:true,selections:[{kind:"LinkedField",alias:null,name:"node",storageKey:null,args:null,concreteType:"MessageThread",plural:false,selections:[{kind:"LinkedField",alias:null,name:"thread_key",storageKey:null,args:null,concreteType:"MessageThreadKey",plural:false,selections:[{kind:"ScalarField",alias:null,name:"thread_fbid",args:null,storageKey:null}]},j,{kind:"LinkedField",alias:null,name:"image",storageKey:null,args:null,concreteType:"Image",plural:false,selections:[{kind:"ScalarField",alias:null,name:"uri",args:null,storageKey:null}]},{kind:"ScalarField",alias:null,name:"is_group_thread",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"other_participants",storageKey:"other_participants(first:250)",args:[{kind:"Literal",name:"first",value:250,type:"Int"}],concreteType:"MessagingParticipantsOfThreadConnection",plural:false,selections:[{kind:"LinkedField",alias:null,name:"edges",storageKey:null,args:null,concreteType:"MessagingParticipantsOfThreadEdge",plural:true,selections:[{kind:"LinkedField",alias:null,name:"node",storageKey:null,args:null,concreteType:"MessagingParticipant",plural:false,selections:[{kind:"LinkedField",alias:null,name:"messaging_actor",storageKey:null,args:null,concreteType:null,plural:false,selections:[{kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},j,{kind:"InlineFragment",type:"User",selections:[{kind:"ScalarField",alias:null,name:"is_messenger_user",args:null,storageKey:null}]}]}]}]}]}]}]}];return{kind:"Fragment",name:"MessengerTypeaheadResultView_groups",type:"Viewer",metadata:null,argumentDefinitions:[{kind:"RootArgument",name:"queryString",type:"String"},{kind:"RootArgument",name:"maxThreadResults",type:"Int"},{kind:"RootArgument",name:"shouldQueryThreadName",type:"Boolean"},{kind:"RootArgument",name:"localEntryIDs",type:"[ID]"},{kind:"RootArgument",name:"shouldQueryParticipantIDs",type:"Boolean"},{kind:"RootArgument",name:"shouldQueryParticipantNames",type:"Boolean"}],selections:[{kind:"Condition",passingValue:true,condition:"shouldQueryParticipantNames",selections:[{kind:"LinkedField",alias:"threads_matching_participant_names",name:"message_threads",storageKey:null,args:[i,{kind:"Literal",name:"with_group",value:true,type:"Boolean"},{kind:"Variable",name:"with_participants",variableName:"queryString",type:"String"}],concreteType:"ViewerMessageThreadsConnection",plural:false,selections:k}]},{kind:"Condition",passingValue:true,condition:"shouldQueryParticipantIDs",selections:[{kind:"LinkedField",alias:"threads_matching_participant_ids",name:"message_threads",storageKey:null,args:[i,{kind:"Variable",name:"with_participant_ids",variableName:"localEntryIDs",type:"[ID]"}],concreteType:"ViewerMessageThreadsConnection",plural:false,selections:k}]},{kind:"Condition",passingValue:true,condition:"shouldQueryThreadName",selections:[{kind:"LinkedField",alias:"threads_matching_name",name:"message_threads",storageKey:null,args:[i,{kind:"Variable",name:"with_thread_name",variableName:"queryString",type:"String"}],concreteType:"ViewerMessageThreadsConnection",plural:false,selections:k}]}]}}();f.exports=h}),null);
__d("MessengerTypeaheadResultView_profiles.graphql",[],(function a(b,c,d,e,f,g){"use strict";var h=function(){var i={kind:"Literal",name:"first",value:20,type:"Int"},j={kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},k={kind:"ScalarField",alias:null,name:"name",args:null,storageKey:null},l={kind:"LinkedField",alias:null,name:"profile_picture",storageKey:"profile_picture(height:32,width:32)",args:[{kind:"Literal",name:"height",value:32,type:"Int"},{kind:"Literal",name:"width",value:32,type:"Int"}],concreteType:"Image",plural:false,selections:[{kind:"ScalarField",alias:null,name:"uri",args:null,storageKey:null}]},m={kind:"ScalarField",alias:null,name:"url",args:null,storageKey:null},n={kind:"ScalarField",alias:null,name:"is_messenger_user",args:null,storageKey:null},o={kind:"InlineFragment",type:"Page",selections:[j,k,l,m,n,{kind:"ScalarField",alias:null,name:"category_type",args:null,storageKey:null}]},p=[{kind:"LinkedField",alias:null,name:"edges",storageKey:null,args:null,concreteType:"SearchableResultsEdge",plural:true,selections:[{kind:"LinkedField",alias:null,name:"node",storageKey:null,args:null,concreteType:null,plural:false,selections:[o]}]}];return{kind:"Fragment",name:"MessengerTypeaheadResultView_profiles",type:"SearchableEntitiesQuery",metadata:null,argumentDefinitions:[{kind:"RootArgument",name:"canViewerSendMoneyFilter",type:"Boolean"},{kind:"RootArgument",name:"shouldSkipQueryUsers",type:"Boolean"},{kind:"RootArgument",name:"shouldQueryPages",type:"Boolean"},{kind:"RootArgument",name:"shouldQueryVCEndpoint",type:"Boolean"},{kind:"RootArgument",name:"shouldQueryInternalBot",type:"Boolean"}],selections:[{kind:"Condition",passingValue:true,condition:"shouldQueryInternalBot",selections:[{kind:"LinkedField",alias:"internal_bot_results",name:"search_results",storageKey:"search_results(first:20,internal_bot:true)",args:[i,{kind:"Literal",name:"internal_bot",value:true,type:"Boolean"}],concreteType:"SearchableResultsConnection",plural:false,selections:p}]},{kind:"Condition",passingValue:true,condition:"shouldQueryVCEndpoint",selections:[{kind:"LinkedField",alias:"vc_results",name:"search_results",storageKey:"search_results(first:20,vc_endpoint:true)",args:[i,{kind:"Literal",name:"vc_endpoint",value:true,type:"Boolean"}],concreteType:"SearchableResultsConnection",plural:false,selections:p}]},{kind:"Condition",passingValue:true,condition:"shouldQueryPages",selections:[{kind:"LinkedField",alias:"page_results",name:"search_results",storageKey:"search_results(first:5,include_games:true,messenger_commerce:true)",args:[{kind:"Literal",name:"first",value:5,type:"Int"},{kind:"Literal",name:"include_games",value:true,type:"Boolean"},{kind:"Literal",name:"messenger_commerce",value:true,type:"Boolean"}],concreteType:"SearchableResultsConnection",plural:false,selections:[{kind:"LinkedField",alias:null,name:"edges",storageKey:null,args:null,concreteType:"SearchableResultsEdge",plural:true,selections:[{kind:"LinkedField",alias:null,name:"node",storageKey:null,args:null,concreteType:null,plural:false,selections:[{kind:"InlineFragment",type:"Application",selections:[j,k,{kind:"LinkedField",alias:null,name:"instant_game_info",storageKey:null,args:null,concreteType:"GamesInstantPlayStyleInfo",plural:false,selections:[{kind:"ScalarField",alias:null,name:"icon_uri",args:null,storageKey:null}]}]},o]}]}]}]},{kind:"Condition",passingValue:false,condition:"shouldSkipQueryUsers",selections:[{kind:"LinkedField",alias:"user_results",name:"search_results",storageKey:null,args:[{kind:"Variable",name:"can_viewer_send_money",variableName:"canViewerSendMoneyFilter",type:"Boolean"},{kind:"Literal",name:"context",value:"web_messenger_composer",type:"SearchContext"},i,{kind:"Literal",name:"include_messenger_only_results_for_web_messenger",value:true,type:"Boolean"},{kind:"Literal",name:"of_type",value:["user"],type:"[SearchEntityType]"}],concreteType:"SearchableResultsConnection",plural:false,selections:[{kind:"LinkedField",alias:null,name:"edges",storageKey:null,args:null,concreteType:"SearchableResultsEdge",plural:true,selections:[{kind:"LinkedField",alias:null,name:"node",storageKey:null,args:null,concreteType:null,plural:false,selections:[{kind:"InlineFragment",type:"User",selections:[{kind:"LinkedField",alias:null,name:"messenger_contact",storageKey:null,args:null,concreteType:"Contact",plural:false,selections:[{kind:"ScalarField",alias:null,name:"is_on_viewer_contact_list",args:null,storageKey:null}]},j,{kind:"ScalarField",alias:null,name:"is_memorialized",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"is_viewer_friend",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"is_viewer_coworker",args:null,storageKey:null},l,k,m,n,{kind:"ScalarField",alias:null,name:"is_work_user",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"viewer_affinity",args:null,storageKey:null},{kind:"LinkedField",alias:"members",name:"aloha_proxy_user_owners",storageKey:"aloha_proxy_user_owners(first:10)",args:[{kind:"Literal",name:"first",value:10,type:"Int"}],concreteType:"AlohaProxyUserToAlohaProxyUserOwnersConnection",plural:false,selections:[{kind:"LinkedField",alias:null,name:"edges",storageKey:null,args:null,concreteType:"AlohaProxyUserToAlohaProxyUserOwnersEdge",plural:true,selections:[{kind:"LinkedField",alias:null,name:"node",storageKey:null,args:null,concreteType:null,plural:false,selections:[j,{kind:"ScalarField",alias:"name",name:"aloha_user_name",args:null,storageKey:null}]}]}]}]}]}]}]}]}]}}();f.exports=h}),null);
__d("MessengerTypeaheadResultView_roomAudience.graphql",[],(function a(b,c,d,e,f,g){"use strict";var h=function(){var i={kind:"Literal",name:"first",value:10,type:"Int"},j={kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null};return{kind:"Fragment",name:"MessengerTypeaheadResultView_roomAudience",type:"MessageThread",metadata:null,argumentDefinitions:[{kind:"RootArgument",name:"queryString",type:"String"},{kind:"RootArgument",name:"shouldQueryRoomsAudience",type:"Boolean"}],selections:[{kind:"Condition",passingValue:true,condition:"shouldQueryRoomsAudience",selections:[{kind:"LinkedField",alias:"user_results",name:"messaging_audience_list",storageKey:null,args:[i,{kind:"Variable",name:"named",variableName:"queryString",type:"String"}],concreteType:"AllAudienceListOfMessageThreadConnection",plural:false,selections:[{kind:"LinkedField",alias:null,name:"edges",storageKey:null,args:null,concreteType:"AllAudienceListOfMessageThreadEdge",plural:true,selections:[{kind:"LinkedField",alias:null,name:"node",storageKey:null,args:null,concreteType:null,plural:false,selections:[{kind:"InlineFragment",type:"User",selections:[{kind:"LinkedField",alias:null,name:"messenger_contact",storageKey:null,args:null,concreteType:"Contact",plural:false,selections:[{kind:"ScalarField",alias:null,name:"is_on_viewer_contact_list",args:null,storageKey:null}]},j,{kind:"ScalarField",alias:null,name:"is_memorialized",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"is_viewer_friend",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"is_viewer_coworker",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"profile_picture",storageKey:"profile_picture(height:32,width:32)",args:[{kind:"Literal",name:"height",value:32,type:"Int"},{kind:"Literal",name:"width",value:32,type:"Int"}],concreteType:"Image",plural:false,selections:[{kind:"ScalarField",alias:null,name:"uri",args:null,storageKey:null}]},{kind:"ScalarField",alias:null,name:"name",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"url",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"is_messenger_user",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"is_work_user",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"viewer_affinity",args:null,storageKey:null},{kind:"LinkedField",alias:"members",name:"aloha_proxy_user_owners",storageKey:"aloha_proxy_user_owners(first:10)",args:[i],concreteType:"AlohaProxyUserToAlohaProxyUserOwnersConnection",plural:false,selections:[{kind:"LinkedField",alias:null,name:"edges",storageKey:null,args:null,concreteType:"AlohaProxyUserToAlohaProxyUserOwnersEdge",plural:true,selections:[{kind:"LinkedField",alias:null,name:"node",storageKey:null,args:null,concreteType:null,plural:false,selections:[j,{kind:"ScalarField",alias:"name",name:"aloha_user_name",args:null,storageKey:null}]}]}]}]}]}]}]}]}]}}();f.exports=h}),null);
__d("MessengerForwardChatFlowSharedAttachmentsTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(){this.clear()}h.prototype.log=function(){c("GeneratedLoggerUtils").log("logger:MessengerForwardChatFlowSharedAttachmentsLoggerConfig",this.$MessengerForwardChatFlowSharedAttachmentsTypedLogger1,c("Banzai").BASIC)};h.prototype.logVital=function(){c("GeneratedLoggerUtils").log("logger:MessengerForwardChatFlowSharedAttachmentsLoggerConfig",this.$MessengerForwardChatFlowSharedAttachmentsTypedLogger1,c("Banzai").VITAL)};h.prototype.clear=function(){this.$MessengerForwardChatFlowSharedAttachmentsTypedLogger1={};return this};h.prototype.updateData=function(j){this.$MessengerForwardChatFlowSharedAttachmentsTypedLogger1=babelHelpers["extends"]({},this.$MessengerForwardChatFlowSharedAttachmentsTypedLogger1,j);return this};h.prototype.setAttachmentID=function(j){this.$MessengerForwardChatFlowSharedAttachmentsTypedLogger1.attachment_id=j;return this};h.prototype.setAttachmentType=function(j){this.$MessengerForwardChatFlowSharedAttachmentsTypedLogger1.attachment_type=j;return this};h.prototype.setIsFromViewer=function(j){this.$MessengerForwardChatFlowSharedAttachmentsTypedLogger1.is_from_viewer=j;return this};h.prototype.setVC=function(j){this.$MessengerForwardChatFlowSharedAttachmentsTypedLogger1.vc=j;return this};h.prototype.updateExtraData=function(j){j=c("nullthrows")(c("GeneratedLoggerUtils").serializeMap(j));c("GeneratedLoggerUtils").checkExtraDataFieldNames(j,i);this.$MessengerForwardChatFlowSharedAttachmentsTypedLogger1=babelHelpers["extends"]({},this.$MessengerForwardChatFlowSharedAttachmentsTypedLogger1,j);return this};h.prototype.addToExtraData=function(j,k){var l={};l[j]=k;return this.updateExtraData(l)};var i={attachment_id:true,attachment_type:true,is_from_viewer:true,vc:true};f.exports=h}),null);
__d("MessengerContactAdapters",["immutable","ImmutableObject","MercuryTypeaheadConstants"],(function a(b,c,d,e,f,g){__p&&__p();var h={fromSearchableEntry:function i(j){__p&&__p();var k=j.getType(),l={alias:null,isMessengerUser:null,isWorkUser:null,participants:null,photo:j.getPhoto(),subtitle:j.getSubtitle(),thread:null,title:j.getTitle(),type:k,uid:j.getUniqueID()},m=j.getAuxiliaryData();if(m)if(k===c("MercuryTypeaheadConstants").THREAD_TYPE){l.thread=new(c("ImmutableObject"))(m.thread);l.participants=c("immutable").Map().withMutations(function(n){m.participantsToRender.forEach(function(o){n.set(o.id,o)})})}else{l.isMessengerUser=m.isMessengerUser;l.isWorkUser=m.isWorkUser;l.alias=m.alias}return new(c("ImmutableObject"))(l)},fromMercuryParticipant:function i(j){return new(c("ImmutableObject"))({alias:j.alias,uid:j.id,photo:j.image_src,title:j.name,subtitle:"",type:j.type,isMessengerUser:j.is_messenger_user,isWorkUser:j.is_work_user,isCoworker:j.is_coworker,href:j.href,timezone:j.timezone})}};f.exports=h}),null);
__d("isValidUniqueID",[],(function a(b,c,d,e,f,g){function h(i){return i!==null&&i!==undefined&&i!==""&&(typeof i==="string"||typeof i==="number")}f.exports=h}),null);
__d("SearchableEntry",["invariant","FbtResultBase","HTML","isValidUniqueID"],(function a(b,c,d,e,f,g,h){__p&&__p();function i(k){__p&&__p();if(!k)return"";else if(typeof k==="string")return k;else if(k instanceof c("FbtResultBase"))return k.toString();else if(typeof k==="object"){var l=c("HTML").replaceJSONWrapper(k);if(c("HTML").isHTML(l)){var m=l.getRootNode();return m.textContent||m.innerText||""}else return""}else return""}function j(k){"use strict";__p&&__p();c("isValidUniqueID")(k.uniqueID)||h(0);this.$SearchableEntry8=k.uniqueID+"";if(k.title instanceof c("FbtResultBase"))k.title=k.title.toString();k.title!=null&&typeof k.title==="string"||h(0);this.$SearchableEntry6=k.title;this.$SearchableEntry3=k.order||0;this.$SearchableEntry5=i(k.subtitle);this.$SearchableEntry2=k.keywordString||"";this.$SearchableEntry4=k.photo||"";this.$SearchableEntry9=k.uri||"";this.$SearchableEntry7=i(k.type);var l=k.auxiliaryData||{};this.$SearchableEntry1=l}j.prototype.getUniqueID=function(){"use strict";return this.$SearchableEntry8};j.prototype.getOrder=function(){"use strict";return this.$SearchableEntry3};j.prototype.getTitle=function(){"use strict";return this.$SearchableEntry6};j.prototype.getSubtitle=function(){"use strict";return this.$SearchableEntry5};j.prototype.getKeywordString=function(){"use strict";return this.$SearchableEntry2};j.prototype.getPhoto=function(){"use strict";return this.$SearchableEntry4};j.prototype.getURI=function(){"use strict";return this.$SearchableEntry9};j.prototype.getType=function(){"use strict";return this.$SearchableEntry7};j.prototype.getAuxiliaryData=function(){"use strict";return this.$SearchableEntry1};j.prototype.toPlainObject=function(){"use strict";return{auxiliaryData:this.$SearchableEntry1,keywordString:this.$SearchableEntry2,order:this.$SearchableEntry3,photo:this.$SearchableEntry4,subtitle:this.$SearchableEntry5,title:this.$SearchableEntry6,type:this.$SearchableEntry7,uniqueID:this.$SearchableEntry8,uri:this.$SearchableEntry9}};f.exports=j}),null);
__d("MessengerGraphQLTypeaheadAdapter",["MercuryIDs","MercuryParticipantTypes","MercuryTypeaheadConstants","RelayModern","SearchableEntry","MessengerGraphQLTypeaheadAdapter_user.graphql","MessengerGraphQLTypeaheadAdapter_page.graphql","MessengerGraphQLTypeaheadAdapter_group.graphql","MessengerGraphQLTypeaheadAdapter_game.graphql"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("RelayModern").graphql;function i(k){return c("MercuryIDs").isValid(k)?k:c("MercuryIDs").getParticipantIDFromUserID(k)}var j={convertProfileToEntry:function k(l){__p&&__p();if(!l||!l.id||!l.name||l.is_memorialized)return null;var m=c("MercuryParticipantTypes").NON_FRIEND;if(l.is_viewer_friend||l.messenger_contact.is_on_viewer_contact_list||l.is_viewer_coworker&&l.viewer_affinity>0)m=c("MercuryParticipantTypes").FRIEND;else if(l.is_viewer_coworker)m=c("MercuryParticipantTypes").FB4C;var n=null;if(l.members)n=l.members.edges.map(function(o){return o.node.name}).join(", ");return new(c("SearchableEntry"))({uniqueID:l.id,title:l.name,type:m,subtitle:n,photo:l.profile_picture&&l.profile_picture.uri,uri:l.url,auxiliaryData:{isMessengerUser:l.is_messenger_user,isWorkUser:l.is_work_user},order:-l.viewer_affinity})},convertPageToEntry:function k(l,m){if(!l||!l.id||!l.name)return null;if(l.instant_game_info)return this.convertGameToEntry(l);return new(c("SearchableEntry"))({uniqueID:l.id,title:l.name,type:m,photo:l.profile_picture&&l.profile_picture.uri,uri:l.url,auxiliaryData:{isMessengerUser:l.is_messenger_user,isWorkUser:l.is_work_user},order:0})},convertGameToEntry:function k(l,m){if(!l||!l.id||!l.name||!l.instant_game_info)return null;return new(c("SearchableEntry"))({uniqueID:l.id,title:l.name,type:c("MercuryTypeaheadConstants").GAME_TYPE,photo:l.instant_game_info&&l.instant_game_info.icon_uri,uri:l.instant_game_info&&l.instant_game_info.game_uri,order:0})},convertGroupToEntry:function k(l,m){__p&&__p();if(!l||!l.thread_key||!l.is_group_thread)return null;var n=l.thread_key.thread_fbid;if(!n)return null;var o=l.image&&l.image.uri,p=l.other_participants.edges.map(function(t){return t.node.messaging_actor.name}).join(", "),q=l.name,r=null;if(!q)q=p;else r=p;if(!q)return null;var s={};s.thread={thread_id:n,other_user_fbid:null,image_src:o,participants:l.other_participants.edges.map(function(t){return i(t.node.messaging_actor.id)})};s.participantsToRender=l.other_participants.edges.map(function(t){return{id:i(t.node.messaging_actor.id),is_messenger_user:t.node.messaging_actor.is_messenger_user}});return new(c("SearchableEntry"))({uniqueID:n,order:m,photo:o,title:q,subtitle:r,type:c("MercuryParticipantTypes").THREAD,auxiliaryData:s})},userFragment:function k(){return c("MessengerGraphQLTypeaheadAdapter_user.graphql")},pageFragment:function k(){return c("MessengerGraphQLTypeaheadAdapter_page.graphql")},groupFragment:function k(){return c("MessengerGraphQLTypeaheadAdapter_group.graphql")},gameFragment:function k(){return c("MessengerGraphQLTypeaheadAdapter_game.graphql")}};f.exports=j}),null);
__d("MessengerTypeaheadUtils",["fbt","ix","immutable","MercuryConfig","MercuryTypeaheadConstants","MessengerEnvironment","ReactDOM","SearchableEntry","WorkModeConfig","gkx","mapObject"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k=c("immutable").OrderedMap,l=500,m=100,n=c("WorkModeConfig").is_work_user||c("gkx")("AT62Bmuf0c-b-qsSo41XTNJvFn7VwRrjwsI0onsrzyJ35XDxvhLHgPbXt3hZorqUAYplG7jtkngT9YqyGngqDfMq")?[c("MercuryTypeaheadConstants").SEARCH_TYPE,c("MercuryTypeaheadConstants").FRIEND_TYPE,c("MercuryTypeaheadConstants").FB4C_TYPE,c("MercuryTypeaheadConstants").THREAD_TYPE,c("MercuryTypeaheadConstants").MEETING_ROOM_PAGE_TYPE,c("MercuryTypeaheadConstants").INTERNAL_BOT_PAGE_TYPE,c("MercuryTypeaheadConstants").PAGE_TYPE,c("MercuryTypeaheadConstants").NON_FRIEND_TYPE,c("MercuryTypeaheadConstants").GAME_TYPE]:[c("MercuryTypeaheadConstants").SEARCH_TYPE,c("MercuryTypeaheadConstants").FRIEND_TYPE,c("MercuryTypeaheadConstants").THREAD_TYPE,c("MercuryTypeaheadConstants").FB4C_TYPE,c("MercuryTypeaheadConstants").MEETING_ROOM_PAGE_TYPE,c("MercuryTypeaheadConstants").PAGE_TYPE,c("MercuryTypeaheadConstants").NON_FRIEND_TYPE,c("MercuryTypeaheadConstants").GAME_TYPE],o=(j={},j[c("MercuryTypeaheadConstants").SEARCH_TYPE]={header:""},j[c("MercuryTypeaheadConstants").FRIEND_TYPE]={header:h._("Contacts")},j[c("MercuryTypeaheadConstants").FB4C_TYPE]={header:h._("Co-workers")},j[c("MercuryTypeaheadConstants").THREAD_TYPE]={header:h._("Group Conversations")},j[c("MercuryTypeaheadConstants").PAGE_TYPE]={header:h._("Businesses")},j[c("MercuryTypeaheadConstants").MEETING_ROOM_PAGE_TYPE]={header:h._("Meeting Rooms")},j[c("MercuryTypeaheadConstants").INTERNAL_BOT_PAGE_TYPE]={header:h._("Bots")},j[c("MercuryTypeaheadConstants").NON_FRIEND_TYPE]={header:h._("More People")},j.game={header:h._("Games")},j),p={sortEntries:function q(r,s){__p&&__p();var t=[],u=[],v=[],w=[],x=[],y=[],z=[],A=[],B=[];r.forEach(function(C){__p&&__p();switch(C.getType()){case c("MercuryTypeaheadConstants").FRIEND_TYPE:u.push(C);break;case c("MercuryTypeaheadConstants").FB4C_TYPE:v.push(C);break;case c("MercuryTypeaheadConstants").THREAD_TYPE:w.push(C);break;case c("MercuryTypeaheadConstants").PAGE_TYPE:case c("MercuryTypeaheadConstants").COMMERCE_PAGE_TYPE:y.push(C);break;case c("MercuryTypeaheadConstants").NON_FRIEND_TYPE:x.push(C);break;case c("MercuryTypeaheadConstants").MEETING_ROOM_PAGE_TYPE:z.push(C);break;case c("MercuryTypeaheadConstants").INTERNAL_BOT_PAGE_TYPE:A.push(C);break;case c("MercuryTypeaheadConstants").SEARCH_TYPE:t.push(C);break;case c("MercuryTypeaheadConstants").GAME_TYPE:B.push(C);break}});if(p._shouldHoistPages(s))return t.concat(y,u,v,w,z,A,x,B);return t.concat(u,v,w,z,A,y,x,B)},sortEntriesWithoutPages:function q(r){__p&&__p();var s=[],t=[],u=[],v=[];r.forEach(function(w){switch(w.getType()){case c("MercuryTypeaheadConstants").FRIEND_TYPE:s.push(w);break;case c("MercuryTypeaheadConstants").FB4C_TYPE:t.push(w);break;case c("MercuryTypeaheadConstants").THREAD_TYPE:u.push(w);break;case c("MercuryTypeaheadConstants").NON_FRIEND_TYPE:v.push(w);break}});return s.concat(t,u,v)},sortEntriesWithoutGroupsOrViewer:function q(r,s){__p&&__p();var t=[],u=[],v=[];r.forEach(function(w){if(w.getUniqueID()===s)return;switch(w.getType()){case c("MercuryTypeaheadConstants").FRIEND_TYPE:t.push(w);break;case c("MercuryTypeaheadConstants").FB4C_TYPE:u.push(w);break;case c("MercuryTypeaheadConstants").NON_FRIEND_TYPE:v.push(w);break}});return t.concat(u,v)},getEntryOrder:function q(r){var s=arguments.length<=1||arguments[1]===undefined?n:arguments[1];if(p._shouldHoistPages(r)){s=[].concat(s);s.splice(s.indexOf(c("MercuryTypeaheadConstants").PAGE_TYPE));s.unshift(c("MercuryTypeaheadConstants").PAGE_TYPE)}return s},orderEntries:function q(r,s){var t=[];this.getEntryOrder(s).filter(function(u){return u!==c("MercuryTypeaheadConstants").SEARCH_TYPE}).concat(c("MercuryTypeaheadConstants").SEARCH_TYPE).forEach(function(u){return t.push.apply(t,r.filter(function(v){return this.areSectionsEqual(v.getType(),u)}.bind(this)))}.bind(this));return t},buildSingleSection:function q(r){return k([["",r]])},buildListSections:function q(r,s,t){__p&&__p();if(!r.length)return k();t=this.getEntryOrder(s,t);var u=c("mapObject")(o,function(v){return babelHelpers["extends"]({},v,{entries:[]})});u[c("MercuryTypeaheadConstants").COMMERCE_PAGE_TYPE]=u[c("MercuryTypeaheadConstants").PAGE_TYPE];r.forEach(function(v){var w=v.getType();if(u[w])u[w].entries.push(v)});return k(t.filter(function(v){return u[v].entries.length}).map(function(v){return[u[v].header,u[v].entries]}))},buildCustomSection:function q(r,s){var t;return t={},t[r]=s,t},areSectionsEqual:function q(r,s){if(r===c("MercuryTypeaheadConstants").COMMERCE_PAGE_TYPE)return s===c("MercuryTypeaheadConstants").COMMERCE_PAGE_TYPE||s===c("MercuryTypeaheadConstants").PAGE_TYPE;return r===s},scrollEntryIntoView:function q(r,s){var t=c("ReactDOM").findDOMNode(s),u=s.getScrollTop(),v=r.offsetTop-u,w=t.offsetHeight-r.offsetHeight,x=Math.abs(w-v);if(v>=w&&x<=m)s.scrollToPosition(u+v-w,true,{duration:l});else if(v<0&&x<=w+m)s.scrollToPosition(u+v,true,{duration:l})},getMessageSearchEntry:function q(r){if(!c("MessengerEnvironment").messengerui||r.length<2)return null;return new(c("SearchableEntry"))({uniqueID:"__special_search_entry__",title:h._("Search Messages for \"{queryString}\"",[h.param("queryString",r)]),photo:i("86924"),type:c("MercuryTypeaheadConstants").SEARCH_TYPE})},_shouldHoistPages:function q(r){if(!r)return false;return!!(c("MercuryConfig").HoistAgentsKeywords&&c("MercuryConfig").HoistAgentsKeywords.indexOf(r.toLowerCase().trim())!==-1)}};f.exports=p}),null);
__d("MessengerGraphQLTypeaheadHighlighter",["Keys","MercuryTypeaheadConstants","MessengerTypeaheadUtils"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h={getNextHighlightedEntry:function i(j,k,l,m){__p&&__p();var n=[];c("MessengerTypeaheadUtils").getEntryOrder(l).forEach(function(r){return n.push.apply(n,k.filter(function(s){return c("MessengerTypeaheadUtils").areSectionsEqual(s.getType(),r)}))});if(!m){if(n.length===0)return null;if(j===c("Keys").DOWN){var o=n[0];if(o.getType()===c("MercuryTypeaheadConstants").SEARCH_TYPE&&n.length>1)return n[1];return o}if(j===c("Keys").UP)return n[n.length-1];return null}var p=m.getUniqueID(),q=n.findIndex(function(r){return r.getUniqueID()===p});if(q===-1)return null;if(j===c("Keys").DOWN){q+=1;if(q>=n.length)q=0}else if(j===c("Keys").UP){q-=1;if(q<0)q=n.length-1}return n[q]}};f.exports=h}),null);
__d("MessengerNewGroupParticipantSuggestionQueryWebGraphQLQuery",["WebGraphQLQueryBase"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();f.exports=function(){__p&&__p();var h,i;h=babelHelpers.inherits(j,c("WebGraphQLQueryBase"));i=h&&h.prototype;j.__getDocID=function(){"use strict";return"1618227184882865"};j.getQueryID=function(){"use strict";return"308986872910637"};function j(){"use strict";h.apply(this,arguments)}return j}()}),null);
__d("SearchSourceQueryStatus",[],(function a(b,c,d,e,f,g){var h={ACTIVE:"ACTIVE",COMPLETE:"COMPLETE"};f.exports=h}),null);
__d("SearchSourceCallbackManager",["invariant","SearchSourceQueryStatus","createObjectFrom","nullthrows"],(function a(b,c,d,e,f,g,h){__p&&__p();var i=c("SearchSourceQueryStatus").ACTIVE,j=c("SearchSourceQueryStatus").COMPLETE;function k(m){"use strict";this.$SearchSourceCallbackManager9=m.parseFn;typeof this.$SearchSourceCallbackManager9==="function"||h(0);this.$SearchSourceCallbackManager8=m.matchFn;typeof this.$SearchSourceCallbackManager8==="function"||h(0);this.$SearchSourceCallbackManager2=m.alwaysPrefixMatch||false;this.$SearchSourceCallbackManager6=m.indexFn||l;this.$SearchSourceCallbackManager4=m.exclusions||{};this.reset()}k.prototype.search=function(m,n){"use strict";var o=this.$SearchSourceCallbackManager13(m,n);if(o)return 0;this.$SearchSourceCallbackManager1.push({queryString:m,callback:n});var p=this.$SearchSourceCallbackManager1.length-1;this.$SearchSourceCallbackManager10.push(p);return p};k.prototype.$SearchSourceCallbackManager13=function(m,n){"use strict";__p&&__p();var o=this.$SearchSourceCallbackManager14(m),p=!!this.$SearchSourceCallbackManager5[m];if(!o.length){n([],m,p?j:i);return p}var q=o.map(function(r){return this.$SearchSourceCallbackManager3[r]}.bind(this));n(q,m,p?j:i);return p};k.prototype.$SearchSourceCallbackManager15=function(){"use strict";var m=this.$SearchSourceCallbackManager10;this.$SearchSourceCallbackManager10=[];m.forEach(this.$SearchSourceCallbackManager16,this)};k.prototype.$SearchSourceCallbackManager16=function(m){"use strict";__p&&__p();var n=this.$SearchSourceCallbackManager1[m];if(!n)return;var o=this.$SearchSourceCallbackManager13(n.queryString,n.callback);if(o){delete this.$SearchSourceCallbackManager1[m];return}this.$SearchSourceCallbackManager10.push(m)};k.prototype.reset=function(){"use strict";this.$SearchSourceCallbackManager3={};this.$SearchSourceCallbackManager12={};this.$SearchSourceCallbackManager7={};this.$SearchSourceCallbackManager11={};this.$SearchSourceCallbackManager5={};this.$SearchSourceCallbackManager10=[];this.$SearchSourceCallbackManager1=[undefined]};k.prototype.addLocalEntries=function(m){"use strict";__p&&__p();m.forEach(function(n){var o=n.getUniqueID(),p=this.$SearchSourceCallbackManager6(n);this.$SearchSourceCallbackManager3[o]=n;this.$SearchSourceCallbackManager12[o]=p;var q=this.$SearchSourceCallbackManager9(p);q.tokens.forEach(function(r){if(!Object.prototype.hasOwnProperty.call(this.$SearchSourceCallbackManager7,r))this.$SearchSourceCallbackManager7[r]={};this.$SearchSourceCallbackManager7[r][o]=true}.bind(this))}.bind(this));this.$SearchSourceCallbackManager15()};k.prototype.addQueryEntries=function(m,n,o){"use strict";__p&&__p();if(o===j)this.setQueryStringAsExhausted(n);var p=this.$SearchSourceCallbackManager14(n),q=this.$SearchSourceCallbackManager9(n).flatValue;this.$SearchSourceCallbackManager11[q]=c("createObjectFrom")(p,true);m.forEach(function(r){var s=r.getUniqueID();this.$SearchSourceCallbackManager3[s]=r;this.$SearchSourceCallbackManager12[s]=this.$SearchSourceCallbackManager6(r);this.$SearchSourceCallbackManager11[q][s]=true}.bind(this));this.$SearchSourceCallbackManager15()};k.prototype.unsubscribe=function(m){"use strict";delete this.$SearchSourceCallbackManager1[m]};k.prototype.removeEntry=function(m){"use strict";delete this.$SearchSourceCallbackManager3[m]};k.prototype.getAllEntriesMap=function(){"use strict";return this.$SearchSourceCallbackManager3};k.prototype.setQueryStringAsExhausted=function(m){"use strict";this.$SearchSourceCallbackManager5[m]=true};k.prototype.unsetQueryStringAsExhausted=function(m){"use strict";delete this.$SearchSourceCallbackManager5[m]};k.prototype.$SearchSourceCallbackManager14=function(m){"use strict";var n=this.$SearchSourceCallbackManager17(m,this.$SearchSourceCallbackManager18(m)),o=this.$SearchSourceCallbackManager17(m,this.$SearchSourceCallbackManager19(m)),p=n.concat(o),q={},r=[];p.forEach(function(s){if(q[s]==null&&this.$SearchSourceCallbackManager3[s]!=null&&this.$SearchSourceCallbackManager4[s]==null){r.push(s);q[s]=true}}.bind(this));return r};k.prototype.$SearchSourceCallbackManager17=function(m,n){"use strict";__p&&__p();var o=this.$SearchSourceCallbackManager20(m,n),p=this.$SearchSourceCallbackManager3;function q(r,s){if(o[r]!==o[s])return o[r]?-1:1;var t=p[r],u=p[s];if(t.getOrder()!==u.getOrder())return t.getOrder()-u.getOrder();var v=t.getTitle().length,w=u.getTitle().length;if(v!==w)return v-w;return t.getUniqueID()-u.getUniqueID()}return n.sort(q).slice()};k.prototype.$SearchSourceCallbackManager20=function(m,n){"use strict";var o={};n.forEach(function(p){o[p]=this.$SearchSourceCallbackManager8(m,this.$SearchSourceCallbackManager12[p])}.bind(this));return o};k.prototype.$SearchSourceCallbackManager18=function(m){"use strict";__p&&__p();var n=this.$SearchSourceCallbackManager9(m,this.$SearchSourceCallbackManager2),o=this.$SearchSourceCallbackManager2?c("nullthrows")(n.sortedTokens):n.tokens,p=o.length,q=n.isPrefixQuery?p-1:null,r={},s={},t={},u=false,v={},w=0;o.forEach(function(y,z){__p&&__p();if(Object.prototype.hasOwnProperty.call(v,y))return;w++;v[y]=true;for(var A in this.$SearchSourceCallbackManager7){var B=A===y&&!Object.prototype.hasOwnProperty.call(r,A),C=false;if(!B)C=(this.$SearchSourceCallbackManager2||q===z)&&A.indexOf(y)===0;if(!B&&!C)continue;if(A===y){if(Object.prototype.hasOwnProperty.call(s,A))u=true;r[A]=true}else{if(Object.prototype.hasOwnProperty.call(r,A)||Object.prototype.hasOwnProperty.call(s,A))u=true;s[A]=true}for(var D in this.$SearchSourceCallbackManager7[A])if(z===0||Object.prototype.hasOwnProperty.call(t,D)&&t[D]==w-1)t[D]=w}}.bind(this));var x=Object.keys(t).filter(function(y){return t[y]==w});if(u||w<p)x=this.$SearchSourceCallbackManager21(m,x);return x};k.prototype.$SearchSourceCallbackManager19=function(m){"use strict";var n=this.$SearchSourceCallbackManager9(m).flatValue,o=this.$SearchSourceCallbackManager22(n);if(Object.prototype.hasOwnProperty.call(this.$SearchSourceCallbackManager11,n))return o;return this.$SearchSourceCallbackManager21(m,o)};k.prototype.$SearchSourceCallbackManager22=function(m){"use strict";var n=0,o=null,p=this.$SearchSourceCallbackManager11;Object.keys(p).forEach(function(q){if(m.indexOf(q)===0&&q.length>n){n=q.length;o=q}});return o&&Object.prototype.hasOwnProperty.call(p,o)?Object.keys(p[o]):[]};k.prototype.$SearchSourceCallbackManager21=function(m,n){"use strict";return n.filter(function(o){return this.$SearchSourceCallbackManager8(m,this.$SearchSourceCallbackManager12[o])}.bind(this))};function l(m){return[m.getTitle(),m.getKeywordString()].join(" ")}f.exports=k}),null);
__d("TokenizeUtil",["nullthrows"],(function a(b,c,d,e,f,g){__p&&__p();var h=/[ ]+/g,i=/[^ ]+/g,j=new RegExp("[^ "+l()+"]+|"+m(),"g"),k=new RegExp(m(),"g");function l(){return".,+*?$|#{}()'\\^\\-\\[\\]\\\\\\/!@%\"~=<>_:;\u30fb\u3001\u3002\u3008-\u3011\u3014-\u301f\uff1a-\uff1f\uff01-\uff0f\uff3b-\uff40\uff5b-\uff65\u2e2e\u061f\u066a-\u066c\u061b\u060c\u060d\ufd3e\ufd3f\u1801\u0964\u104a\u104b\u2010-\u2027\u2030-\u205e\xa1-\xb1\xb4-\xb8\xba\xbb\xbf"}function m(){return"["+l()+"]"}var n={},o={a:"\u0430 \xe0 \xe1 \xe2 \xe3 \xe4 \xe5 \u0101",b:"\u0431",c:"\u0446 \xe7 \u010d",d:"\u0434 \xf0 \u010f \u0111",e:"\u044d \u0435 \xe8 \xe9 \xea \xeb \u011b \u0113",f:"\u0444",g:"\u0433 \u011f \u0123",h:"\u0445 \u0127",i:"\u0438 \xec \xed \xee \xef \u0131 \u012b",j:"\u0439",k:"\u043a \u0138 \u0137",l:"\u043b \u013e \u013a \u0140 \u0142 \u013c",m:"\u043c",n:"\u043d \xf1 \u0148 \u0149 \u014b \u0146",o:"\u043e \xf8 \xf6 \xf5 \xf4 \xf3 \xf2",p:"\u043f",r:"\u0440 \u0159 \u0155",s:"\u0441 \u015f \u0161 \u017f",t:"\u0442 \u0165 \u0167 \xfe",u:"\u0443 \u044e \xfc \xfb \xfa \xf9 \u016f \u016b",v:"\u0432",y:"\u044b \xff \xfd",z:"\u0437 \u017e",ae:"\xe6",oe:"\u0153",ts:"\u0446",ch:"\u0447",ij:"\u0133",sh:"\u0448",ss:"\xdf",ya:"\u044f"};for(var p in o){var q=o[p].split(" ");for(var r=0;r<q.length;r++)n[q[r]]=p}function s(A){return A?A.replace(k," "):""}function t(A){A=A.toLowerCase();var B="",C="";for(var D=A.length;D--;){C=A.charAt(D);B=(n[C]||C)+B}return B.replace(h," ")}function u(A){var B=arguments.length<=1||arguments[1]===undefined?i:arguments[1],C=[],D=B.exec(A);while(D){D=D[0];C.push(D);D=B.exec(A)}return C}function v(s){__p&&__p();var A=arguments.length<=1||arguments[1]===undefined?i:arguments[1],B={};return function w(C,D){__p&&__p();if(!Object.prototype.hasOwnProperty.call(B,C)){var E=t(C),F=s(E);B[C]={value:C,flatValue:E,tokens:u(F,A),isPrefixQuery:!!F&&F[F.length-1]!=" "}}if(D&&B[C].sortedTokens===undefined){B[C].sortedTokens=B[C].tokens.slice();B[C].sortedTokens.sort(function(G,H){return H.length-G.length})}return B[C]}}var w=v(s),x=v(function(A){return A},j);function y(A,B,C){var D=A=="query"||A=="query_punc",E=A=="query_punc"?x:w,F=E(B,A=="prefix"),G=A=="prefix"?c("nullthrows")(F.sortedTokens):F.tokens,H=E(C).tokens,I={},J=F.isPrefixQuery&&D?G.length-1:null,K=function K(L,M){for(var N=0;N<H.length;++N){var O=H[N];if(!I[N]&&(O==L||(D&&M===J||A=="prefix")&&O.indexOf(L)===0))return I[N]=true}return false};return Boolean(G.length&&G.every(K))}var z={flatten:t,parse:w,parseIncludingPunctuations:x,getPunctuation:m,makeParse:v,isExactMatch:y.bind(null,"exact"),isQueryMatch:y.bind(null,"query"),isQueryMatchIncludingPunctuations:y.bind(null,"query_punc"),isPrefixMatch:y.bind(null,"prefix"),tokenize:u};f.exports=z}),null);
__d("MessengerNewGroupParticipantSuggestionLocalCacheManager",["AsyncRequest","Map","immutable","MercurySingletonProvider","MessengerGraphQLTypeaheadAdapter","SearchSourceCallbackManager","TokenizeUtil","MessengerNewGroupParticipantSuggestionQueryWebGraphQLQuery","idx","emptyFunction"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(k,l){this.entriesPromise=null;this.orderedFriendEntries=null;this.alreadyParticipatingIDs=null;this.shouldRefetch=false;this.cursor=null;this.threadFBID=k;this.alreadyParticipatingIDs=l;this.callbackManager=new(c("SearchSourceCallbackManager"))({parseFn:c("TokenizeUtil").parse,matchFn:c("TokenizeUtil").isQueryMatch,indexFn:null})}h.prototype.onEntriesLoaded=function(k){__p&&__p();if(this.orderedFriendEntries!==null&&!this.shouldRefetch){k(this.orderedFriendEntries);return}if(this.entriesPromise===null||this.shouldRefetch){var l=this.alreadyParticipatingIDs?this.alreadyParticipatingIDs.toArray():null,m=c("MessengerNewGroupParticipantSuggestionQueryWebGraphQLQuery").getURI({original_participant_ids:l,count:50});this.entriesPromise=new(c("AsyncRequest"))(m).setAllowCrossPageTransition(true).exec().then(function(n){return n.getPayload().data}).then(function(n){var o,p=n.viewer.messenger_contextual_ranked_users.edges.map(function(r){return c("MessengerGraphQLTypeaheadAdapter").convertProfileToEntry(r.node)}).filter(function(r){return r!==null});this.callbackManager.addLocalEntries(p);this.orderedFriendEntries=p;var q=(o=n)!=null?(o=o.viewer)!=null?(o=o.messenger_contextual_ranked_users)!=null?(o=o.page_info)!=null?o.has_next_page:o:o:o:o;if(q)this.cursor=n.viewer.messenger_contextual_ranked_users.page_info.end_cursor}.bind(this))}if(this.entriesPromise)this.entriesPromise.done(function(){k(this.orderedFriendEntries);this.loadMoreFriends();this.shouldRefetch=false}.bind(this),c("emptyFunction"))};h.prototype.loadMoreFriends=function(){if(this.cursor==null)return;var k=this.cursor;this.cursor=null;new(c("AsyncRequest"))(c("MessengerNewGroupParticipantSuggestionQueryWebGraphQLQuery").getLegacyURI({cursor:k})).setAllowCrossPageTransition(true).exec().then(function(l){return l.getPayload()}).done(function(l){this.callbackManager.addLocalEntries(l.viewer.messenger_contextual_ranked_users.edges.map(function(m){return c("MessengerGraphQLTypeaheadAdapter").convertProfileToEntry(m.node)}).filter(function(m){return m!==null}))}.bind(this))};h.prototype.search=function(k,l){this.onEntriesLoaded(function(){this.callbackManager.search(k,function(m){l(m,k)})}.bind(this))};h.prototype.participantsSame=function(k){return this.twoIDsListEquals(this.alreadyParticipatingIDs,k)};h.prototype.twoIDsListEquals=function(k,l){if(k){if(l.size!==k.size)return false;return l.isSuperset(k)}return l.size==0};h.prototype.setRefetchAndRefreshData=function(k){this.shouldRefetch=true;this.alreadyParticipatingIDs=k};h.prototype.isBootstrapped=function(k){return this.orderedFriendEntries!==null&&this.participantsSame(k)};i.get=function(){return j.get()};function i(){this.threadFBIDToCacheMap=new(c("Map"))()}i.prototype.onEntriesLoaded=function(k,l,m){var n=this.threadFBIDToCacheMap.get(k);if(!n){n=new h(k,l);this.threadFBIDToCacheMap.set(k,n)}else if(!n.participantsSame(l))n.setRefetchAndRefreshData(l);n.onEntriesLoaded(m)};i.prototype.search=function(k,l,m,n){var o=this.threadFBIDToCacheMap.get(k);if(!o){o=new h(k,l);this.threadFBIDToCacheMap.set(k,o)}else if(!o.participantsSame(l))o.setRefetchAndRefreshData(l);o.search(m,n)};i.prototype.isBootstrapped=function(k,l){if(!k)return false;var m=this.threadFBIDToCacheMap.get(k);if(m)return m.isBootstrapped(l);return false};var j=new(c("MercurySingletonProvider"))(i);f.exports=i}),null);
__d("MessengerPaymentFriendsQueryWebGraphQLQuery",["WebGraphQLQueryBase"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();f.exports=function(){__p&&__p();var h,i;h=babelHelpers.inherits(j,c("WebGraphQLQueryBase"));i=h&&h.prototype;j.__getDocID=function(){"use strict";return"1309627089135674"};j.getQueryID=function(){"use strict";return"1005776556192539"};function j(){"use strict";h.apply(this,arguments)}return j}()}),null);
__d("MessengerPaymentFriendsLocalCache",["AsyncRequest","MessengerGraphQLTypeaheadAdapter","MessengerPaymentFriendsQueryWebGraphQLQuery","SearchSourceCallbackManager","TokenizeUtil","emptyFunction"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=new(c("SearchSourceCallbackManager"))({parseFn:c("TokenizeUtil").parse,matchFn:c("TokenizeUtil").isQueryMatch,indexFn:null}),i=null,j=null,k=null;function l(){if(!k)return;var n=k;k=null;new(c("AsyncRequest"))(c("MessengerPaymentFriendsQueryWebGraphQLQuery").getLegacyURI({cursor:n})).setAllowCrossPageTransition(true).exec().then(function(o){return o.getPayload()}).done(function(o){h.addLocalEntries(o.viewer.all_friends.edges.map(function(p){return c("MessengerGraphQLTypeaheadAdapter").convertProfileToEntry(p.node)}).filter(function(p){return p!==null}))})}var m={onEntriesLoaded:function n(o){__p&&__p();if(j){o(j);return}if(!i){var p=c("MessengerPaymentFriendsQueryWebGraphQLQuery").getURI({first:50});i=new(c("AsyncRequest"))(p).setAllowCrossPageTransition(true).exec().then(function(q){return q.getPayload()}).then(function(q){var r=q.data.viewer.all_friends.edges.map(function(s){return c("MessengerGraphQLTypeaheadAdapter").convertProfileToEntry(s.node)}).filter(function(s){return s!==null});h.addLocalEntries(r);j=r;k=q.data.viewer.all_friends.page_info.end_cursor})}i.done(function(){o(j)},c("emptyFunction"))},search:function n(o,p){m.onEntriesLoaded(function(){h.search(o,function(q){p(q,o)})})},isBootstrapped:function n(){return j!==null}};f.exports=m}),null);
__d("MessengerRoomWithAssocObjectAudienceWebGraphQLQuery",["WebGraphQLQueryBase"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();f.exports=function(){__p&&__p();var h,i;h=babelHelpers.inherits(j,c("WebGraphQLQueryBase"));i=h&&h.prototype;j.__getDocID=function(){"use strict";return"1310278199019267"};j.getQueryID=function(){"use strict";return"404717586571843"};function j(){"use strict";h.apply(this,arguments)}return j}()}),null);
__d("MessengerRoomWithAssocObjectAudienceLocalCacheManager",["AsyncRequest","Map","MercurySingletonProvider","MessengerGraphQLTypeaheadAdapter","SearchSourceCallbackManager","TokenizeUtil","MessengerRoomWithAssocObjectAudienceWebGraphQLQuery","emptyFunction"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(k){this.entriesPromise=null;this.audienceEntries=null;this.threadFBID=k;this.callbackManager=new(c("SearchSourceCallbackManager"))({parseFn:c("TokenizeUtil").parse,matchFn:c("TokenizeUtil").isQueryMatch,indexFn:null})}h.prototype.onEntriesLoaded=function(k){__p&&__p();if(this.audienceEntries!==null){k(this.audienceEntries,true);return}if(this.entriesPromise===null){var l=c("MessengerRoomWithAssocObjectAudienceWebGraphQLQuery").getURI({thread_fbid:this.threadFBID,first:30});this.entriesPromise=new(c("AsyncRequest"))(l).setAllowCrossPageTransition(true).exec().then(function(m){return m.getPayload()}).then(function(m){var n=m.data.message_thread.messaging_audience_list.edges.map(function(o){return c("MessengerGraphQLTypeaheadAdapter").convertProfileToEntry(o.node)}).filter(function(o){return o!==null});this.callbackManager.addLocalEntries(n);this.audienceEntries=n}.bind(this))}if(this.entriesPromise)this.entriesPromise.done(function(){k(this.audienceEntries,true)}.bind(this),c("emptyFunction"))};h.prototype.search=function(k,l){this.onEntriesLoaded(function(){this.callbackManager.search(k,function(m){l(m,k)})}.bind(this))};h.prototype.isBootstrapped=function(){return this.audienceEntries!==null};i.get=function(){return j.get()};function i(){this.threadFBIDToCacheMap=new(c("Map"))()}i.prototype.onEntriesLoaded=function(k,l){var m=this.threadFBIDToCacheMap.get(k);if(!m){m=new h(k);this.threadFBIDToCacheMap.set(k,m)}m.onEntriesLoaded(l)};i.prototype.search=function(k,l,m){var n=this.threadFBIDToCacheMap.get(k);if(!n){n=new h(k);this.threadFBIDToCacheMap.set(k,n)}n.search(l,m)};i.prototype.isBootstrapped=function(k){if(!k)return false;var l=this.threadFBIDToCacheMap.get(k);if(l)return l.isBootstrapped();return false};var j=new(c("MercurySingletonProvider"))(i);f.exports=i}),null);
__d("MessengerFriendsWebGraphQLQuery",["WebGraphQLQueryBase"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();f.exports=function(){__p&&__p();var h,i;h=babelHelpers.inherits(j,c("WebGraphQLQueryBase"));i=h&&h.prototype;j.__getDocID=function(){"use strict";return"1138546562910012"};j.getQueryID=function(){"use strict";return"340140939718890"};function j(){"use strict";h.apply(this,arguments)}return j}()}),null);
__d("TopMessengerFriendsAndGroupsWebGraphQLQuery",["WebGraphQLQueryBase"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();f.exports=function(){__p&&__p();var h,i;h=babelHelpers.inherits(j,c("WebGraphQLQueryBase"));i=h&&h.prototype;j.__getDocID=function(){"use strict";return"1573443639352292"};j.getQueryID=function(){"use strict";return"170460960113470"};function j(){"use strict";h.apply(this,arguments)}return j}()}),null);
__d("MessengerTypeaheadLocalCache",["AsyncRequest","MessengerConfig","MessengerFriendsWebGraphQLQuery","MessengerGraphQLTypeaheadAdapter","SearchSourceCallbackManager","TokenizeUtil","TopMessengerFriendsAndGroupsWebGraphQLQuery","emptyFunction"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=new(c("SearchSourceCallbackManager"))({parseFn:c("TokenizeUtil").parse,matchFn:c("TokenizeUtil").isQueryMatch,indexFn:null}),i=null,j=null,k=null,l=null;function m(){if(c("MessengerConfig").BootstrapTypeaheadFromBuddylist||!k)return;var o=k;k=null;new(c("AsyncRequest"))(c("MessengerFriendsWebGraphQLQuery").getLegacyURI({cursor:o})).setAllowCrossPageTransition(true).exec().then(function(p){return p.getPayload()}).done(function(p){h.addLocalEntries(p.viewer.all_friends.edges.map(function(q){return c("MessengerGraphQLTypeaheadAdapter").convertProfileToEntry(q.node)}).filter(function(q){return q!==null}))})}var n={onEntriesLoaded:function o(p){__p&&__p();var q;if(i!==null&&j!==null){p(i,j,false);return}if(l===null)(function(){__p&&__p();var r=c("MessengerConfig").BootstrapTypeaheadFromBuddylist,s=c("TopMessengerFriendsAndGroupsWebGraphQLQuery").getLegacyURI({use_buddylist:r,first:100});l=new(c("AsyncRequest"))(s).setAllowCrossPageTransition(true).exec().then(function(t){return t.getPayload()}).then(function(t){__p&&__p();var u=(r?t.viewer.chat_buddylist:t.viewer.all_friends.edges).map(function(w){return c("MessengerGraphQLTypeaheadAdapter").convertProfileToEntry(r?w.represented_profile:w.node)}).filter(function(w){return w!==null}),v=t.viewer.message_threads.edges.map(function(w,x){return c("MessengerGraphQLTypeaheadAdapter").convertGroupToEntry(w.node,x)}).filter(function(w){return w!==null});h.addLocalEntries(u);h.addLocalEntries(v);i=u;j=v;if(t.viewer.all_friends&&t.viewer.all_friends.page_info&&t.viewer.all_friends.page_info.has_next_page)k=t.viewer.all_friends.page_info.end_cursor})})();l.done(function(){p(i,j,true);m()},c("emptyFunction"))},search:function o(p,q){n.onEntriesLoaded(function(){h.search(p,function(r){q(r,p)})})},isBootstrapped:function o(){return i!==null&&j!==null}};f.exports=n}),null);
__d("MNPlatformAttributionTags",[],(function a(b,c,d,e,f,g){f.exports={ATTRIBUTION_TAGS_PREFIX:"bnp:trigger:",CUSTOMER_CHAT_PLUGIN:"customer_chat_plugin",MESSENGER_WEB:"messenger_web",MESSENGER_WEB_SEARCH:"messenger_web_search",M_DOT_ME:"m_dot_me"}}),null);
__d("MessengerAttributionTagsStore",["MessengerActions","MessengerStore"],(function a(b,c,d,e,f,g){__p&&__p();var h,i;h=babelHelpers.inherits(j,c("MessengerStore"));i=h&&h.prototype;function j(){"use strict";i.constructor.call(this);this.$MessengerAttributionTagsStore1={messagingTags:null,threadID:null}}j.prototype.getState=function(){"use strict";return this.$MessengerAttributionTagsStore1};j.prototype.__onDispatch=function(k){"use strict";__p&&__p();switch(k.type){case c("MessengerActions").Types.UPDATE_THREAD_TAG:this.$MessengerAttributionTagsStore1.messagingTags=k.messagingTags;this.$MessengerAttributionTagsStore1.threadID=k.threadID;this.emitChange();break;case c("MessengerActions").Types.SELECT_THREAD:this.$MessengerAttributionTagsStore1.messagingTags=null;this.$MessengerAttributionTagsStore1.threadID=null;this.emitChange();break}};f.exports=new j()}),null);
__d("MNPlatformTagsDataManager",["MessagingSourceEnum","MessengerActions","MessengerAttributionTagsStore","MNPlatformAttributionTags"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();f.exports={getTags:function h(){__p&&__p();var i=arguments.length<=0||arguments[0]===undefined?null:arguments[0],j=null;switch(i){case c("MessagingSourceEnum").PAGES_MESSAGE_SHORTLINK:j=c("MNPlatformAttributionTags").M_DOT_ME;break;case c("MessagingSourceEnum").MESSENGER_WEB:j=c("MNPlatformAttributionTags").MESSENGER_WEB;break;case c("MessagingSourceEnum").MESSENGER_WEB_SEARCH:j=c("MNPlatformAttributionTags").MESSENGER_WEB_SEARCH;break;case c("MessagingSourceEnum").CUSTOMER_CHAT_PLUGIN:j=c("MNPlatformAttributionTags").CUSTOMER_CHAT_PLUGIN;break;default:j="";break}if(j!=="")j=c("MNPlatformAttributionTags").ATTRIBUTION_TAGS_PREFIX+j;return[j]},updateThreadTabAfterSelectThread:function h(){var i=arguments.length<=0||arguments[0]===undefined?null:arguments[0],j=arguments.length<=1||arguments[1]===undefined?null:arguments[1],k=this.getTags(i);c("MessengerActions").changeThreadTag(k,j)},hasThreadTags:function h(i){var j=c("MessengerAttributionTagsStore").getState();return!!(j.messagingTags&&i&&j.threadID&&j.threadID.toString()===i)},getThreadTags:function h(){var i=c("MessengerAttributionTagsStore").getState();return i.messagingTags}}}),null);
__d("MessengerGroupSearchResultsQueryWebGraphQLQuery",["WebGraphQLQueryBase"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();f.exports=function(){__p&&__p();var h,i;h=babelHelpers.inherits(j,c("WebGraphQLQueryBase"));i=h&&h.prototype;j.__getDocID=function(){"use strict";return"1729903047081547"};j.getQueryID=function(){"use strict";return"1520207274730395"};function j(){"use strict";h.apply(this,arguments)}return j}()}),null);
__d("MessengerPageSearchResultsQueryWebGraphQLQuery",["WebGraphQLQueryBase"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();f.exports=function(){__p&&__p();var h,i;h=babelHelpers.inherits(j,c("WebGraphQLQueryBase"));i=h&&h.prototype;j.__getDocID=function(){"use strict";return"1692140974139092"};j.getQueryID=function(){"use strict";return"533569056993528"};function j(){"use strict";h.apply(this,arguments)}return j}()}),null);
__d("MessengerProfileSearchResultsQueryWebGraphQLQuery",["WebGraphQLQueryBase"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();f.exports=function(){__p&&__p();var h,i;h=babelHelpers.inherits(j,c("WebGraphQLQueryBase"));i=h&&h.prototype;j.__getDocID=function(){"use strict";return"1965099496838417"};j.getQueryID=function(){"use strict";return"893123257521152"};function j(){"use strict";h.apply(this,arguments)}return j}()}),null);
__d("MessengerRoomAudienceSearchResultsQueryWebGraphQLQuery",["WebGraphQLQueryBase"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();f.exports=function(){__p&&__p();var h,i;h=babelHelpers.inherits(j,c("WebGraphQLQueryBase"));i=h&&h.prototype;j.__getDocID=function(){"use strict";return"846169448841507"};j.getQueryID=function(){"use strict";return"551761671830823"};function j(){"use strict";h.apply(this,arguments)}return j}()}),null);
__d("MessengerRoomPrivacyMode",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({WHITELISTED_MODE:0,PUBLIC_MODE:1})}),null);
__d("MessengerSearchFunnelLogger",["FunnelLogger","MercuryIDs"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h;function i(p,q){c("FunnelLogger").startFunnel(p);if(q)c("FunnelLogger").addFunnelTag(p,q);c("FunnelLogger").appendActionIfNew(p,"search_start");h=[]}function j(p){c("FunnelLogger").appendActionIfNew(p,"search_end");c("FunnelLogger").endFunnel(p)}function k(p,q){c("FunnelLogger").appendActionWithPayload(p,"initiate_content_search",{query_string:q,impression_list:h});c("FunnelLogger").endFunnel(p)}function l(p,q,r,s){if(r==null||h==null||h.length===0){c("FunnelLogger").appendActionWithPayload(p,"search_result_error",{error:"threadID or latest impression list are null",thread_id:r,impression_list:h});c("FunnelLogger").endFunnel(p);return}r=c("MercuryIDs").getThreadFBIDFromThreadID(r);c("FunnelLogger").appendActionWithPayload(p,"log_result_selection",{thread_id:r,type:s,rank:h.indexOf(r),search_query:q?q:""})}function m(p,q,r){c("FunnelLogger").appendActionWithPayloadIfNew(p,"loading_state_impression_list",{search_query:q,impression_list:r});h=r}function n(p,q,r,s){c("FunnelLogger").appendActionWithPayload(p,q,{search_query:r,impression_list:s});h=s}function o(p){c("FunnelLogger").appendAction(p,"clear_search_query");this.endFunnel(p)}f.exports={startFunnel:i,logResultSelection:l,endFunnel:j,logContentSearchInitiation:k,logLoadingStateQuery:m,logUpdateQuery:n,logClearQuery:o}}),null);
__d("MessengerTypeaheadResultRoute",["react-relay/classic/query/RelayQL","react-relay/classic/route/RelayRoute"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("react-relay/classic/route/RelayRoute"));i=h&&h.prototype;function j(){h.apply(this,arguments)}j.routeName="MessengerTypeaheadResultRoute";j.paramDefinition={queryString:{required:true,type:"String"},canViewerSendMoneyFilter:{required:false,type:"Boolean"},localEntryIDs:{required:true,type:"Array"},shouldQueryPages:{required:true,type:"Boolean"},shouldQueryThreadName:{required:true,type:"Boolean"},shouldQueryParticipantIDs:{required:true,type:"Boolean"},shouldQueryParticipantNames:{required:true,type:"Boolean"},shouldQueryVCEndpoint:{required:true,type:"Boolean"},shouldQueryInternalBot:{required:true,type:"Boolean"},shouldQueryRoomsAudience:{required:true,type:"Boolean"},threadFBID:{required:false,type:"String"}};j.queries={profiles:function k(l,m){var n=m.canViewerSendMoneyFilter,o=m.shouldQueryPages,p=m.shouldQueryVCEndpoint,q=m.shouldQueryInternalBot,r=m.shouldQueryRoomsAudience;return function(s){return{calls:[{kind:"Call",metadata:{type:"String!"},name:"query",value:{kind:"CallVariable",callVariableName:"queryString"}}],children:[].concat.apply([],[{fieldName:"id",kind:"Field",metadata:{isGenerated:true,isRequisite:true},type:"ID"},c("react-relay/classic/query/RelayQL").__frag(s)]),fieldName:"entities_named",kind:"Query",metadata:{identifyingArgName:"query",identifyingArgType:"String!"},name:"MessengerTypeaheadResultRoute",type:"SearchableEntitiesQuery"}}(l.getFragment("profiles",{canViewerSendMoneyFilter:n,shouldQueryPages:o,shouldQueryVCEndpoint:p,shouldQueryInternalBot:q,shouldQueryRoomsAudience:r}))},groups:function k(l,m){var n=m.queryString,o=m.localEntryIDs,p=m.shouldQueryThreadName,q=m.shouldQueryParticipantIDs,r=m.shouldQueryParticipantNames;return function(s){return{children:[].concat.apply([],[c("react-relay/classic/query/RelayQL").__frag(s)]),fieldName:"viewer",kind:"Query",metadata:{},name:"MessengerTypeaheadResultRoute",type:"Viewer"}}(l.getFragment("groups",{queryString:n,localEntryIDs:o,shouldQueryThreadName:p,shouldQueryParticipantIDs:q,shouldQueryParticipantNames:r}))},roomAudience:function k(l,m){var n=m.queryString,o=m.shouldQueryRoomsAudience;return function(p){return{calls:[{kind:"Call",metadata:{type:"ID!"},name:"id",value:{kind:"CallVariable",callVariableName:"threadFBID"}}],children:[].concat.apply([],[{fieldName:"id",kind:"Field",metadata:{isGenerated:true,isRequisite:true},type:"ID"},c("react-relay/classic/query/RelayQL").__frag(p)]),fieldName:"message_thread",kind:"Query",metadata:{identifyingArgName:"id",identifyingArgType:"ID!"},name:"MessengerTypeaheadResultRoute",type:"MessageThread"}}(l.getFragment("roomAudience",{queryString:n,shouldQueryRoomsAudience:o}))}};f.exports=j}),null);
__d("imageBlockReact",["ReasonReact","ImageBlock.react","bs_js_null_undefined"],(function a(b,c,d,e,f,g){"use strict";function h(i,j,k,l,m){return c("ReasonReact").wrapJsForReason(c("ImageBlock.react"),{className:c("bs_js_null_undefined").from_opt(i),contentClassName:c("bs_js_null_undefined").from_opt(j),imageClassName:c("bs_js_null_undefined").from_opt(k),spacing:c("bs_js_null_undefined").from_opt(l)},m)}g.make=h}),null);
__d("mercuryThreadTimestampReact",["React","formatDate","ReasonReact","joinClasses","bs_js_primitive"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("ReasonReact").statelessComponent("MercuryThreadTimestampReact");function i(k,l,m,n,o){var p=n?n[0]:"",q=h.slice();q[9]=function(){if(k){var r=k[0],s=new Date(r),t=l?l[0]:s.toLocaleDateString(),u=m?m[0]:c("formatDate")(s,"g:ia");return c("React").cloneElement(c("React").createElement("abbr",{className:c("joinClasses")(p,"timestamp"),title:t},u),{"data-utime":r/1e3})}else return c("React").createElement("abbr",undefined)};return q}var j=c("ReasonReact").wrapReasonForJs(h,function(k){return i(c("bs_js_primitive").null_undefined_to_opt(k.time),c("bs_js_primitive").null_undefined_to_opt(k.title),c("bs_js_primitive").null_undefined_to_opt(k.text),[k.className],[])});g.component=h;g.make=i;g.jsComponent=j}),null);
__d("messengerLocalTimeReact",["cx","fbt","React","bs_js_boolean","ReasonReact","joinClasses","mercuryThreadTimestampReact"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=c("ReasonReact").statelessComponent("RMessengerLocalTimeReact");function k(n,o,p){__p&&__p();var q=j.slice();q[9]=function(){if(o){var r=o[0]-new Date().getTimezoneOffset()*-60;if(r===0)return null;else{var s=new Date(Date.now()+r*1e3),t=s.getHours(),u=+(t<6||t>22),v=c("joinClasses")("_10rk",n);return c("React").createElement("span",{className:v},c("React").createElement("span",{className:c("bs_js_boolean").to_js_boolean(u)?"_2f3x":""},"(",c("ReasonReact").element(0,0,c("mercuryThreadTimestampReact").make([s.getTime()],0,0,0,[]))," ",i._("local time"),")"))}}else return null};return q}var l=22,m=6;g.component=j;g.nightStartHour=l;g.nightEndHour=m;g.make=k}),null);
__d("messengerTextWithEntitiesReact",["utilsRe","ReasonReact","bs_js_null_undefined","MessengerTextWithEntities.react"],(function a(b,c,d,e,f,g){"use strict";function h(i,j,k,l){return c("ReasonReact").wrapJsForReason(c("MessengerTextWithEntities.react"),{renderEmoji:c("utilsRe").optionBoolToNullUndefinedBoolean(i),renderEmoticons:c("utilsRe").optionBoolToNullUndefinedBoolean(j),text:c("bs_js_null_undefined").from_opt(k)},l)}g.make=h}),null);
__d("SplitImage.react",["cx","React","Image.react","joinClasses"],(function a(b,c,d,e,f,g,h){__p&&__p();var i,j;i=babelHelpers.inherits(k,c("React").Component);j=i&&i.prototype;function k(){__p&&__p();var l,m;"use strict";for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=j.constructor).call.apply(l,[this].concat(o)),this.renderImages=function(){__p&&__p();if(!this.props.srcs)return null;var q=this.props.srcs,r=Array.isArray(q);if(r){q=q.filter(function(s){return s!==null});if(!q.length)return null}if(!r||q.length==1)return this.renderOne(r?q[0]:q);return q.length==2?this.renderTwo(q):this.renderThree(q)}.bind(this),this.renderOne=function(q){return c("React").createElement(c("Image.react"),{src:q,width:this.props.size,height:this.props.size,alt:""})}.bind(this),this.renderTwo=function(q){var r=this.props.size,s=Math.floor(r/2),t=-Math.floor(s/2),u="_55lu"+(this.props.border?" _57xo":"");return c("React").createElement("div",null,c("React").createElement("div",{className:"_55lu",style:{width:s}},c("React").createElement(c("Image.react"),{src:q[0],width:r,height:r,style:{marginLeft:t},alt:""})),c("React").createElement("div",{className:u,style:{width:s}},c("React").createElement(c("Image.react"),{src:q[1],width:r,height:r,style:{marginLeft:t},alt:""})))}.bind(this),this.renderThree=function(q){var r=this.props.size,s=Math.floor(r/3*2),t=-Math.floor((r-s)/2),u=Math.floor(r/2),v=r-s,w=-Math.floor((u-v)/2),x="_55lu"+(this.props.border?" _57pl":""),y="_55lu"+(this.props.border?" _57pm":"");return c("React").createElement("div",null,c("React").createElement("div",{className:x,style:{width:s}},c("React").createElement(c("Image.react"),{src:q[0],width:r,height:r,style:{marginLeft:t},alt:""})),c("React").createElement("div",{className:y,style:{width:v,height:u}},c("React").createElement(c("Image.react"),{src:q[1],width:u,height:u,style:{marginLeft:w},alt:""})),c("React").createElement("div",{className:"_55lu",style:{width:v,height:u}},c("React").createElement(c("Image.react"),{src:q[2],width:u,height:u,style:{marginLeft:w},alt:""})))}.bind(this),m}k.prototype.render=function(){"use strict";var l=babelHelpers["extends"]({},this.props);delete l.srcs;var m=this.props.size;return c("React").createElement("div",babelHelpers["extends"]({},l,{className:c("joinClasses")(this.props.className,"_55lt"),style:babelHelpers["extends"]({},this.props.style||{},{width:m,height:m})}),this.renderImages())};f.exports=k}),null);
__d("MercuryParticipantsImage.react",["MercuryParticipants","React","SplitImage.react","areEqual"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("React").PropTypes,i=c("React").createClass({displayName:"MercuryParticipantsImage",_bigImageToken:null,propTypes:{className:h.string,participants:h.array.isRequired,partiesProfileImages:h.arrayOf(h.string),size:h.number},getInitialState:function j(){return{participantImages:[]}},componentDidMount:function j(){this._getParticipantImages(this.props)},componentWillReceiveProps:function j(k){this._getParticipantImages(k)},componentWillUnmount:function j(){this._bigImageToken&&this._bigImageToken.remove()},shouldComponentUpdate:function j(k,l){return k.size!==this.props.size||!c("areEqual")(l.participantImages,this.state.participantImages)},render:function j(){if(this.state.participantImages.length>0)return c("React").createElement(c("SplitImage.react"),{border:true,className:this.props.className,srcs:this.state.participantImages,size:this.props.size});return null},_getParticipantImages:function j(k){this._bigImageToken&&this._bigImageToken.remove();if(!k.participants||!k.participants.length)this.setState({participantImages:[]});else this._bigImageToken=c("MercuryParticipants").getOrderedBigImageMulti(k.participants,function(l){if(k.partiesProfileImages)l=l.concat(k.partiesProfileImages);this.isMounted()&&this.setState({participantImages:l})}.bind(this))}});f.exports=i}),null);
__d("MercuryThreadImage.react",["cx","ImmutableObject","MercuryIDs","MercuryParticipantsImage.react","MessagingThreadType","MercuryParticipantsConstants","Pixelz.react","React","areEqual"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("React").PropTypes;i=babelHelpers.inherits(l,c("React").Component);j=i&&i.prototype;l.prototype.shouldComponentUpdate=function(m,n){return m.thread.image_src!==this.props.thread.image_src||!c("areEqual")(m.thread.participants,this.props.thread.participants)||m.size!==this.props.size||m.viewer!==this.props.viewer||m.useBackground!==this.props.useBackground};l.prototype.render=function(){__p&&__p();var m=this.props.thread,n=this.props.size||c("MercuryParticipantsConstants").BIG_IMAGE_SIZE,o=m.image_src;if(o){if(this.props.useBackground)return c("React").createElement("div",{style:{height:n,backgroundImage:"url("+o+")",backgroundPosition:"50% 50%",backgroundRepeat:"no-repeat",backgroundSize:"cover",width:n}});return c("React").createElement(c("Pixelz.react"),{alt:"",height:n,resizeMode:"cover",src:o,width:n})}if(m.thread_type===c("MessagingThreadType").ROOM){var p={height:n+"px",width:n+"px"};if(m.custom_color)p.background=m.custom_color;return c("React").createElement("span",{className:"_asv _asw",style:p},m.name[0])}var q=c("MercuryIDs").isCanonical(m.thread_id),r=c("MercuryIDs").getParticipantIDFromUserID(this.props.viewer),s=[];if(m.participants)s=q?m.participants.filter(function(t){return t!==r}):m.participants.slice(0,3);if(s.length===0&&q)s.push(r);return c("React").createElement(c("MercuryParticipantsImage.react"),{className:this.props.className,participants:s,size:n})};function l(){i.apply(this,arguments)}l.propTypes={thread:k.instanceOf(c("ImmutableObject")).isRequired,viewer:k.string.isRequired,size:k.number,useBackground:k.bool};f.exports=l}),null);
__d("mercuryThreadImageReact",["ReasonReact","bs_js_null_undefined","MercuryThreadImage.react"],(function a(b,c,d,e,f,g){"use strict";function h(i,j,k,l,m){return c("ReasonReact").wrapJsForReason(c("MercuryThreadImage.react"),{size:c("bs_js_null_undefined").from_opt(i),thread:j,useBackground:c("bs_js_null_undefined").from_opt(k),viewer:l},m)}g.make=h}),null);
__d("optionType",["bs_curry"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(j,k,l){if(j)if(k)return c("bs_curry")._2(l,j[0],k[0]);else return 0;else if(k)return 0;else return 1}function i(j,k){if(j)if(k)return+(j[0]===k[0]);else return 0;else if(k)return 0;else return 1}g.equals=h;g.equalsReference=i}),null);
__d("messengerThreadImageReact",["utilsRe","MercuryIDs","optionType","CurrentUser","ReasonReact","bs_js_primitive","mercuryThreadImageReact","messengerProfileImageWrapperReact"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(m,n){__p&&__p();var o=m.other_user_fbid,p=n.size,q=+c("MercuryIDs").isCanonical(m.thread_id);if(o==null)return 0;else if(q!==0)if(p!==0){var r=c("MercuryIDs").getParticipantIDFromUserID(o),s=n.get(r);if(!(s==null)&&!(s==null))return c("utilsRe").isTruthy(s.is_messenger_user);else return 0}else return 0;else return 0}function i(m){__p&&__p();if(c("CurrentUser").isWorkUser())return+m.every(function(n,o,p){if(n==null)return true;else{var q=n.is_coworker;if(q==null)return true;else return q}});else return 0}var j=c("ReasonReact").statelessComponentWithRetainedProps("MessengerThreadImageReact");function k(m,n,o,p,q,r,s){__p&&__p();var t=n?n[0]:0,u=j.slice();u[8]=function(v){var w=v[1][3],x=v[0][3];if(x[0]!==w[0]||x[1]!==w[1]||!c("optionType").equalsReference(x[2],w[2])||x[3]!==w[3]||x[4]!==w[4])return 1;else return+(x[5]!==w[5])};u[9]=function(){var v=1-i(p);return c("ReasonReact").element(0,0,c("messengerProfileImageWrapperReact").make(0,0,[h(q,p)],0,c("bs_js_primitive").null_undefined_to_opt(q.custom_color),c("bs_js_primitive").null_undefined_to_opt(q.thread_type),0,o,[v],m,t&&+c("MercuryIDs").isCanonical(q.thread_id)||v,[c("ReasonReact").element(0,0,c("mercuryThreadImageReact").make(o,q,[true],r,[]))]))};u[11]=[m,t,o,h(q,p),q,r];return u}var l=c("ReasonReact").wrapReasonForJs(j,function(m){return k(c("bs_js_primitive").null_undefined_to_opt(m.className),[c("utilsRe").isTruthy(m.showBadge)],c("bs_js_primitive").null_undefined_to_opt(m.size),m.participants,m.thread,m.viewer,[])});g.getIsMessengerUser=h;g.areAllCoworkers=i;g.component=j;g.make=k;g.jsComponent=l}),null);
__d("messengerContactListRowReact",["cx","ix","fbt","bs_array","bs_block","bs_curry","React","utilsRe","linkReact","imageReact","bs_js_boolean","MercuryIDs","ReasonReact","TooltipData","joinClasses","bs_js_primitive","PresenceStatus","imageBlockReact","AvailableListConstants","MercuryParticipantTypes","messengerLocalTimeReact","MessengerAdminGroupUtils","messengerContactActionsRe","messengerThreadImageReact","messengerContactImageReact","messengerTextWithEntitiesReact"],(function aa(ba,a,ca,da,ea,b,fa,c,d){"use strict";__p&&__p();function e(r,s){if(r)return+r[0].contains(s);else return 0}function f(r,s,t){__p&&__p();var u=t.photo,v=0;if(u==null)v=1;else if(u==="")v=1;else return a("ReasonReact").element(0,0,a("messengerContactImageReact").make(["_5l39 _5rmm"],0,a("utilsRe").nullUndefinedBooleanToOptionBool(t.isMessengerUser),0,32,[u],a("utilsRe").nullUndefinedBooleanToOptionBool(t.isCoworker),[]));if(v===1){var w=t.thread,x=t.participants,y=+(t.type===a("MercuryParticipantTypes").THREAD),z=0,A,B;if(s)if(x==null)z=2;else if(y!==0){A=s[0];B=x;z=3}else z=2;else if(w==null)z=2;else if(x==null)z=2;else if(y!==0){A=w;B=x;z=3}else z=2;switch(z){case 2:return a("React").createElement("div",{className:"_5l39"});case 3:return a("ReasonReact").element(0,0,a("messengerThreadImageReact").make(["_5l39"],0,[32],B,A,r,[]))}}}function g(r){var s=r.subtitle,t=0;if(s==null)t=1;else if(s==="")t=1;else return a("React").createElement("div",undefined,a("React").createElement("div",{className:"_3q34"},a("ReasonReact").element(0,0,a("messengerTextWithEntitiesReact").make([1],[1],[r.title],[]))),a("React").createElement("div",{className:"_3q35"},s));if(t===1)return a("React").createElement("div",{className:"_364g"},r.title,a("ReasonReact").element(0,0,a("messengerLocalTimeReact").make("_5ywd",a("bs_js_primitive").null_undefined_to_opt(r.timezone),[])))}function h(r,s){__p&&__p();var t=s.type;if(r)if(r[0]!==0)if(t==null)return 0;else if(t===a("MercuryParticipantTypes").FRIEND||t===a("MercuryParticipantTypes").USER){var u=a("MercuryIDs").getUserIDFromParticipantID(s.uid);if(u==null)return 0;else return+(a("PresenceStatus").get(u)===a("AvailableListConstants").ACTIVE)}else return 0;else return 0;else return 0}var i=a("React").createElement("span",{className:"_5rh4"},d._("Added")),j=a("React").createElement("span",{className:"_5rh4"},d._("Invited")),k=a("ReasonReact").element(0,0,a("imageReact").make(["_1kqm"],0,[c("86852")],0,0,0,0,[]));function l(r,s){s[2][2][0]=r==null?0:[r];return 0}function m(r){__p&&__p();var s=r[3],t=s[1],u=s[2],v=r[2][2][0];if(t)if(t[0]!==0)if(u)if(v){var w=v[0];a("bs_curry")._1(u[0],w);var x=s[3];if(x)a("bs_curry")._1(x[0],w)}return 0}function n(r){__p&&__p();var s=r[1],t=s[3][1],u=r[0][3][2],v=s[2][2][0];if(t)if(t[0]!==0)if(u)if(v){var w=v[0];a("bs_curry")._1(u[0],w);var x=s[3][3];if(x)return a("bs_curry")._1(x[0],w);else return 0}else return 0;else return 0;else return 0;else return 0}function o(r){return[r]}function p(){__p&&__p();var r=a("ReasonReact").reducerComponentWithRetainedProps("MessengerContactListRowReact"),s=function s(u,v,w,x,y,z,A,B,C,D,E,F,G,ga,ha,H,I,ia,ja,J,K,L,ka){__p&&__p();var la=H?H[0]:"",M=function M(R){if(z)return 0;else{R.stopPropagation();R.preventDefault();return 0}},N=function N(R,S){if(R===a("messengerContactActionsRe").actions.SELECT)return a("bs_curry")._2(x,v,S);else if(y)return a("bs_curry")._2(y[0],R,v);else return 0},O=function O(){var R=a("utilsRe").isSomeTrue(D);if(R!==0&&w)return a("bs_curry")._1(w[0],v);else return 0},P=function P(R){R.stopPropagation();return N(a("messengerContactActionsRe").actions.SELECT,R)},Q=function Q(R){__p&&__p();var S=R[2],T;if(I){var U=I[0].get(S[0].uid);T=U==null?[null,1]:[U,1]}else T=[null,0];if(e(ha,S[0].uid))return i;else if(e(E,S[0].uid))return j;else if(e(ia,S[0].uid))return k;else if(T[1])return T[0];else if(h(ja,S[0]))return a("React").createElement("div",{className:"_jg2"});else{var V=A?a("utilsRe").arrayCompact(A[0]):undefined,W=S[0].thread,X,Y=0,Z;if(J){Z=J[0];Y=1}else if(W==null)X=0;else{Z=W;Y=1}if(Y===1){var ma=+a("MessengerAdminGroupUtils").isAdmin(V,S[0].uid);X=+a("MessengerAdminGroupUtils").isOwner(a("bs_js_boolean").to_js_boolean(ma),Z)}var $=X!==0?a("React").createElement("span",{className:"_5qsj"},d._("Admin")):null;if(z)return a("React").createElement("div",undefined,$,a("React").createElement(z[0],{className:"_rwo",adminIds:V,contact:S[0],extrasEnabled:a("bs_js_boolean").to_js_boolean(C),isOpen:a("bs_js_boolean").to_js_boolean(S[1]),onAction:N,onToggle:a("bs_curry")._1(R[1],o),viewer:L}));else return $}};return[r[0],r[1],r[2],function(R){var S=R[2],T=+(v===R[3][0]);return[T!==0?S[0]:a("bs_curry")._1(u,v),S[1],S[2]]},m,n,r[6],r[7],r[8],function(R){var S=R[2],T=a("joinClasses")(la,"_5l37"+(a("utilsRe").optionBoolToBoolean(F)?" _1k1p":"")+(a("bs_js_boolean").to_js_boolean(S[1])?" _rwn":"")),U=z?-1:0,V={"aria-hidden":a("utilsRe").optionBoolToNullUndefinedBoolean(F)},W=K?Object.assign(V,a("TooltipData").propsFor(K[0],"left")):{},X=a("ReasonReact").element(0,0,a("linkReact").make(0,["_5f0v"],0,0,0,0,0,[P],[M],[O],0,0,[U],0,0,a("ReasonReact").element(0,0,a("imageBlockReact").make(0,["_5l38"],0,["medium"],[f(L,J,S[0]),g(S[0]),Q(R)])))),Y=a("utilsRe").isSomeTrue(B);if(Y!==0)return a("React").createElement("li",{ref:a("bs_curry")._1(R[0],l),className:T},X);else return a("React").cloneElement(a("React").createElement("li",{ref:a("bs_curry")._1(R[0],l),className:T,role:"option"}),W,X)},function(){return[a("bs_curry")._1(u,v),0,[0]]},[v,F,ga,G],function(R,S){return a("bs_block").__(0,[[S[0],R[0],S[2]]])},r[13],r[14]]},t=a("ReasonReact").wrapReasonForJs(r,function(u){var v=u.adminIds;return s(u.contactAdapter,u.rawContact,a("bs_js_primitive").null_undefined_to_opt(u.onHighlight),u.onSelect,a("bs_js_primitive").null_undefined_to_opt(u.onAction),a("bs_js_primitive").null_undefined_to_opt(u.actionsClass),v==null?0:[a("bs_array").map(function(w){if(w==null)return 0;else return[w]},v)],a("utilsRe").nullUndefinedBooleanToOptionBool(u.disableRole),+u.extraActionsEnabled,a("utilsRe").nullUndefinedBooleanToOptionBool(u.hasHoverState),a("bs_js_primitive").null_undefined_to_opt(u.invitedEntryIDs),a("utilsRe").nullUndefinedBooleanToOptionBool(u.isHighlighted),a("bs_js_primitive").null_undefined_to_opt(u.onRenderHighlight),a("bs_js_primitive").null_undefined_to_opt(u.onScrollIntoView),a("bs_js_primitive").null_undefined_to_opt(u.originalEntryIDs),a("bs_js_primitive").null_undefined_to_opt(u.rowClassName),a("bs_js_primitive").null_undefined_to_opt(u.rowElements),a("bs_js_primitive").null_undefined_to_opt(u.selectedEntryIDs),a("utilsRe").nullUndefinedBooleanToOptionBool(u.showPresence),a("bs_js_primitive").null_undefined_to_opt(u.thread),a("bs_js_primitive").null_undefined_to_opt(u.tooltipContent),u.viewer,[])});return[t,s]}var q=32;b.imageSize=q;b.idsContain=e;b.renderContactImage=f;b.renderContactText=g;b.getPresenceStatus=h;b.isOriginal=i;b.isInvited=j;b.isSelected=k;b.setThisRef=l;b.didMount=m;b.didUpdate=n;b.actionsToggle=o;b.createMake=p}),null);
__d("MessengerContactList.react",["cx","fbt","messengerContactListRowReact","ImageBlock.react","immutable","ImmutableObject","MessengerSpinner.react","React","joinClasses"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("messengerContactListRowReact").createMake(),m=l[0],n=l[1],o=c("React").PropTypes;j=babelHelpers.inherits(p,c("React").PureComponent);k=j&&j.prototype;function p(){var q,r;for(var s=arguments.length,t=Array(s),u=0;u<s;u++)t[u]=arguments[u];return r=(q=k.constructor).call.apply(q,[this].concat(t)),this.$MessengerContactList1=function(v,w){return c("React").createElement("div",{key:w,className:"_29hk"},this.$MessengerContactList4(w),c("React").createElement("ul",{id:this.props.controlleeID,role:this.props.disableRole?undefined:"listbox",className:"_29hl"},v.map(function(x,y){var z=y===0?c("joinClasses")(this.props.rowClassName,"_3h3c"):this.props.rowClassName;return c("React").createElement(m,{actionsClass:this.props.actionsClass,adminIds:this.props.adminIds,contactAdapter:this.props.contactAdapter,disableRole:this.props.disableRole,extraActionsEnabled:!!this.props.extraActionsEnabled,hasHoverState:this.props.hasHoverState,invitedEntryIDs:this.props.invitedEntryIDs,isHighlighted:this.props.highlightedEntry&&this.props.highlightedEntry.getUniqueID()===x.getUniqueID(),key:x.id||x.getUniqueID(),onAction:this.props.onAction,onHighlight:this.props.onHighlight,onRenderHighlight:this.props.onRenderHighlight,onScrollIntoView:this.props.onScrollIntoView,onSelect:this.props.onSelect,originalEntryIDs:this.props.originalEntryIDs,rawContact:x,rowClassName:z,rowElements:this.props.rowElements,selectedEntryIDs:this.props.selectedEntryIDs,showPresence:this.props.showPresence,thread:this.props.thread,tooltipContent:x.getAuxiliaryData&&x.getAuxiliaryData().tooltipContent,viewer:this.props.viewer})}.bind(this))))}.bind(this),r}p.prototype.render=function(){return c("React").createElement("div",{className:this.props.className},this.props.listSections.map(this.$MessengerContactList1).toArray(),this.$MessengerContactList2(),this.$MessengerContactList3())};p.prototype.$MessengerContactList4=function(q){if(!q)return null;return c("React").createElement("div",{className:"_225b"},q)};p.prototype.$MessengerContactList2=function(){if(!this.props.isLoading)return null;return c("React").createElement(c("ImageBlock.react"),{className:"_225c",spacing:"medium"},c("React").createElement(c("MessengerSpinner.react"),{className:"_2i59",color:"grey"}),c("React").createElement("div",{className:"_4g0h"},i._("Searching...")))};p.prototype.$MessengerContactList3=function(){if(this.props.isLoading||this.props.listSections.size>0||!this.props.queryString||this.props.queryString.length===0)return null;return c("React").createElement("div",{className:"_3xcx"},i._("No results found"))};p.propTypes={actionsClass:o.func,adminIds:o.arrayOf(o.string),controlleeID:o.string,contactAdapter:o.func.isRequired,disableRole:o.bool,extraActionsEnabled:o.bool,hasHoverState:o.bool,highlightedEntry:o.object,invitedEntryIDs:o.instanceOf(c("immutable").Set),isLoading:o.bool,listSections:o.instanceOf(c("immutable").OrderedMap).isRequired,onAction:o.func,onHighlight:o.func,onRenderHighlight:o.func,onScrollIntoView:o.func,onSelect:o.func.isRequired,originalEntryIDs:o.instanceOf(c("immutable").Set),queryString:o.string,rowClassName:o.string,rowElements:o.instanceOf(c("immutable").Map),selectedEntryIDs:o.instanceOf(c("immutable").Set),showPresence:o.bool,thread:o.instanceOf(c("ImmutableObject")),viewer:o.string.isRequired};f.exports=p}),null);
__d("MessengerTypeaheadResultView.react",["cx","immutable","Keys","MercuryConfig","MessengerContactAdapters","MessengerContactList.react","MessengerGraphQLTypeaheadHighlighter","MessengerSearchFunnelLogger","MessengerTypeaheadUtils","MessengerGraphQLTypeaheadAdapter","MercuryParticipantTypes","MercuryTypeaheadConstants","React","RelayModern","SearchableEntry","idx","gkx","joinClasses","wrapNullableForReact","MessengerTypeaheadResultView_profiles.graphql","MessengerTypeaheadResultView_groups.graphql","MessengerTypeaheadResultView_roomAudience.graphql"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("RelayModern").createFragmentContainer,l=c("RelayModern").graphql,m=50,n=c("MercuryConfig").SearchMorePeople?c("MercuryConfig").SearchMorePeople:c("MercuryTypeaheadConstants").COMPOSER_NON_FRIENDS_MAX,o=c("gkx")("AT5THIpM4AckuNbWpijh61vC-OipSixPqueb6Cl8xvxjybMRxdw8oN5RZdz305TVhpkiPlzS7Sc53JEnbqyboPGn"),p=c("React").PropTypes;i=babelHelpers.inherits(q,c("React").Component);j=i&&i.prototype;function q(){__p&&__p();var r,s;for(var t=arguments.length,u=Array(t),v=0;v<t;v++)u[v]=arguments[v];return s=(r=j.constructor).call.apply(r,[this].concat(u)),this.$MessengerTypeaheadResultView1=null,this.onKeyDown=function(w){if(w===c("Keys").RETURN){this.props.onSelectHighlighted();return}if(!this.$MessengerTypeaheadResultView1)return;var x=c("MessengerGraphQLTypeaheadHighlighter").getNextHighlightedEntry(w,this.$MessengerTypeaheadResultView1,this.props.queryString,this.props.highlightedEntry);this.props.onNextHighlighted(x)}.bind(this),this.$MessengerTypeaheadResultView3=function(w){this.props.onNextHighlighted(w)}.bind(this),s}q.prototype.componentWillMount=function(){this.$MessengerTypeaheadResultView1=this.$MessengerTypeaheadResultView2(this.props)};q.prototype.componentDidMount=function(){this.props.onMount(this.onKeyDown)};q.prototype.componentWillUpdate=function(r){this.$MessengerTypeaheadResultView1=this.$MessengerTypeaheadResultView2(r)};q.prototype.componentWillUnmount=function(){this.props.onUnmount()};q.prototype.render=function(){var r=this.$MessengerTypeaheadResultView1;if(!r)return null;return c("React").createElement(c("MessengerContactList.react"),{controlleeID:this.props.controlleeID,className:c("joinClasses")(this.props.className,"_4p-s"),contactAdapter:c("MessengerContactAdapters").fromSearchableEntry,hasHoverState:this.props.hasHoverState,highlightedEntry:c("wrapNullableForReact")(this.props.highlightedEntry),isLoading:false,listSections:c("MessengerTypeaheadUtils").buildListSections(r,this.props.queryString),onHighlight:this.$MessengerTypeaheadResultView3,onScrollIntoView:this.props.onScrollIntoView,onSelect:this.props.onSelect,originalEntryIDs:this.props.originalEntryIDs,queryString:this.props.queryString,selectedEntryIDs:this.props.selectedEntryIDs,showPresence:false,viewer:this.props.viewer})};q.prototype.$MessengerTypeaheadResultView2=function(r){var s=r.localEntries,t={};s.forEach(function(w){t[w.getUniqueID()]=true});var u=c("MessengerTypeaheadUtils").sortEntries(this.$MessengerTypeaheadResultView4(r,t),r.queryString),v=s.concat(u).filter(function(w){return!r.selectedEntryIDs.contains(w.getUniqueID())}).slice(0,m);c("MessengerSearchFunnelLogger").logUpdateQuery("WWW_MESSENGER_SEARCH_SESSION_FUNNEL","fetched_state_impression_list",r.queryString,v.map(function(w){return w.getUniqueID()}));return v};q.prototype.$MessengerTypeaheadResultView4=function(r,s){__p&&__p();var t=r.serverGroups;if(o){t=t.concat(r.serverProfiles.filter(function(D){return D&&!s[D.getUniqueID()]}));t=t.concat(r.serverPages.filter(function(D){return D&&!s[D.getUniqueID()]}).slice(0,c("MercuryTypeaheadConstants").COMPOSER_PAGES_MAX))}if(r.profiles){var u,v=(u=r)!=null?(u=u.profiles)!=null?(u=u.user_results)!=null?u.edges:u:u:u;if(v){t=v.map(function(L){return c("MessengerGraphQLTypeaheadAdapter").convertProfileToEntry(L.node)});var w=[],x=[],y=[];for(var z=t,A=Array.isArray(z),B=0,z=A?z:z[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var C;if(A){if(B>=z.length)break;C=z[B++]}else{B=z.next();if(B.done)break;C=B.value}var D=C;if(!D||s[D.getUniqueID()])continue;if(D.getType()===c("MercuryParticipantTypes").FRIEND&&w.length<c("MercuryTypeaheadConstants").COMPOSER_FRIENDS_MAX)w.push(D);else if(D.getType()===c("MercuryParticipantTypes").FB4C&&x.length<c("MercuryTypeaheadConstants").COMPOSER_FB4C_MAX)x.push(D);else if(D.getType()===c("MercuryParticipantTypes").NON_FRIEND&&y.length<n)y.push(D)}t=w.concat(x).concat(y)}}else if(r.roomAudience){var E,F=(E=r)!=null?(E=E.roomAudience)!=null?(E=E.user_results)!=null?E.edges:E:E:E;if(F)t=t.concat(F.map(function(L){return c("MessengerGraphQLTypeaheadAdapter").convertProfileToEntry(L.node)}))}if(r.profiles&&r.profiles.page_results)t=t.concat(r.profiles.page_results.edges.map(function(L){return c("MessengerGraphQLTypeaheadAdapter").convertPageToEntry(L.node,this.$MessengerTypeaheadResultView5(L.node))}.bind(this)).filter(function(D){return D&&!s[D.getUniqueID()]}).slice(0,c("MercuryTypeaheadConstants").COMPOSER_PAGES_MAX));var G=[],H=[];if(r.groups&&r.groups.threads_matching_name)H=H.concat(r.groups.threads_matching_name.edges);if(r.groups&&r.groups.threads_matching_participant_ids)H=H.concat(r.groups.threads_matching_participant_ids.edges);if(r.groups&&r.groups.threads_matching_participant_names)H=H.concat(r.groups.threads_matching_participant_names.edges);for(var I=0;I<H.length;I++){var J=H[I],K=c("MessengerGraphQLTypeaheadAdapter").convertGroupToEntry(J.node,I);if(!K||s[K.getUniqueID()])continue;G.push(K);s[K.getUniqueID()]=true}t=t.concat(G);if(r.profiles&&r.profiles.vc_results)t=t.concat(r.profiles.vc_results.edges.map(function(L){return c("MessengerGraphQLTypeaheadAdapter").convertPageToEntry(L.node,c("MercuryTypeaheadConstants").MEETING_ROOM_PAGE_TYPE)}));if(r.profiles&&r.profiles.internal_bot_results)t=t.concat(r.profiles.internal_bot_results.edges.map(function(L){return c("MessengerGraphQLTypeaheadAdapter").convertPageToEntry(L.node,c("MercuryTypeaheadConstants").INTERNAL_BOT_PAGE_TYPE)}));return t};q.prototype.$MessengerTypeaheadResultView5=function(r){if(!r||!r.category_type)return c("MercuryParticipantTypes").PAGE;if(r.category_type===c("MercuryTypeaheadConstants").WORKPLACE_BOT_CATEGORY_TYPE)return c("MercuryTypeaheadConstants").INTERNAL_BOT_PAGE_TYPE;return c("MercuryTypeaheadConstants").PAGE_TYPE};q.propTypes={controlleeID:p.string.isRequired,canViewerSendMoneyFilter:p.bool,className:p.string.isRequired,localEntries:p.arrayOf(p.instanceOf(c("SearchableEntry"))).isRequired,localEntryIDs:p.arrayOf(p.string.isRequired).isRequired,hasHoverState:p.bool.isRequired,highlightedEntry:p.object,onMount:p.func.isRequired,onNextHighlighted:p.func.isRequired,onScrollIntoView:p.func.isRequired,onSelect:p.func.isRequired,onSelectHighlighted:p.func.isRequired,onUnmount:p.func.isRequired,originalEntryIDs:p.instanceOf(c("immutable").Set).isRequired,queryString:p.string.isRequired,selectedEntryIDs:p.instanceOf(c("immutable").Set).isRequired,serverGroups:p.arrayOf(p.instanceOf(c("SearchableEntry"))).isRequired,serverPages:p.arrayOf(p.instanceOf(c("SearchableEntry"))).isRequired,serverProfiles:p.arrayOf(p.instanceOf(c("SearchableEntry"))).isRequired,shouldQueryInternalBot:p.bool.isRequired,shouldQueryPages:p.bool.isRequired,shouldQueryVCEndpoint:p.bool.isRequired,viewer:p.string.isRequired};q.defaultProps={controlleeID:"",className:""};f.exports=o?q:k(q,{profiles:function r(){return c("MessengerTypeaheadResultView_profiles.graphql")},groups:function r(){return c("MessengerTypeaheadResultView_groups.graphql")},roomAudience:function r(){return c("MessengerTypeaheadResultView_roomAudience.graphql")}})}),null);
__d("MessengerTypeaheadTopFriendsView.react",["cx","immutable","Keys","MessengerContactAdapters","MessengerContactList.react","MessengerGraphQLTypeaheadHighlighter","MessengerTypeaheadUtils","React","joinClasses","wrapNullableForReact"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("React").PropTypes;i=babelHelpers.inherits(l,c("React").Component);j=i&&i.prototype;function l(){__p&&__p();var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.onKeyDown=function(r){if(r===c("Keys").RETURN){this.props.onSelectHighlighted();return}var s=c("MessengerGraphQLTypeaheadHighlighter").getNextHighlightedEntry(r,this.props.entries.toArray(),this.props.queryString,this.props.highlightedEntry);this.props.onNextHighlighted(s)}.bind(this),this.$MessengerTypeaheadTopFriendsView1=function(r){this.props.onNextHighlighted(r)}.bind(this),n}l.prototype.componentWillMount=function(){if(this.props.hasHoverState)if(this.props.entries.size>0)this.props.onNextHighlighted(this.props.entries.first())};l.prototype.componentDidMount=function(){this.props.onMount(this.onKeyDown)};l.prototype.componentWillUnmount=function(){this.props.onUnmount()};l.prototype.render=function(){return c("React").createElement(c("MessengerContactList.react"),{controlleeID:this.props.controlleeID,className:c("joinClasses")(this.props.className,"_4p-s"),contactAdapter:c("MessengerContactAdapters").fromSearchableEntry,hasHoverState:this.props.hasHoverState,highlightedEntry:c("wrapNullableForReact")(this.props.highlightedEntry),isLoading:!!this.props.queryString,listSections:c("MessengerTypeaheadUtils").buildListSections(this.props.entries.toArray(),this.props.queryString),onHighlight:this.$MessengerTypeaheadTopFriendsView1,onScrollIntoView:this.props.onScrollIntoView,onSelect:this.props.onSelect,originalEntryIDs:this.props.originalEntryIDs,queryString:this.props.queryString,selectedEntryIDs:this.props.selectedEntryIDs,showPresence:false,viewer:this.props.viewer})};l.propTypes={controlleeID:k.string.isRequired,className:k.string.isRequired,entries:k.instanceOf(c("immutable").List).isRequired,hasHoverState:k.bool.isRequired,highlightedEntry:k.object,onNextHighlighted:k.func.isRequired,onMount:k.func.isRequired,onScrollIntoView:k.func.isRequired,onSelect:k.func.isRequired,onSelectHighlighted:k.func.isRequired,onUnmount:k.func.isRequired,originalEntryIDs:k.instanceOf(c("immutable").Set).isRequired,queryString:k.string.isRequired,selectedEntryIDs:k.instanceOf(c("immutable").Set).isRequired,viewer:k.string.isRequired};l.defaultProps={controlleeID:"",className:""};f.exports=l}),null);
__d("promiseFinally",["Promise"],(function a(b,c,d,e,f,g){function h(i,j){return i.then(function(k){return c("Promise").resolve(j()).then(function(){return k})},function(k){return c("Promise").resolve(j()).then(function(){throw k})})}f.exports=h}),null);
__d("PromiseUtil",["Promise","nullthrows","promiseFinally"],(function a(b,c,d,e,f,g){__p&&__p();var h={allSettled:function i(j){var k=c("Promise").all(j);return c("Promise").all(j.map(function(l){return c("Promise").resolve(l).then(undefined,function(m){return undefined})})).then(function(){return k})},allSettledInSeries:function i(j){var k=[];return j.reduce(function(l,m){return l.then(m).then(function(){return undefined},function(n){k.push(n);return undefined})},c("Promise").resolve()).then(function(){if(k.length)throw k[0]})},exponentialBackoff:function i(j){var k=arguments.length<=1||arguments[1]===undefined?Math.sqrt(2):arguments[1],l=arguments.length<=2||arguments[2]===undefined?1:arguments[2],m=l,n=function n(){var o=m;m*=k;return o};return h.rateLimit(j,n)},forEach:function i(j,k){return j.then(function(l){return c("Promise").resolve(k(l)).then(function(){return l})})},forEachError:function i(j,k){return j.then(undefined,function(l){return c("Promise").resolve(k(l)).then(function(){throw l})})},iterateUntil:function i(j,k){var l=function l(m){return k(m)?c("Promise").resolve(m):c("Promise").resolve(j(m)).then(l)};return l},pollUntilImpl:function i(j,k){__p&&__p();var l=void 0,m=new(c("Promise"))(function(n,o){var p=function p(){try{var q=j();if(q)n(q.value)}catch(r){o(r)}};l=setInterval(p,1e3*k)});return c("promiseFinally")(m,function(){return clearInterval(c("nullthrows")(l))})},pollUntil:function i(j){var k=arguments.length<=1||arguments[1]===undefined?1:arguments[1];return h.pollUntilImpl(function(){var l=j();return l?{value:l}:undefined},k)},rateLimit:function i(j,k){__p&&__p();var l=[],m=undefined,n=0;return function(){__p&&__p();var o=k();for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];l=q;if(!m)m=h.wait(n+o-Date.now()/1e3).then(function(){n=Date.now()/1e3;m=undefined;return j.apply(undefined,l)});return m}},rateLimitWithLastResult:function i(j,k){var l=false,m=undefined;return function(){if(!l){h.wait(k()).done(function(){return l=false});m=j.apply(undefined,arguments);l=true}return m}},repeatUntil:function i(j,k){var l=function l(){return c("Promise").resolve(j()).then(function(m){return k(m)?c("Promise").resolve(m):l()})};return l},repeatWhileErrorUntil:function i(j,k,l){var m=function m(){return c("Promise").resolve(j()).then(function(n){k(n);return c("Promise").resolve(n)},function(n){return l(n)?m():c("Promise").reject(n)})};return m},series:function i(j,k){var l=k;return j.reduce(function(m,n){return m.then(n)},c("Promise").resolve(l))},wait:function i(j){return 0<j?new(c("Promise"))(function(k,l){return setTimeout(k,1e3*j)}):c("Promise").resolve()},waitAtMost:function i(j,k){return h.waitOrElse(j,k,function(){throw new Error("Promise timed out")})},waitOrElse:function i(j,k,l){var m=false;return c("Promise").race([j.then(function(n){m=true;return n},function(n){m=true;throw n}),h.wait(k).then(function(){return m?undefined:l()})])}};f.exports=h}),null);
__d("MessengerGraphQLTypeaheadView.react",["cx","fbt","Promise","CurrentUser","ImageBlock.react","immutable","MercuryConfig","MercuryParticipantTypes","MercuryTypeaheadConstants","MessengerGroupSearchResultsQueryWebGraphQLQuery","MessengerGraphQLTypeaheadAdapter","MessengerPaymentFriendsLocalCache","MessengerPageSearchResultsQueryWebGraphQLQuery","MessengerNewGroupParticipantSuggestionLocalCacheManager","MessengerProfileSearchResultsQueryWebGraphQLQuery","MessengerRoomAudienceSearchResultsQueryWebGraphQLQuery","MessengerRoomPrivacyMode","MessengerRoomWithAssocObjectAudienceLocalCacheManager","MessengerSearchFunnelLogger","MessengerSpinner.react","MessengerTypeaheadLocalCache","MessengerTypeaheadResultRoute","MessengerTypeaheadResultView.react","MessengerTypeaheadTopFriendsView.react","MessengerTypeaheadUtils","React","RelayFBEnvironment","WebGraphQL","RelayModern","createCancelableFunction","debounce","PromiseUtil","compactArray","idx","gkx","MessengerGraphQLTypeaheadViewQuery.graphql"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l,m=c("RelayModern").graphql,n=c("RelayModern").QueryRenderer,o=c("React").PropTypes,p="WWW_MESSENGER_SEARCH_SESSION_FUNNEL",q=5,r=100,s=c("MercuryConfig").SearchMorePeople?c("MercuryConfig").SearchMorePeople:c("MercuryTypeaheadConstants").COMPOSER_NON_FRIENDS_MAX,t=c("gkx")("AT5THIpM4AckuNbWpijh61vC-OipSixPqueb6Cl8xvxjybMRxdw8oN5RZdz305TVhpkiPlzS7Sc53JEnbqyboPGn"),u=3;k=babelHelpers.inherits(v,c("React").Component);l=k&&k.prototype;function v(){__p&&__p();var w,x;for(var y=arguments.length,z=Array(y),A=0;A<y;A++)z[A]=arguments[A];return x=(w=l.constructor).call.apply(w,[this].concat(z)),this.state={route:null,localEntries:c("immutable").List(),queryCompleteStatus:{usersGroups:!t,pages:!t},serverGroups:[],serverPages:[],serverProfiles:[],highlightedEntry:null},this.$MessengerGraphQLTypeaheadView1=null,this.$MessengerGraphQLTypeaheadView2=null,this.$MessengerGraphQLTypeaheadView3=null,this.$MessengerGraphQLTypeaheadView4=0,this.$MessengerGraphQLTypeaheadView5=0,this.$MessengerGraphQLTypeaheadView6=null,this.$MessengerGraphQLTypeaheadView7=true,this.$MessengerGraphQLTypeaheadView8=c("MessengerRoomWithAssocObjectAudienceLocalCacheManager").get(),this.$MessengerGraphQLTypeaheadView9=c("MessengerNewGroupParticipantSuggestionLocalCacheManager").get(),this.$MessengerGraphQLTypeaheadView12=function(B,C,D,E){if(this.$MessengerGraphQLTypeaheadView7)this.setState({serverProfiles:[],serverGroups:[],serverPages:[]});this.$MessengerGraphQLTypeaheadView24(B,C,D);this.$MessengerGraphQLTypeaheadView25(B);this.$MessengerGraphQLTypeaheadView26(B,C,E)}.bind(this),this.$MessengerGraphQLTypeaheadView16=function(B){this.$MessengerGraphQLTypeaheadView6=B}.bind(this),this.$MessengerGraphQLTypeaheadView19=function(){this.$MessengerGraphQLTypeaheadView6=null}.bind(this),this.$MessengerGraphQLTypeaheadView17=function(B){this.setState({highlightedEntry:B})}.bind(this),this.$MessengerGraphQLTypeaheadView18=function(){if(this.state.highlightedEntry)this.props.onSelect(this.state.highlightedEntry)}.bind(this),x}v.prototype.componentDidMount=function(){this.$MessengerGraphQLTypeaheadView10();this.$MessengerGraphQLTypeaheadView2=c("debounce")(function(){if(!t&&this.$MessengerGraphQLTypeaheadView7){var w=new(c("MessengerTypeaheadResultRoute"))(this.$MessengerGraphQLTypeaheadView11());this.setState({route:w})}}.bind(this),150,this,true);if(t)this.$MessengerGraphQLTypeaheadView3=c("debounce")(this.$MessengerGraphQLTypeaheadView12,150,this,true)};v.prototype.componentWillReceiveProps=function(w){__p&&__p();this.setState({highlightedEntry:null});if(!w.queryString)this.$MessengerGraphQLTypeaheadView10();else if(w.queryString!==this.props.queryString){this.setState({queryCompleteStatus:{userGroupQueryFinished:false,pagesQueryFinished:false}});this.$MessengerGraphQLTypeaheadView2&&this.$MessengerGraphQLTypeaheadView2();var x=w.roomAssociatedObject&&w.roomAssociatedObject.privacy_mode;if(this.$MessengerGraphQLTypeaheadView3)this.$MessengerGraphQLTypeaheadView3(w.queryString,c("MercuryConfig").MaxThreadResults,w.excludeGroups,x===c("MessengerRoomPrivacyMode").WHITELISTED_MODE?w.threadFBID:null);if(x===c("MessengerRoomPrivacyMode").WHITELISTED_MODE){this.$MessengerGraphQLTypeaheadView13(w);return}if(this.props.canViewerSendMoneyFilter){this.$MessengerGraphQLTypeaheadView14(w);return}if(this.props.includeExistingParticipantIDs){this.$MessengerGraphQLTypeaheadView15(w);return}c("MessengerTypeaheadLocalCache").search(w.queryString,function(y,z){__p&&__p();if(this.$MessengerGraphQLTypeaheadView7)if(z===w.queryString){var A=c("MessengerTypeaheadUtils").sortEntries(y,z).slice(0,this.props.maxEntries),B=this.props.enableMessageSearch?c("MessengerTypeaheadUtils").getMessageSearchEntry(z):null;if(B)A.unshift(B);var C=c("immutable").List(A).filter(function(D){if(this.props.excludeGroups&&D.getType()===c("MercuryParticipantTypes").THREAD)return false;if(this.props.excludePages&&D.getType()===c("MercuryParticipantTypes").PAGE)return false;return true}.bind(this));this.setState({localEntries:C})}}.bind(this))}};v.prototype.shouldComponentUpdate=function(w,x){return w.queryString!==this.props.queryString||w.isFocused!==this.props.isFocused||w.excludeGroups!==this.props.excludeGroups||w.excludePages!==this.props.excludePages||x.localEntries!==this.state.localEntries||x.queryCompleteStatus!==this.state.queryCompleteStatus||x.route!==this.state.route||x.highlightedEntry!==this.state.highlightedEntry};v.prototype.componentWillUnmount=function(){if(this.$MessengerGraphQLTypeaheadView1)this.$MessengerGraphQLTypeaheadView1.cancel();if(this.$MessengerGraphQLTypeaheadView3)this.$MessengerGraphQLTypeaheadView3.reset();this.$MessengerGraphQLTypeaheadView7=false};v.prototype.render=function(){__p&&__p();if(!this.props.isFocused&&!this.props.queryString||!c("MessengerTypeaheadLocalCache").isBootstrapped()&&!this.$MessengerGraphQLTypeaheadView8.isBootstrapped(this.props.threadFBID)&&!c("MessengerPaymentFriendsLocalCache").isBootstrapped()&&!this.$MessengerGraphQLTypeaheadView9.isBootstrapped(this.props.threadFBID,this.props.originalEntryIDs))return null;if(!this.props.queryString||!t&&!this.state.route){c("MessengerSearchFunnelLogger").logUpdateQuery(p,"null_state_impression","",this.state.localEntries.toArray().map(function(y){return y.getUniqueID()}));return c("React").createElement(c("MessengerTypeaheadTopFriendsView.react"),{className:this.props.typeaheadViewClassName,entries:this.state.localEntries,hasHoverState:this.props.hasHoverState,highlightedEntry:this.state.highlightedEntry,onMount:this.$MessengerGraphQLTypeaheadView16,onNextHighlighted:this.$MessengerGraphQLTypeaheadView17,onScrollIntoView:this.props.onScrollIntoView,onSelect:this.props.onSelect,onSelectHighlighted:this.$MessengerGraphQLTypeaheadView18,onUnmount:this.$MessengerGraphQLTypeaheadView19,originalEntryIDs:this.props.originalEntryIDs,queryString:this.props.queryString,selectedEntryIDs:this.props.selectedEntryIDs,viewer:this.props.viewer})}if(t){var w=this.state.queryCompleteStatus.usersGroups||this.state.queryCompleteStatus.pages,x=this.state.queryCompleteStatus.usersGroups&&(this.props.excludePages||this.state.queryCompleteStatus.pages);return c("React").createElement("div",null,w?this.$MessengerGraphQLTypeaheadView20():this.$MessengerGraphQLTypeaheadView21(),w&&!x?this.$MessengerGraphQLTypeaheadView22():null)}return c("React").createElement(n,{environment:c("RelayFBEnvironment"),query:j||(j=function j(){return c("MessengerGraphQLTypeaheadViewQuery.graphql")}),render:function(y){var z=y.error,A=y.props;if(z)throw z;else if(A)return this.$MessengerGraphQLTypeaheadView20(A);return this.$MessengerGraphQLTypeaheadView21()}.bind(this),variables:this.$MessengerGraphQLTypeaheadView11()})};v.prototype.$MessengerGraphQLTypeaheadView21=function(){var w=this.state.localEntries.slice(0,q);return c("React").createElement(c("MessengerTypeaheadTopFriendsView.react"),{className:this.props.typeaheadViewClassName,entries:this.$MessengerGraphQLTypeaheadView23(w),hasHoverState:this.props.hasHoverState,highlightedEntry:this.state.highlightedEntry,onNextHighlighted:this.$MessengerGraphQLTypeaheadView17,onMount:this.$MessengerGraphQLTypeaheadView16,onScrollIntoView:this.props.onScrollIntoView,onSelect:this.props.onSelect,onSelectHighlighted:this.$MessengerGraphQLTypeaheadView18,onUnmount:this.$MessengerGraphQLTypeaheadView19,originalEntryIDs:this.props.originalEntryIDs,queryString:this.props.queryString,selectedEntryIDs:this.props.selectedEntryIDs,viewer:this.props.viewer})};v.prototype.$MessengerGraphQLTypeaheadView22=function(){return c("React").createElement(c("ImageBlock.react"),{className:"_225c",spacing:"medium"},c("React").createElement(c("MessengerSpinner.react"),{className:"_2i59",color:"grey"}),c("React").createElement("div",{className:"_4g0h"},i._("Searching...")))};v.prototype.$MessengerGraphQLTypeaheadView20=function(w){var x=this.$MessengerGraphQLTypeaheadView11(),y=this.state.localEntries.slice(0,q);return c("React").createElement(c("MessengerTypeaheadResultView.react"),babelHelpers["extends"]({},w,{className:this.props.typeaheadViewClassName,hasHoverState:this.props.hasHoverState,highlightedEntry:this.state.highlightedEntry,localEntries:y.toArray(),onMount:this.$MessengerGraphQLTypeaheadView16,onNextHighlighted:this.$MessengerGraphQLTypeaheadView17,onScrollIntoView:this.props.onScrollIntoView,onSelect:this.props.onSelect,onSelectHighlighted:this.$MessengerGraphQLTypeaheadView18,onUnmount:this.$MessengerGraphQLTypeaheadView19,originalEntryIDs:this.props.originalEntryIDs,selectedEntryIDs:this.props.selectedEntryIDs,serverGroups:this.state.serverGroups,serverPages:this.state.serverPages,serverProfiles:this.state.serverProfiles,viewer:this.props.viewer},x))};v.prototype.$MessengerGraphQLTypeaheadView24=function(w,x,y){__p&&__p();var z=this.state.localEntries.toArray().filter(function(C){return C.getType()!==c("MercuryTypeaheadConstants").SEARCH_TYPE}).map(function(C){return C.getUniqueID()}),A=[];A.push(new(c("MessengerProfileSearchResultsQueryWebGraphQLQuery"))({search_query:w,result_limit:x,can_viewer_send_money:this.props.canViewerSendMoneyFilter}));if(!y)A.push(new(c("MessengerGroupSearchResultsQueryWebGraphQLQuery"))({search_query:w,result_limit:x,exclude_ids:z}));this.$MessengerGraphQLTypeaheadView4=0;this.$MessengerGraphQLTypeaheadView5=0;var B=c("PromiseUtil").exponentialBackoff(function(){return c("Promise").all(c("WebGraphQL").execAll(A))});c("PromiseUtil").repeatWhileErrorUntil(B,function(C){__p&&__p();var D;if(w!==this.props.queryString)return;var E=[],F=[];if(!y){var G,H=(G=C[1])!=null?(G=G.entities_named)!=null?(G=G.search_results)!=null?G.nodes:G:G:G;if(H)E=H.map(function(T,U){return c("MessengerGraphQLTypeaheadAdapter").convertGroupToEntry(T,U)})}var I=C[0],J=(D=I)!=null?(D=D.entities_named)!=null?(D=D.search_results)!=null?D.nodes:D:D:D;if(J){var K=J.map(function(T){return c("MessengerGraphQLTypeaheadAdapter").convertProfileToEntry(T)}),L=[],M=[],N=[];for(var O=K,P=Array.isArray(O),Q=0,O=P?O:O[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var R;if(P){if(Q>=O.length)break;R=O[Q++]}else{Q=O.next();if(Q.done)break;R=Q.value}var S=R;if(!S)continue;if(S.getType()===c("MercuryParticipantTypes").FRIEND&&L.length<c("MercuryTypeaheadConstants").COMPOSER_FRIENDS_MAX)L.push(S);else if(S.getType()===c("MercuryParticipantTypes").FB4C&&M.length<c("MercuryTypeaheadConstants").COMPOSER_FB4C_MAX)M.push(S);else if(S.getType()===c("MercuryParticipantTypes").NON_FRIEND&&N.length<s)N.push(S)}F=L.concat(M).concat(N)}if(this.$MessengerGraphQLTypeaheadView7)this.setState({serverGroups:c("compactArray")(E),serverProfiles:c("compactArray")(F),queryCompleteStatus:Object.assign({},this.state.queryCompleteStatus,{usersGroups:true})})}.bind(this),function(C){if(w===this.props.queryString){if(this.$MessengerGraphQLTypeaheadView7&&this.$MessengerGraphQLTypeaheadView4<u){this.$MessengerGraphQLTypeaheadView4+=1;return true}this.setState({queryCompleteStatus:Object.assign({},this.state.queryCompleteStatus,{usersGroups:true})})}return false}.bind(this))()};v.prototype.$MessengerGraphQLTypeaheadView25=function(w){__p&&__p();var x=[];if(!this.props.excludePages)x.push(new(c("MessengerPageSearchResultsQueryWebGraphQLQuery"))({search_query:w,result_limit:5,include_commerce:true,include_games:true,internal_bot:false,vc_endpoint:false}));if(this.props.shouldQueryInternalBot&&c("CurrentUser").isEmployee()&&c("CurrentUser").isWorkUser())x.push(new(c("MessengerPageSearchResultsQueryWebGraphQLQuery"))({search_query:w,result_limit:5,include_commerce:false,include_games:false,internal_bot:true,vc_endpoint:false}));if(this.props.shouldQueryVCEndpoint&&(c("CurrentUser").isEmployee()||c("CurrentUser").isWorkUser()))x.push(new(c("MessengerPageSearchResultsQueryWebGraphQLQuery"))({search_query:w,result_limit:5,include_commerce:false,include_games:false,internal_bot:false,vc_endpoint:true}));if(x.length>0){var y=c("PromiseUtil").exponentialBackoff(function(){return c("Promise").all(c("WebGraphQL").execAll(x))});c("PromiseUtil").repeatWhileErrorUntil(y,function(z){__p&&__p();var A,B;if(w!==this.props.queryString)return;var C=!this.props.excludePages,D=C?(A=z[0])!=null?(A=A.entities_named)!=null?(A=A.search_results)!=null?A.nodes:A:A:A:[],E=C?z[1]:z[0],F=(B=E)!=null?(B=B.entities_named)!=null?(B=B.search_results)!=null?B.nodes:B:B:B,G=[];if(this.props.shouldQueryVCEndpoint)if(C)G=this.props.shouldQueryInternalBot?z[2]:z[1];else G=this.props.shouldQueryInternalBot?z[1]:z[0];var H=D||[];H=F?H.concat(F):H;H=H.concat(G);var I=H.map(function(J){return c("MessengerGraphQLTypeaheadAdapter").convertPageToEntry(J,this.$MessengerGraphQLTypeaheadView27(J))}.bind(this));if(this.$MessengerGraphQLTypeaheadView7){this.setState({serverPages:c("compactArray")(I),queryCompleteStatus:Object.assign({},this.state.queryCompleteStatus,{pages:true})});return}}.bind(this),function(z){if(w===this.props.queryString){if(this.$MessengerGraphQLTypeaheadView7&&this.$MessengerGraphQLTypeaheadView5<u){this.$MessengerGraphQLTypeaheadView5+=1;return true}this.setState({queryCompleteStatus:Object.assign({},this.state.queryCompleteStatus,{excludePages:true})})}return false}.bind(this))()}};v.prototype.$MessengerGraphQLTypeaheadView26=function(w,x,y){__p&&__p();var z=this.props.roomAssociatedObject&&this.props.roomAssociatedObject.privacy_mode;if(z===c("MessengerRoomPrivacyMode").WHITELISTED_MODE&&y){c("WebGraphQL").exec(new(c("MessengerRoomAudienceSearchResultsQueryWebGraphQLQuery"))({search_query:w,result_limit:x,thread_fbid:y})).done(function(A){var B,C=(B=A)!=null?(B=B.message_thread)!=null?(B=B.messaging_audience_list)!=null?B.nodes:B:B:B;if(C){var D=C.map(function(E){return c("MessengerGraphQLTypeaheadAdapter").convertProfileToEntry(E)});this.setState({serverProfiles:D})}}.bind(this));return}};v.prototype.$MessengerGraphQLTypeaheadView23=function(w){var x=w.filter(function(y){return!this.props.selectedEntryIDs.contains(y.getUniqueID())}.bind(this));c("MessengerSearchFunnelLogger").logLoadingStateQuery(p,this.props.queryString,x.toArray().map(function(y){return y.getUniqueID()}));return x};v.prototype.$MessengerGraphQLTypeaheadView27=function(w){if(!w||!w.category_type)return c("MercuryParticipantTypes").PAGE;if(w.category_type===c("MercuryTypeaheadConstants").WORKPLACE_BOT_CATEGORY_TYPE)return c("MercuryTypeaheadConstants").INTERNAL_BOT_PAGE_TYPE;else if(w.category_type===c("MercuryTypeaheadConstants").MEETING_ROOM_PAGE_TYPE)return c("MercuryTypeaheadConstants").MEETING_ROOM_PAGE_TYPE;return c("MercuryTypeaheadConstants").PAGE_TYPE};v.prototype.onKeyDown=function(w){this.$MessengerGraphQLTypeaheadView6&&this.$MessengerGraphQLTypeaheadView6(w)};v.prototype.$MessengerGraphQLTypeaheadView13=function(w){this.$MessengerGraphQLTypeaheadView8.search(w.threadFBID,w.queryString,function(x,y){if(this.$MessengerGraphQLTypeaheadView7)if(y===w.queryString){var z=c("MessengerTypeaheadUtils").sortEntries(x,y).slice(0,this.props.maxEntries);this.setState({localEntries:c("immutable").List(z)})}}.bind(this))};v.prototype.$MessengerGraphQLTypeaheadView28=function(){this.setState({localEntries:c("immutable").List()});this.$MessengerGraphQLTypeaheadView1=c("createCancelableFunction")(function(w){var x=w.slice(0,30);this.setState({localEntries:c("immutable").List(x)})}.bind(this));this.$MessengerGraphQLTypeaheadView8.onEntriesLoaded(this.props.threadFBID,function(w){if(this.$MessengerGraphQLTypeaheadView1)this.$MessengerGraphQLTypeaheadView1(w);this.$MessengerGraphQLTypeaheadView1=null}.bind(this))};v.prototype.$MessengerGraphQLTypeaheadView15=function(w){this.$MessengerGraphQLTypeaheadView9.search(w.threadFBID,w.originalEntryIDs,w.queryString,function(x,y){if(this.$MessengerGraphQLTypeaheadView7)if(y===w.queryString){var z=c("MessengerTypeaheadUtils").sortEntries(x,y).slice(0,this.props.maxEntries);this.setState({localEntries:c("immutable").List(z)})}}.bind(this))};v.prototype.$MessengerGraphQLTypeaheadView29=function(){this.setState({localEntries:c("immutable").List()});this.$MessengerGraphQLTypeaheadView1=c("createCancelableFunction")(function(w){this.setState({localEntries:c("immutable").List(w.slice(0,50))})}.bind(this));this.$MessengerGraphQLTypeaheadView9.onEntriesLoaded(this.props.threadFBID,this.props.originalEntryIDs,function(w){if(this.$MessengerGraphQLTypeaheadView1)this.$MessengerGraphQLTypeaheadView1(w);this.$MessengerGraphQLTypeaheadView1=null}.bind(this))};v.prototype.$MessengerGraphQLTypeaheadView14=function(w){c("MessengerPaymentFriendsLocalCache").search(w.queryString,function(x,y){if(this.$MessengerGraphQLTypeaheadView7)if(y===w.queryString){var z=c("MessengerTypeaheadUtils").sortEntries(x,y).slice(0,this.props.maxEntries);this.setState({localEntries:c("immutable").List(z)})}}.bind(this))};v.prototype.$MessengerGraphQLTypeaheadView30=function(){this.setState({localEntries:c("immutable").List()});this.$MessengerGraphQLTypeaheadView1=c("createCancelableFunction")(function(w){this.setState({localEntries:c("immutable").List(w)})}.bind(this));c("MessengerPaymentFriendsLocalCache").onEntriesLoaded(function(w){if(this.$MessengerGraphQLTypeaheadView1)this.$MessengerGraphQLTypeaheadView1(w);this.$MessengerGraphQLTypeaheadView1=null}.bind(this))};v.prototype.$MessengerGraphQLTypeaheadView10=function(){__p&&__p();var w=this.props.roomAssociatedObject&&this.props.roomAssociatedObject.privacy_mode;if(w===c("MessengerRoomPrivacyMode").WHITELISTED_MODE){this.$MessengerGraphQLTypeaheadView28();return}if(this.props.canViewerSendMoneyFilter){this.$MessengerGraphQLTypeaheadView30();return}if(this.props.includeExistingParticipantIDs){this.$MessengerGraphQLTypeaheadView29();return}this.setState({localEntries:c("immutable").List()});this.$MessengerGraphQLTypeaheadView1=c("createCancelableFunction")(function(x,y,z){var A=x.slice(0,50);if(!this.props.excludeGroups)A=A.concat(y);if(!z||!this.props.queryString){var B=this.props.enableMessageSearch?c("MessengerTypeaheadUtils").getMessageSearchEntry(this.props.queryString):null;if(B)A.unshift(B);this.setState({localEntries:c("immutable").List(A)})}}.bind(this));c("MessengerTypeaheadLocalCache").onEntriesLoaded(function(x,y,z){if(this.$MessengerGraphQLTypeaheadView1)this.$MessengerGraphQLTypeaheadView1(x,y,z);this.$MessengerGraphQLTypeaheadView1=null}.bind(this))};v.prototype.$MessengerGraphQLTypeaheadView11=function(){var w=this.props.canViewerSendMoneyFilter,x=this.state.localEntries.toArray(),y=x.filter(function(L){return L.getType()!==c("MercuryTypeaheadConstants").SEARCH_TYPE}).map(function(L){return L.getUniqueID()}),z=c("MercuryConfig").MaxThreadResults,A=this.props.roomAssociatedObject&&this.props.roomAssociatedObject.privacy_mode,B=A===c("MessengerRoomPrivacyMode").WHITELISTED_MODE,C=!this.props.excludeGroups&&this.props.queryString&&this.props.queryString.length>1&&!B,D=!this.props.excludeGroups&&y.length>0&&!B,E=!this.props.excludeGroups&&(!D||c("CurrentUser").isEmployee())&&!B,F=!c("gkx")("AT5THIpM4AckuNbWpijh61vC-OipSixPqueb6Cl8xvxjybMRxdw8oN5RZdz305TVhpkiPlzS7Sc53JEnbqyboPGn"),G=!this.props.excludePages&&!B,H=this.props.shouldQueryVCEndpoint&&(c("CurrentUser").isEmployee()||c("CurrentUser").isWorkUser())&&!B,I=this.props.shouldQueryInternalBot&&c("CurrentUser").isEmployee()&&c("CurrentUser").isWorkUser()&&!B,J=B,K=this.props.threadFBID;return{queryString:this.props.queryString,canViewerSendMoneyFilter:w,localEntryIDs:y,maxThreadResults:z,shouldQueryGroups:F,shouldQueryPages:G,shouldQueryThreadName:C,shouldQueryParticipantIDs:D,shouldQueryParticipantNames:E,shouldQueryVCEndpoint:H,shouldQueryInternalBot:I,shouldQueryRoomsAudience:B,shouldSkipQueryUsers:J,threadFBID:K}};v.propTypes={includeExistingParticipantIDs:o.bool,canViewerSendMoneyFilter:o.bool,enableMessageSearch:o.bool.isRequired,excludeGroups:o.bool.isRequired,excludePages:o.bool.isRequired,isFocused:o.bool.isRequired,hasHoverState:o.bool.isRequired,maxEntries:o.number.isRequired,onScrollIntoView:o.func.isRequired,onSelect:o.func.isRequired,originalEntryIDs:o.instanceOf(c("immutable").Set).isRequired,queryString:o.string.isRequired,roomAssociatedObject:o.object,selectedEntryIDs:o.instanceOf(c("immutable").Set).isRequired,shouldQueryInternalBot:o.bool.isRequired,shouldQueryVCEndpoint:o.bool.isRequired,threadFBID:o.string,typeaheadViewClassName:o.string.isRequired,viewer:o.string.isRequired};v.defaultProps={maxEntries:r,typeaheadViewClassName:""};f.exports=v}),null);
__d("MessengerGraphQLSearchTypeahead.react",["cx","ix","Bootloader","BootloadOnRender.react","ContextualLayer.react","Event","Image.react","immutable","InstantGameContextType","JSResource","Keys","LazyComponent.react","MercuryIDs","MercuryThreadIDMap","MercuryThreads","MercuryTypeaheadConstants","mercuryVanityIDMapRe","MessagingSourceEnum","MessengerActions","MessengerGraphQLTypeaheadView.react","MessengerScrollableArea.react","MessengerSearchFunnelLogger","MessengerSpinner.react","MessengerTypeaheadUtils","MNPlatformTagsDataManager","QuicksilverSources","React","ReactDOM","ReactLayeredComponentMixin_DEPRECATED","clearImmediate","emptyFunction","joinClasses","setImmediate"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=c("MercuryThreadIDMap").get(),k=c("MercuryThreads").get(),l=c("React").PropTypes,m=i("86933"),n=30,o=100,p=c("React").createClass({displayName:"MessengerGraphQLSearchTypeahead",mixins:[c("ReactLayeredComponentMixin_DEPRECATED")],_input:null,_timer:null,_view:null,propTypes:{includeExistingParticipantIDs:l.bool,canViewerSendMoneyFilter:l.bool,className:l.string.isRequired,context:l.object,enableMessageSearch:l.bool.isRequired,excludeGroups:l.bool.isRequired,excludePages:l.bool.isRequired,hasHoverState:l.bool.isRequired,hideClearButton:l.bool.isRequired,hideResults:l.bool,isFacebookChat:l.bool.isRequired,isFocused:l.bool.isRequired,isTokenizer:l.bool.isRequired,onBackspace:l.func.isRequired,onBlur:l.func.isRequired,onChange:l.func.isRequired,onClear:l.func.isRequired,onClick:l.func.isRequired,onFocus:l.func.isRequired,onScrollIntoView:l.func.isRequired,onSelect:l.func.isRequired,originalEntryIDs:l.instanceOf(c("immutable").Set).isRequired,placeholder:l.string.isRequired,queryString:l.string.isRequired,roomAssociatedObject:l.object,scrollableViewClassName:l.string.isRequired,selectedEntryIDs:l.instanceOf(c("immutable").Set).isRequired,shouldQueryInternalBot:l.bool.isRequired,shouldQueryVCEndpoint:l.bool.isRequired,tabIndex:l.number,threadFBID:l.string,typeaheadViewClassName:l.string.isRequired,useLayer:l.bool.isRequired,viewer:l.string.isRequired,width:l.number},getInitialState:function q(){return{gameID:null}},getDefaultProps:function q(){return{includeExistingParticipantIDs:false,canViewerSendMoneyFilter:false,isFacebookChat:false,isTokenizer:false,onBackspace:c("emptyFunction"),onChange:c("emptyFunction"),onClear:c("emptyFunction"),onClick:c("emptyFunction"),onScrollIntoView:c("emptyFunction"),originalEntryIDs:c("immutable").Set(),placeholder:"",scrollableViewClassName:"",selectedEntryIDs:c("immutable").Set(),typeaheadViewClassName:"",useLayer:false}},componentDidMount:function q(){this._timer=c("setImmediate")(this._syncInputWidth)},componentDidUpdate:function q(){clearTimeout(this._timer);this._timer=c("setImmediate")(this._syncInputWidth)},componentWillUnmount:function q(){clearTimeout(this._timer)},renderLayers:function q(){if(!this.props.useLayer)return{};var r=null,s=null;if(this.props.context)r=this.props.context;else s=function(){return this._input}.bind(this);return{typeaheadView:c("React").createElement(c("ContextualLayer.react"),{context:r,contextRef:s,position:"below",shown:this.props.queryString&&this.props.isFocused,shouldSetARIAProperties:false},this._renderView())}},render:function q(){var r=this.props.useLayer?null:this._renderView();return c("React").createElement("div",{className:(!this.props.isTokenizer?"_3rh8":"")+(this.props.isTokenizer?" _3mkz":"")},c("React").createElement("span",{className:c("joinClasses")(this.props.className,"_58ah"+(this.props.hideResults?" _1a03":"")),onChange:this.props.onChange,onSelect:c("emptyFunction"),tabIndex:null},c("React").createElement("label",{className:"_58ak"},c("React").createElement("input",{autoComplete:"off",className:"_58al",disabled:this.props.hideResults,onBlur:this._handleBlur,onClick:this.props.onClick,onFocus:this.props.onFocus,onKeyDown:function(s){return this._handleKeyDown(s)}.bind(this),placeholder:this.props.placeholder,ref:function(s){return this._input=s}.bind(this),spellCheck:false,tabIndex:this.props.tabIndex,type:"text",value:this.props.queryString})),r),c("React").createElement(c("Image.react"),{onMouseDown:this._onClear,className:(this.props.hideClearButton?"hidden_elem":"")+" _2xme",src:m}),c("React").createElement("span",{ref:"textSizeProxy",className:"_58-3","aria-hidden":"true"},this.props.queryString||this.props.placeholder),this._renderGame())},focusInput:function q(){this._input&&this._input.focus()},_onClear:function q(){this._logClearContentSearch();this.props.onClear()},_syncInputWidth:function q(){if(!this.props.isTokenizer)return;var r=c("ReactDOM").findDOMNode(this.refs.textSizeProxy),s=r?r.offsetWidth:0;if(s===0)return;if(this._input)this._input.style.width=s+"px"},_renderGame:function q(){if(!this.state.gameID)return null;return c("React").createElement(c("BootloadOnRender.react"),{loader:c("JSResource")("MessengerGamesQuicksilverPlayerContainer.react").__setRef("MessengerGraphQLSearchTypeahead.react"),placeholder:c("React").createElement(c("MessengerSpinner.react"),null),component:c("React").createElement(c("LazyComponent.react"),{contextType:c("InstantGameContextType").SOLO,contextSourceID:null,gameID:this.state.gameID,onHide:this._handleHideGame,source:c("QuicksilverSources").MESSENGER_GAME_SEARCH,sourceID:null})})},_renderView:function q(){if(!this.props.queryString&&!this.props.isFocused)return null;var r=this.props.isTokenizer?n:o,s=c("React").createElement(c("MessengerGraphQLTypeaheadView.react"),{includeExistingParticipantIDs:this.props.includeExistingParticipantIDs,canViewerSendMoneyFilter:this.props.canViewerSendMoneyFilter,enableMessageSearch:this.props.enableMessageSearch,excludeGroups:this.props.excludeGroups,excludePages:this.props.excludePages,isFocused:this.props.isFocused,hasHoverState:this.props.hasHoverState,maxEntries:r,onScrollIntoView:this._handleScrollIntoView,onSelect:this._handleSelect,originalEntryIDs:this.props.originalEntryIDs,queryString:this.props.queryString,ref:function(t){return this._view=t}.bind(this),roomAssociatedObject:this.props.roomAssociatedObject,shouldQueryInternalBot:this.props.shouldQueryInternalBot,shouldQueryVCEndpoint:this.props.shouldQueryVCEndpoint,selectedEntryIDs:this.props.selectedEntryIDs,threadFBID:this.props.threadFBID,typeaheadViewClassName:this.props.typeaheadViewClassName,viewer:this.props.viewer});if(this.props.isTokenizer)return c("React").createElement(c("MessengerScrollableArea.react"),{className:this.props.scrollableViewClassName,ref:"scrollable",width:this.props.width},s);else return s},_handleScrollIntoView:function q(r){if(!r)return;if(!this.props.isTokenizer){this.props.onScrollIntoView(r);return}if(this.refs.scrollable)c("MessengerTypeaheadUtils").scrollEntryIntoView(r,this.refs.scrollable)},_handleSelect:function q(r,event){__p&&__p();var s=r.getUniqueID(),t=r.getType(),u=r.getAuxiliaryData().alias;if(u)c("mercuryVanityIDMapRe").set(u,c("MercuryIDs").getParticipantIDFromUserID(s));if(t===c("MercuryTypeaheadConstants").SEARCH_TYPE){c("MessengerSearchFunnelLogger").logContentSearchInitiation("WWW_MESSENGER_SEARCH_SESSION_FUNNEL",this.props.queryString);this._logSearchAllThreads(this.props.queryString);c("MessengerActions").changeQueryAll(this.props.queryString)}else if(t===c("MercuryTypeaheadConstants").GAME_TYPE)this.setState({gameID:s});else if(t===c("MercuryTypeaheadConstants").THREAD_TYPE)j.getClientIDFromServerID(s,function(v){return this.props.onSelect(v,t,r)}.bind(this));else{k.getThreadMeta(c("MercuryIDs").getThreadIDFromUserID(s),function(v){return this.props.onSelect(v.thread_id,t,r)}.bind(this));c("MNPlatformTagsDataManager").updateThreadTabAfterSelectThread(c("MessagingSourceEnum").MESSENGER_WEB_SEARCH,s)}},_handleHideGame:function q(){this.setState({gameID:null})},_handleKeyDown:function q(r){var s=r.keyCode;if(s===c("Keys").DOWN||s===c("Keys").UP||s===c("Keys").RETURN)this._view&&this._view.onKeyDown&&this._view.onKeyDown(s);else if(s===c("Keys").BACKSPACE)this.props.onBackspace(r);else if(s===c("Keys").ESC)this._input&&this._input.blur()},_handleBlur:function q(){var r=null,s=c("Event").listen(window,"blur",function(){s.remove();c("clearImmediate")(r)});r=c("setImmediate")(function(){s.remove();this.props.onBlur()}.bind(this))},_logClearContentSearch:function q(){c("Bootloader").loadModules(["MessengerContentSearchFunnelLogger","MessengerContentSearchFunnelLoggerConstants"],function(r,s){r&&r.endFunnel(s.FUNNEL_LOGGER_TAGS.END_WITH_X_BUTTON)},"MessengerGraphQLSearchTypeahead.react")},_logSearchAllThreads:function q(r){c("Bootloader").loadModules(["MessengerContentSearchFunnelLogger","MessengerContentSearchFunnelLoggerConstants"],function(s,t){s.startFunnel(r,t.FUNNEL_LOGGER_TAGS.SEARCH_ALL_THREADS)},"MessengerGraphQLSearchTypeahead.react")}});f.exports=p}),null);
__d("MessengerTokenizerToken.react",["cx","Keys","React","SearchableEntry","joinClasses"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("React").PropTypes,l=100;i=babelHelpers.inherits(m,c("React").Component);j=i&&i.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=j.constructor).call.apply(n,[this].concat(q)),this.$MessengerTokenizerToken2=function(event){if(event.keyCode===c("Keys").BACKSPACE){event.preventDefault();this.props.onRemove&&this.props.onRemove(this.props.entry)}}.bind(this),o}m.prototype.render=function(){return c("React").createElement("span",{className:c("joinClasses")(this.props.className,"_14-8"),label:null,onClick:this.$MessengerTokenizerToken1,onKeyDown:this.$MessengerTokenizerToken2,role:"option",tabIndex:this.props.index+l},c("React").createElement("span",{"aria-label":this.props.label,title:this.props.label,className:"_14-9"},this.props.label))};m.prototype.$MessengerTokenizerToken1=function(event){event.stopPropagation()};m.propTypes={className:k.string,entry:k.instanceOf(c("SearchableEntry")),index:k.number,label:k.string.isRequired,onRemove:k.func};f.exports=m}),null);
__d("MessengerGraphQLTokenizer.react",["cx","invariant","immutable","MessengerGraphQLSearchTypeahead.react","MessengerTokenizerToken.react","React","joinClasses","setImmediate"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("React").PropTypes;j=babelHelpers.inherits(m,c("React").Component);k=j&&j.prototype;function m(){__p&&__p();var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.state={focused:this.props.autoFocus,queryString:""},this.focusInput=function(){this.refs.typeahead&&this.refs.typeahead.focusInput()}.bind(this),this.$MessengerGraphQLTokenizer3=function(event){if(this.state.queryString||this.props.entries.size===0)return;this.$MessengerGraphQLTokenizer7(this.props.entries.last());event.preventDefault();c("setImmediate")(this.focusInput)}.bind(this),this.$MessengerGraphQLTokenizer4=function(event){event.target instanceof HTMLInputElement||i(0);this.setState({queryString:event.target.value})}.bind(this),this.$MessengerGraphQLTokenizer5=function(){this.setState({queryString:""});this.props.onClear&&this.props.onClear()}.bind(this),this.$MessengerGraphQLTokenizer6=function(s,t,u){__p&&__p();var v=this.props.entries,w=u.getUniqueID();if(this.props.originalEntryIDs.contains(w))return;else if(v.some(function(x){return x.getUniqueID()===w})){this.$MessengerGraphQLTokenizer7(u);return}this.props.onAddEntryAttempt(u);this.setState({queryString:""})}.bind(this),this.$MessengerGraphQLTokenizer7=function(s){this.props.onRemoveEntryAttempt(s)}.bind(this),this.$MessengerGraphQLTokenizer2=function(s){this.focusInput()}.bind(this),o}m.prototype.componentDidMount=function(){if(this.props.autoFocus)c("setImmediate")(this.focusInput)};m.prototype.render=function(){var n=this.props.entries.map(function(q,r){return this.$MessengerGraphQLTokenizer1(q,r)}.bind(this)),o=n.size>0?"":this.props.placeholder,p=this.props.forceHideClearButton||this.state.queryString===""&&this.props.entries.isEmpty();return c("React").createElement("div",null,c("React").createElement("div",{className:c("joinClasses")(this.props.className,"_14-7")},c("React").createElement("div",{className:c("joinClasses")("_58-2","clearfix"),onClick:this.$MessengerGraphQLTokenizer2},n,c("React").createElement(c("MessengerGraphQLSearchTypeahead.react"),{includeExistingParticipantIDs:this.props.includeExistingParticipantIDs,canViewerSendMoneyFilter:this.props.canViewerSendMoneyFilter,className:"_58-0",context:this.props.context,enableMessageSearch:this.props.enableMessageSearch,excludeGroups:this.props.excludeGroups,excludePages:this.props.excludePages,hasHoverState:this.props.hasHoverState,hideClearButton:p,isFacebookChat:false,isFocused:this.state.focused,isTokenizer:true,onBlur:function(){return this.setState({focused:false})}.bind(this),onBackspace:this.$MessengerGraphQLTokenizer3,onChange:this.$MessengerGraphQLTokenizer4,onClear:this.$MessengerGraphQLTokenizer5,onFocus:function(){return this.setState({focused:true})}.bind(this),onSelect:this.$MessengerGraphQLTokenizer6,originalEntryIDs:this.props.originalEntryIDs,placeholder:o,queryString:this.state.queryString,ref:"typeahead",roomAssociatedObject:this.props.roomAssociatedObject,selectedEntryIDs:c("immutable").Seq(this.props.entries).map(function(q){return q.getUniqueID()}).toSet(),scrollableViewClassName:this.props.scrollableViewClassName,shouldQueryInternalBot:this.props.shouldQueryInternalBot,shouldQueryVCEndpoint:this.props.shouldQueryVCEndpoint,tabIndex:this.props.tabIndex,threadFBID:this.props.threadFBID,useLayer:this.props.useLayer,viewer:this.props.viewer,width:this.props.width}))),this.state.queryString===""&&!this.state.focused?this.props.defaultEntries:null)};m.prototype.$MessengerGraphQLTokenizer1=function(n,o){return c("React").createElement(c("MessengerTokenizerToken.react"),{className:"_2ei6",key:n.getUniqueID(),label:n.getTitle(),entry:n,index:o,onRemove:this.$MessengerGraphQLTokenizer7})};m.propTypes={autoFocus:l.bool.isRequired,canViewerSendMoneyFilter:l.bool,includeExistingParticipantIDs:l.bool,className:l.string.isRequired,context:l.object,defaultEntries:l.element,enableMessageSearch:l.bool.isRequired,entries:l.instanceOf(c("immutable").List).isRequired,excludeGroups:l.bool.isRequired,excludePages:l.bool.isRequired,forceHideClearButton:l.bool,hasHoverState:l.bool.isRequired,onAddEntryAttempt:l.func.isRequired,onClear:l.func,onRemoveEntryAttempt:l.func.isRequired,originalEntryIDs:l.instanceOf(c("immutable").Set).isRequired,placeholder:l.node.isRequired,roomAssociatedObject:l.object,scrollableViewClassName:l.string.isRequired,shouldQueryInternalBot:l.bool.isRequired,shouldQueryVCEndpoint:l.bool.isRequired,tabIndex:l.number,threadFBID:l.string,useLayer:l.bool.isRequired,viewer:l.string.isRequired,width:l.number.isRequired};f.exports=m}),null);
__d("MessengerTabIndices",[],(function a(b,c,d,e,f,g){"use strict";var h=Object.freeze({NEW_MESSAGE_TOKENIZER:9998,COMPOSER_INPUT:9999});f.exports=h}),null);
__d("MessengerComposeViewHeader.react",["cx","fbt","immutable","MessengerGraphQLTokenizer.react","MessengerTabIndices","React","clearImmediate","joinClasses","setImmediate"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("React").PropTypes,m=320;j=babelHelpers.inherits(n,c("React").PureComponent);k=j&&j.prototype;function n(){var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=k.constructor).call.apply(o,[this].concat(r)),this.state={tokenizerContext:null,excludeGroups:false,excludePages:false},this.$MessengerComposeViewHeader1=null,this.$MessengerComposeViewHeader2=function(){this.$MessengerComposeViewHeader1=c("setImmediate")(function(){this.refs.tokenizer&&this.refs.tokenizer.focusInput()}.bind(this))}.bind(this),p}n.prototype.componentDidMount=function(){this.$MessengerComposeViewHeader2();this.setState({tokenizerContext:this.refs.tokenizerContext})};n.prototype.componentDidUpdate=function(o){if(this.props.recipients!==o.recipients)this.props.onResize()};n.prototype.componentWillReceiveProps=function(o){if(o.recipients!==this.props.recipients)if(o.recipients.size===0)this.setState({excludeGroups:false,excludePages:false});else if(!this.state.excludePages&&!this.state.excludeGroups)this.setState({excludeGroups:true,excludePages:true})};n.prototype.componentWillUnmount=function(){this.$MessengerComposeViewHeader1&&c("clearImmediate")(this.$MessengerComposeViewHeader1)};n.prototype.render=function(){var o={enableMessageSearch:false,hasHoverState:true,originalEntryIDs:c("immutable").Set(),scrollableViewClassName:"_2y8_",shouldQueryInternalBot:true,shouldQueryVCEndpoint:false,width:m};return c("React").createElement("div",{className:c("joinClasses")("_2y8y _5l-3",this.props.className),onClick:this.$MessengerComposeViewHeader2,role:"presentation"},c("React").createElement("div",{className:"_2y8z"},i._("To:")),c("React").createElement("div",null,c("React").createElement(c("MessengerGraphQLTokenizer.react"),babelHelpers["extends"]({autoFocus:true,className:"_2y8-",context:this.state.tokenizerContext,entries:this.props.recipients,excludeGroups:this.state.excludeGroups,excludePages:this.state.excludePages,forceHideClearButton:this.props.forceHideClearButton,onAddEntryAttempt:this.props.onAddRecipient,onClear:this.props.onClear,onRemoveEntryAttempt:this.props.onRemoveRecipient,placeholder:i._("Type the name of a person or group"),ref:"tokenizer",tabIndex:c("MessengerTabIndices").NEW_MESSAGE_TOKENIZER,useLayer:true,viewer:this.props.viewer},o)),c("React").createElement("div",{ref:"tokenizerContext"})))};n.propTypes={forceHideClearButton:l.bool.isRequired,onAddRecipient:l.func.isRequired,onClear:l.func,onRemoveRecipient:l.func.isRequired,onResize:l.func.isRequired,recipients:l.instanceOf(c("immutable").List).isRequired,viewer:l.string.isRequired};f.exports=n}),null);
__d("MessageShareType",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({IMAGE:"image",PLATFORM_SHARE_CTA:"platform_share_CTA"})}),null);
__d("XMessagingForwardAttachmentController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/mercury/attachments/forward/",{})}),null);
__d("XMessengerPlatformShareCTAController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/messages/platform/share/",{})}),null);
__d("messengerComposeViewHeaderReact",["bs_js_boolean","ReasonReact","bs_js_null_undefined","MessengerComposeViewHeader.react"],(function a(b,c,d,e,f,g){"use strict";function h(i,j,k,l,m,n,o,p,q){return c("ReasonReact").wrapJsForReason(c("MessengerComposeViewHeader.react"),{className:c("bs_js_null_undefined").from_opt(i),forceHideClearButton:c("bs_js_boolean").to_js_boolean(j),onClear:c("bs_js_null_undefined").from_opt(k),onAddRecipient:l,onRemoveRecipient:m,onResize:n,recipients:o,viewer:p},q)}g.make=h}),null);
__d("messengerForwardAttachmentDialogReact",["ix","cx","fbt","bs_block","bs_curry","React","immutable","imageReact","bs_js_boolean","CurrentUser","fbglyph","ReasonReact","AsyncRequest","bs_js_primitive","MercuryLocalIDs","MessageShareType","messengerDialogReact","messengerSpinnerReact","messengerDialogBodyReact","messengerComposeViewHeaderReact","XMessengerPlatformShareCTAController","XMessagingForwardAttachmentController"],(function a(b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k=j._("Send"),l=c("ReasonReact").reducerComponent("MessengerForwardAttachmentDialogReact");function m(s){return c("bs_block").__(0,[s])}function n(s){return c("bs_block").__(1,[s])}function o(){return 0}function p(s,t,u){new(c("AsyncRequest"))(s.getURIBuilder().getURI()).setMethod("POST").setHandler(u).setData(t).send();return 0}function q(s,t,u,v,w,x,y){__p&&__p();var z=function z(D,y){if(D)return 0;else return c("bs_curry")._1(t,0)},A=function A(D){if(D.payload.success)return 2;else return c("bs_block").__(2,[c("bs_js_primitive").null_undefined_to_opt(D.payload.error)])},B=function B(y,D){__p&&__p();var E={};D[2][0].forEach(function(G,y,H){E[String(c("MercuryLocalIDs").generateOfflineThreadingID(undefined))]=G.getUniqueID();return true});var F=0;if(x&&u&&x[0]===c("MessageShareType").PLATFORM_SHARE_CTA)p(c("XMessengerPlatformShareCTAController"),{cta_id:s,message_id:u[0],recipient_map:E},c("bs_curry")._1(D[1],A));else F=1;if(F===1)p(c("XMessagingForwardAttachmentController"),{attachment_id:s,recipient_map:E},c("bs_curry")._1(D[1],A));return c("bs_curry")._2(D[1],function(){return 1},0)},C=l.slice();C[9]=function(D){__p&&__p();var E=D[2],F=E[2],G=E[1],H;if(F!==0)H=c("React").createElement("div",undefined,c("ReasonReact").element(0,0,c("messengerSpinnerReact").make(0,0,0,[])),c("React").createElement("span",{className:"_1e1n _3-99"},j._("Sending")));else if(G){var I=h("141787");H=c("React").createElement("div",{className:"_1e1n"},c("ReasonReact").element(0,0,c("imageReact").make(0,0,[I],0,0,0,0,[])),c("React").createElement("span",{className:"_3-99"},G[0]))}else H=null;return c("ReasonReact").element(0,0,c("messengerDialogReact").Dialog[0](0,c("bs_curry")._1(D[0],z),0,[v],0,0,[560],[c("ReasonReact").element(0,0,c("messengerDialogReact").Header[0](0,0,c("ReasonReact").element(0,0,c("messengerDialogReact").Title[0](0,[w])))),c("ReasonReact").element(0,0,c("messengerDialogBodyReact").make(0,[c("ReasonReact").element(0,0,c("messengerComposeViewHeaderReact").make(["_1e1o"],0,[c("bs_curry")._1(D[1],o)],c("bs_curry")._1(D[1],m),c("bs_curry")._1(D[1],n),function(){return 0},E[0],c("CurrentUser").getID(),[]))])),c("ReasonReact").element(0,0,c("messengerDialogReact").Footer[0](0,[H],[c("ReasonReact").element(0,0,c("messengerDialogReact").CancelButton[0](0,[])),c("ReasonReact").element(0,0,c("messengerDialogReact").Button[0]([2],[k],[+E[0].isEmpty()||E[2]],0,[c("bs_curry")._1(D[0],B)],[0],0,0,[]))]))]))};C[10]=function(){return[c("immutable").List([]),0,0]};C[12]=function(D,E){__p&&__p();if(typeof D==="number")switch(D){case 0:return c("bs_block").__(0,[[c("immutable").List([]),E[1],E[2]]]);case 1:return c("bs_block").__(0,[[E[0],0,1]]);case 2:return c("bs_block").__(3,[[c("immutable").List([]),0,0],function(){return c("bs_curry")._1(t,0)}])}else switch(D.tag|0){case 0:return c("bs_block").__(0,[[E[0].push(D[0]),E[1],E[2]]]);case 1:var F=D[0];return c("bs_block").__(0,[[E[0].filter(function(G){return c("bs_js_boolean").to_js_boolean(+(G!==F))}),E[1],E[2]]]);case 2:return c("bs_block").__(0,[[E[0],D[0],0]])}};return C}var r=c("ReasonReact").wrapReasonForJs(l,function(s){return q(s.attachmentID,s.onClose,c("bs_js_primitive").null_undefined_to_opt(s.messageID),+s.shown,s.title,c("bs_js_primitive").null_undefined_to_opt(s.shareType),[])});g.sendButtonLabel=k;g.component=l;g.handleAddRecipient=m;g.handleRemoveRecipient=n;g.handleClear=o;g.sendData=p;g.make=q;g.jsComponent=r}),null);
__d("MessengerPhotoForwardButton.react",["cx","fbt","Link.react","messengerDialogsRe","messengerForwardAttachmentDialogReact","React","TooltipData","MessengerForwardChatFlowSharedAttachmentsTypedLogger"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("messengerForwardAttachmentDialogReact").jsComponent,m=c("React").PropTypes;j=babelHelpers.inherits(n,c("React").PureComponent);k=j&&j.prototype;function n(){var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=k.constructor).call.apply(o,[this].concat(r)),this.$MessengerPhotoForwardButton1=function(){var t=i._("Forward in separate messages");if(this.props.attachmentIDs[0]&&this.props.attachmentTypes[0])new(c("MessengerForwardChatFlowSharedAttachmentsTypedLogger"))().setAttachmentID(this.props.attachmentIDs[0]).setIsFromViewer(this.props.isFromViewer).setAttachmentType(this.props.attachmentTypes[0]).log();c("messengerDialogsRe").showDialog(function(){return c("React").createElement(l,{attachmentID:this.props.attachmentIDs[0],onClose:this.$MessengerPhotoForwardButton2,shown:true,title:t})}.bind(this))}.bind(this),p}n.prototype.render=function(){var o=i._("Forward"),p=this.props.isFromViewer?"left":"right",q=Object.assign({"data-tooltip-alignh":p},c("TooltipData").propsFor(o,p));return c("React").createElement(c("Link.react"),babelHelpers["extends"]({},this.props,q,{"aria-label":o,onClick:this.$MessengerPhotoForwardButton1,ref:"forwardButton",role:"button",className:"_2t5t"}))};n.prototype.$MessengerPhotoForwardButton2=function(){c("messengerDialogsRe").removeDialog()};n.propTypes={attachmentIDs:m.arrayOf(m.string).isRequired,isFromViewer:m.bool.isRequired};f.exports=n}),null);
__d("PhotoViewerDimensions",["Event","PhotoUtils","Vector"],(function a(b,c,d,e,f,g){__p&&__p();var h={verticalPadding:"number",horizontalPadding:"number",normalResDim:"object"};function i(j){"use strict";__p&&__p();this._verticalPadding=40;this._horizontalPadding=60;this._normalResDim={x:960,y:960};this._photoStripHeight=88;for(var k in j){if(!h[k])throw new Error("Unsupported extraData value '"+k+"' should not be used");if(typeof j[k]===h[k])this["_"+k]=j[k]}this._listener=c("Event").listen(window,"resize",this._resetMaxStageDimensions.bind(this))}i.prototype.destroy=function(){"use strict";this._listener.remove()};i.prototype.getStageDimensions=function(j){"use strict";var k=this.getMaxStageDimensions(),l=new(c("Vector"))(Math.min(j.x,k.x),Math.min(j.y,k.y)),m=l.x/l.y,n=j.x/j.y;if(m<n)l.y=Math.round(l.x/n);else l.x=Math.round(l.y*n);return l};i.prototype.getImageDimensionsForStage=function(j,k){"use strict";__p&&__p();var l=j.x,m=j.y,n=k.x,o=k.y;if(l>=n||m>=o){var p=l/m,q=n/o;if(q<p){l=n;m=Math.round(n/p)}else if(q>p){l=Math.round(o*p);m=o}else{l=n;m=o}}return new(c("Vector"))(l,m)};i.prototype.getImageDimensionsForMaxStage=function(j,k){"use strict";__p&&__p();var l=j.x,m=j.y,n=k.x,o=k.y-this._photoStripHeight,p=l/m,q=n/o;if(l>=n||m>=o)if(q<p){l=n;m=Math.round(n/p)}else if(q>p){l=Math.round(o*p);m=o}else{l=n;m=o}else if(p<q)l=Math.round(m*p);else m=Math.round(l/p);return new(c("Vector"))(l,m)};i.prototype.getMaxStageDimensions=function(){"use strict";if(!this._maxStageDimensions)this._maxStageDimensions=new(c("Vector"))(c("Vector").getViewportDimensions().x-this._horizontalPadding,c("Vector").getViewportDimensions().y-this._verticalPadding);return this._maxStageDimensions};i.prototype.getMaxStageDimensionsWithoutPadding=function(){"use strict";if(!this._maxStageDimensions)this._maxStageDimensions=new(c("Vector"))(c("Vector").getViewportDimensions().x,c("Vector").getViewportDimensions().y);return this._maxStageDimensions};i.prototype._resetMaxStageDimensions=function(){"use strict";this._maxStageDimensions=null};i.prototype.getBestFitImageFromPhoto=function(j,k){"use strict";__p&&__p();var l=null,m=c("PhotoUtils").getImagesFromData(j);m=m.sort(function(o,p){return p.width-o.width});if(window.devicePixelRatio&&window.devicePixelRatio>1)k=new(c("Vector"))(k.x*window.devicePixelRatio,k.y*window.devicePixelRatio);for(var n=0;n<m.length;n++)if(!l||m[n].width>=k.x||m[n].height>=k.y)l=m[n];return l};i.prototype.getOriginalDimensionsFromPhoto=function(j){"use strict";var k=c("PhotoUtils").getOriginalImageFromData(j);return new(c("Vector"))(k.width,k.height)};i.prototype.getBestFitDimensionsFromPhoto=function(j,k){"use strict";var l=this.getBestFitImageFromPhoto(j,k);return new(c("Vector"))(l.width,l.height)};i.prototype.getVerticalPadding=function(){"use strict";return this._verticalPadding};i.prototype.getHorizontalPadding=function(){"use strict";return this._horizontalPadding};f.exports=i}),null);
__d("SpotlightViewerBottomBar",["cx","LeftRight.react","React","joinClasses"],(function a(b,c,d,e,f,g,h){__p&&__p();var i,j;i=babelHelpers.inherits(k,c("React").Component);j=i&&i.prototype;k.prototype.render=function(){"use strict";var l=Array.isArray(this.props.children)?this.props.children:[this.props.children],m="_4_8n _51an";if(this.props.className)m=c("joinClasses")(m,this.props.className);if(l.length===1)return c("React").createElement("div",{className:m},l[0]);m=c("joinClasses")(m,"_50-m");return c("React").createElement(c("LeftRight.react"),{className:m},l[0],l[1])};function k(){"use strict";i.apply(this,arguments)}f.exports=k}),null);
__d("SpotlightViewerBottomBarGroup",["cx","React"],(function a(b,c,d,e,f,g,h){__p&&__p();var i,j;i=babelHelpers.inherits(k,c("React").Component);j=i&&i.prototype;k.prototype.render=function(){"use strict";var l=this.props.itemmargin||"right",m=(l=="left"?"marginLeft":"")+(l=="right"?" marginRight":"")+" _4_8i";return c("React").createElement("div",{className:m},this.props.children)};function k(){"use strict";i.apply(this,arguments)}f.exports=k}),null);
__d("SpotlightViewerClose",["cx","fbt","React","TooltipLink.react","joinClasses"],(function a(b,c,d,e,f,g,h,i){__p&&__p();var j,k,l=c("React").PropTypes;j=babelHelpers.inherits(m,c("React").Component);k=j&&j.prototype;m.prototype.render=function(){"use strict";var n=this.props.position=="left"?"_5wx3":"_5wx4",o=c("React").createElement("span",null,i._("Press Esc to close"));return c("React").createElement(c("TooltipLink.react"),{className:c("joinClasses")("_4-o9 _50-m _51an",n,this.props.isFixed?"_2chv":""),onClick:this.props.onClick,tooltip:o})};function m(){"use strict";j.apply(this,arguments)}m.propTypes={position:l.oneOf(["left","right"]),isFixed:l.bool};m.defaultProps={position:"right",isFixed:false};f.exports=m}),null);
__d("MessagingVideoViewer.react",["cx","fbt","ActorURI","ArbiterMixin","AsyncRequest","MessagingForwardingButtonNUX.react","React","ReactFragment","SpotlightViewer","SpotlightViewerBottomBar","SpotlightViewerBottomBarGroup","SpotlightViewerBottomBarLink","SpotlightViewerClose","SpotlightViewport","PageTransitionsRegistrar","PhotoViewerDimensions","XMessagingVideoAttachmentController","Vector","guid"],(function a(b,c,d,e,f,g,h,i){__p&&__p();var j=c("React").PropTypes,k=200,l=c("React").createClass({displayName:"MessagingVideoViewer",propTypes:{disableForward:j.bool,forwardDialogComponent:j.func.isRequired,pageID:j.number,rootClassName:j.string,videoSize:j.instanceOf(c("Vector")).isRequired,videoID:j.string.isRequired,videoURI:j.string.isRequired},mixins:[c("ArbiterMixin")],getInitialState:function m(){var n=new(c("PhotoViewerDimensions"))({verticalPadding:k});return{dimensions:n.getStageDimensions(this.props.videoSize),loading:true,open:true,showForward:false}},componentWillMount:function m(){this._domID=c("guid")()},componentDidMount:function m(){this._loadVideoPlayer();c("PageTransitionsRegistrar").registerCompletionCallback(function(){this.close();return true}.bind(this))},_loadVideoPlayer:function m(){var n=c("XMessagingVideoAttachmentController").getURIBuilder().setString("video_id",this.props.videoID).setString("video_container_id",this._domID).setInt("width",this.state.dimensions.x).setInt("height",this.state.dimensions.y).getURI();if(this.props.pageID)n=c("ActorURI").create(n,this.props.pageID);this.request=new(c("AsyncRequest"))().setMethod("GET").setURI(n).setReadOnly(true).setHandler(function(o){return this.setState({loading:false})}.bind(this)).send()},close:function m(){if(!this.state.open)return;this.setState({open:false},function(){this.inform("close")})},_showForwardDialog:function m(){this.setState({showForward:true});this.refs.forwardNUX.close()},_hideForwardDialog:function m(){this.setState({showForward:false})},renderLayers:function m(){if(this.props.disableForward)return null;var n=i._("Forward in separate messages"),o=this.props.forwardDialogComponent;return c("ReactFragment").create({forwardDialog:c("React").createElement(o,{attachmentID:this.props.videoID,onClose:this._hideForwardDialog,shown:this.state.showForward,title:n}),forwardButtonNUX:c("React").createElement(c("MessagingForwardingButtonNUX.react"),{contextRef:function(){return this.refs.forwardButton}.bind(this),ref:"forwardNUX"},i._("Send this video to other people in separate messages."))})},render:function m(){var n=c("React").createElement("div",{className:"rfloat",id:this._domID}),o;if(!this.props.disableForward)o=c("React").createElement(c("SpotlightViewerBottomBarLink"),{onClick:this._showForwardDialog,ref:"forwardButton"},i._("Forward"));return c("React").createElement("span",null,c("React").createElement(c("SpotlightViewer"),{onHide:this.close,open:this.state.open,rootClassName:this.props.rootClassName},c("React").createElement(c("SpotlightViewport"),{active:true,className:"_39hc",media:n,showLoadingIndicator:this.state.loading,stageDimensions:this.state.dimensions,useWidth:true},c("React").createElement(c("SpotlightViewerClose"),{onClick:this.close}),c("React").createElement(c("SpotlightViewerBottomBar"),{className:"stat_elem"},c("React").createElement(c("SpotlightViewerBottomBarGroup"),null),c("React").createElement(c("SpotlightViewerBottomBarGroup"),null,o,c("React").createElement(c("SpotlightViewerBottomBarLink"),{s:"true",href:this.props.videoURI},i._("Download")))))),this.renderLayers())}});f.exports=l}),null);
__d("SpotlightViewerAutoResize",["invariant","Event","SubscriptionsHandler"],(function a(b,c,d,e,f,g,h){__p&&__p();function i(j){"use strict";this.$SpotlightViewerAutoResize1=j;typeof this.$SpotlightViewerAutoResize1.onResize==="function"||h(0)}i.prototype.enable=function(){"use strict";this.$SpotlightViewerAutoResize2=new(c("SubscriptionsHandler"))();this.$SpotlightViewerAutoResize2.addSubscriptions(c("Event").listen(window,"resize",this.$SpotlightViewerAutoResize1.onResize))};i.prototype.disable=function(){"use strict";this.$SpotlightViewerAutoResize2.release();delete this.$SpotlightViewerAutoResize2};f.exports=i}),null);
__d("SpotlightViewerBehaviorsMixin",["BehaviorsMixin"],(function a(b,c,d,e,f,g){var h={componentWillMount:function i(){this.behaviors&&this.enableBehaviors(this.behaviors)},componentWillUnmount:function i(){this.destroyBehaviors()}};Object.assign(h,c("BehaviorsMixin"));f.exports=h}),null);
__d("SpotlightViewerLoggingEvents",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({LOADED:"loaded",LOADING:"loading",ERROR:"error",ABORT:"abort",OPEN_BEGIN:"open_begin",OPEN_COMPLETE:"open_complete",CLOSE_BEGIN:"close_begin",CLOSE_COMPLETE:"close_complete",PAGE_BEGIN:"page_begin",PAGE_COMPLETE:"page_complete",PHOTO_CHANGE_BEGIN:"photo_change_begin",PHOTO_CHANGE_COMPLETE:"photo_change_complete",DATA_FETCH_BEGIN:"data_fetch_begin",DATA_FETCH_COMPLETE:"data_fetch_complete",PHOTO_FETCH:"photo_fetch"})}),null);
__d("PhotoLogger",["Event","Banzai","BanzaiScuba","SpotlightViewerLoggingEvents","SubscriptionsHandler"],(function a(b,c,d,e,f,g){__p&&__p();function h(i){"use strict";this.$PhotoLogger1=i;this.$PhotoLogger2={}}h.prototype.log=function(i,j,k,l){"use strict";c("Banzai").post("profile_photos_view",{photo_fbid:j,source:k,profile_id:l});if(!this.$PhotoLogger2[i]){this.$PhotoLogger3(i);this.$PhotoLogger2[i]=true}};h.prototype.$PhotoLogger3=function(i){"use strict";__p&&__p();this.$PhotoLogger4(c("SpotlightViewerLoggingEvents").LOADING,{uri:i});var j=new(c("SubscriptionsHandler"))(),k=new Image();j.addSubscriptions(c("Event").listen(k,"load",function(){this.$PhotoLogger4(c("SpotlightViewerLoggingEvents").LOADED,{uri:i});j.release()}.bind(this)),c("Event").listen(k,"error",function(){this.$PhotoLogger4(c("SpotlightViewerLoggingEvents").ERROR,{uri:i});j.release()}.bind(this)),c("Event").listen(k,"abort",function(){this.$PhotoLogger4(c("SpotlightViewerLoggingEvents").ABORT,{uri:i});j.release()}.bind(this)));k.src=i};h.prototype.logEvent=function(i){"use strict";this.$PhotoLogger4(i)};h.prototype.$PhotoLogger4=function(i,j){"use strict";var k=new(c("BanzaiScuba"))("photos_client_loading",null,{addBrowserFields:true});k.addNormal("event",i);k.addNormal("viewer",this.$PhotoLogger1);for(var l in j)k.addNormal(l,j[l]);k.post()};f.exports=h}),null);
__d("PhotoStoreCore",[],(function a(b,c,d,e,f,g){__p&&__p();var h={actions:{UPDATE:"update"},_photoCache:{},_postCreateCallbacks:{},getPhotoCache:function i(j){if(!this._photoCache[j])throw new Error("Photo cache requested for unknown set ID");return this._photoCache[j]},hasBeenCreated:function i(j){return!!this._photoCache[j]},clearSetCache:function i(j){delete this._photoCache[j];delete this._postCreateCallbacks[j]},getByIndex:function i(j,k,l){this.getPhotoCache(j).getItemAtIndex(k,l)},getByIndexImmediate:function i(j,k){if(this._photoCache[j])return this._photoCache[j].getItemAtIndexImmediate(k);return undefined},getItemsInAvailableRange:function i(j){var k=this.getAvailableRange(j),l=[];for(var m=k.offset;m<k.length;m++)l.push(this.getByIndexImmediate(j,m));return l},getItemsAfterIndex:function i(j,k,l,m){var n=this.getCursorByIndexImmediate(j,k);this.fetchForward(j,n,l,m)},getAllByIDImmediate:function i(j){var k=Object.keys(this._photoCache);return k.map(function(l){return this.getByIndexImmediate(l,this.getIndexForID(l,j))}.bind(this)).filter(function(l){return!!l})},getIndexForID:function i(j,k){if(this._photoCache[j])return this._photoCache[j].getIndexForID(k);return undefined},getEndIndex:function i(j){var k=this.getAvailableRange(j);return k.offset+k.length-1},getCursorByIndexImmediate:function i(j,k){var l=this.getByIndexImmediate(j,k);if(l)return this._photoCache[j].getCursorForID(l.id);return undefined},hasNextPage:function i(j){var k=this.getCursorByIndexImmediate(j,this.getEndIndex(j));return this.getPhotoCache(j).hasNextPage(k)},getAvailableRange:function i(j){return this.getPhotoCache(j).getAvailableRange()},hasLooped:function i(j){return this.getPhotoCache(j).hasLooped()},fetchForward:function i(j,k,l,m){this.getPhotoCache(j).getItemsAfterCursor(k,l,m)},fetchBackward:function i(j,k,l,m){this.getPhotoCache(j).getItemsBeforeCursor(k,l,m)},executePostCreate:function i(j,k){if(this._photoCache[j])k&&k();else this._postCreateCallbacks[j]=k},runPostCreateCallback:function i(j){var k=this._postCreateCallbacks[j];if(k){k();delete this._postCreateCallbacks[j]}},setPreFetchCallback:function i(j,k){this.getPhotoCache(j).setPreFetchCallback(k)},updateData:function i(j){var k=j.set_id;if(!this._photoCache[k]){this._photoCache[k]=new j.cache_class(j);this.runPostCreateCallback(k)}else if(j.query_metadata.action==h.actions.UPDATE)this._photoCache[k].updateData(j);else this._photoCache[k].addData(j)},updateFeedbackData:function i(j){var k=Object.keys(j);k.forEach(function(l){return h.getAllByIDImmediate(l).forEach(function(m){m.feedback=j[l].feedback})})},reset:function i(){Object.keys(this._photoCache).forEach(function(j){return this.clearSetCache(j)}.bind(this))}};f.exports=h}),null);
__d("PhotoStore",["Arbiter","PhotoStoreCore"],(function a(b,c,d,e,f,g){c("Arbiter").subscribe("update-photos",function(h,i){c("PhotoStoreCore").updateData(i)});f.exports=c("PhotoStoreCore")}),null);
__d("PhotoViewState",["ArbiterMixin","PhotoStore","PhotoUtils","SpotlightViewerLoggingEvents","mixin"],(function a(b,c,d,e,f,g){__p&&__p();var h,i;h=babelHelpers.inherits(j,c("mixin")(c("ArbiterMixin")));i=h&&h.prototype;function j(k,l,m){"use strict";__p&&__p();i.constructor.call(this);var n=m||{};this._viewer=k;this._setID=l;this._position=n.position||0;this._preventPreload=n.preventPreload;this._reverse=n.reverse;this._updateCallback=n.updateCallback;this._preloaded={}}j.prototype._fetchCallback=function(k){"use strict";if(!this._viewer.isOpen())return;this._preload(k);this._log(c("SpotlightViewerLoggingEvents").DATA_FETCH_COMPLETE)};j.prototype._preload=function(k){"use strict";c("PhotoUtils").preload(this._viewer,k,function(l){this._preloaded[c("PhotoUtils").getFBIDFromData(l)]=true}.bind(this))};j.prototype._preloadPhotosInRange=function(k,l){"use strict";var m=[];for(var n=k;n<=l;++n){var o=c("PhotoStore").getByIndexImmediate(this._setID,n);if(o&&!this._isPreloaded(o))m.push(o)}this._preload(m)};j.prototype._isPreloaded=function(k){"use strict";return this._preloaded[c("PhotoUtils").getFBIDFromData(k)]};j.prototype.getPosition=function(){"use strict";return this._position};j.prototype.isValidMovement=function(k){"use strict";if(!c("PhotoStore").hasBeenCreated(this._setID))return false;if(c("PhotoStore").hasLooped(this._setID))return true;var l=this._position+k,m=c("PhotoStore").getAvailableRange(this._setID),n=m.offset+m.length-1;return l>=m.offset-1&&l<=n+1};j.prototype.getRelativeMovement=function(k){"use strict";return c("PhotoStore").getIndexForID(this._setID,k)-this._position};j.prototype.moveCursor=function(k){"use strict";if(!this.isValidMovement(k))return false;this._position+=k;return true};j.prototype._page=function(k){"use strict";__p&&__p();if(!this.moveCursor(k))return;this._log(c("SpotlightViewerLoggingEvents").PAGE_BEGIN);var l=c("PhotoStore").getByIndexImmediate(this._setID,this._position);if(!l){this.inform("photo_fetch");this._log(c("SpotlightViewerLoggingEvents").PHOTO_FETCH)}else if(!this._isPreloaded(l))this._preload([l]);c("PhotoStore").getByIndex(this._setID,this._position,this._updateCallback);this._loadMoreIfNecessary(k>0,j.BUFFER_SIZE);this._log(c("SpotlightViewerLoggingEvents").PAGE_COMPLETE)};j.prototype.loadMoreForwardIfNecessary=function(k){"use strict";if(this._preventPreload)return;var l=c("PhotoStore").getAvailableRange(this._setID),m=l.offset+l.length-1,n=this._position+k;if(n>m&&!c("PhotoStore").hasLooped(this._setID)){var o=c("PhotoStore").getCursorByIndexImmediate(this._setID,m);c("PhotoStore").fetchForward(this._setID,o,k,this._fetchCallback.bind(this))}else this._preloadPhotosInRange(this._position+1,n)};j.prototype.loadMoreBackwardIfNecessary=function(k){"use strict";if(this._preventPreload)return;var l=c("PhotoStore").getAvailableRange(this._setID),m=this._position-k;if(m<l.offset&&!c("PhotoStore").hasLooped(this._setID)){var n=c("PhotoStore").getCursorByIndexImmediate(this._setID,l.offset);c("PhotoStore").fetchBackward(this._setID,n,k,this._fetchCallback.bind(this))}else this._preloadPhotosInRange(m,this._position-1)};j.prototype._loadMoreIfNecessary=function(k,l){"use strict";if(k)this.loadMoreForwardIfNecessary(l);else this.loadMoreBackwardIfNecessary(l)};j.prototype.displayFirst=function(){"use strict";__p&&__p();if(!this._viewer.isOpen())return;c("PhotoStore").setPreFetchCallback(this._setID,function(){this._log(c("SpotlightViewerLoggingEvents").DATA_FETCH_BEGIN)}.bind(this));var k=function(l){if(!this._isPreloaded(l))this._preload([l]);this._updateCallback&&this._updateCallback(l)}.bind(this);c("PhotoStore").getByIndex(this._setID,this._position,k);if(this._reverse)this.loadMoreBackwardIfNecessary(j.BUFFER_SIZE);else this.loadMoreForwardIfNecessary(j.BUFFER_SIZE)};j.prototype.backward=function(){"use strict";this._page(this._reverse?1:-1)};j.prototype.forward=function(){"use strict";this._page(this._reverse?-1:1)};j.prototype._log=function(k){"use strict";this._viewer.log(k)};Object.assign(j,{BUFFER_SIZE:4});f.exports=j}),null);
__d("SpotlightViewerCoreMixin",["PhotoLogger","PhotoStore","PhotoUtils","PhotoViewState","React","SpotlightViewerImage","SpotlightViewerLoggingEvents"],(function a(b,c,d,e,f,g){__p&&__p();var h={_displayFirstPhoto:function i(){c("PhotoStore").executePostCreate(this.props.setid,this.viewState.displayFirst.bind(this.viewState))},_getInitialPosition:function i(){var j;if(!this.props.clearcache)j=c("PhotoStore").getIndexForID(this.props.setid,this.props.photoid);if(j===undefined){c("PhotoStore").clearSetCache(this.props.setid);j=0}return j},__displayPhoto:function i(){var j=this._getInitialPosition();this.viewState=new(c("PhotoViewState"))(this,this.props.setid,{position:j,preventPreload:this.__shouldPreventPhotoPreload,reverse:this.props.reverse,updateCallback:this._updatePhoto});this.inform("open");this._displayFirstPhoto()},componentWillMount:function i(){this._logger=new(c("PhotoLogger"))(this.getViewerID());this.log(c("SpotlightViewerLoggingEvents").OPEN_BEGIN);this.__displayPhoto()},componentDidMount:function i(){this._enableSubscriptions&&this._enableSubscriptions();this.log(c("SpotlightViewerLoggingEvents").OPEN_COMPLETE)},isOpen:function i(){return this.state.open},close:function i(){if(!this.isOpen())return;this.log(c("SpotlightViewerLoggingEvents").CLOSE_BEGIN);this.setState({open:false},function(){this.inform("close");this.log(c("SpotlightViewerLoggingEvents").CLOSE_COMPLETE)})},componentWillUnmount:function i(){this.viewState=null},_onClickViewport:function i(j){j?this.viewState.forward():this.viewState.backward()},_getMedia:function i(j,k){return c("React").createElement(c("SpotlightViewerImage"),{ref:"image",src:j.uri,dimensions:k.imageDimensions})},_getCurrentFBID:function i(){return c("PhotoUtils").getFBIDFromData(this.state.photoData)},_updatePhoto:function i(j){this.log(c("SpotlightViewerLoggingEvents").PHOTO_CHANGE_BEGIN);this.setState({photoData:j},function(){this.inform("photo_change",this.state.photoData);this.log(c("SpotlightViewerLoggingEvents").PHOTO_CHANGE_COMPLETE)})},getLogger:function i(){return this._logger},log:function i(j){this._logger&&this._logger.logEvent(j)}};f.exports=h}),null);
__d("SpotlightViewerStageResizer",["MessengerEnvironment","Event","SubscriptionsHandler","Vector"],(function a(b,c,d,e,f,g){__p&&__p();var h=520;function i(j,k){"use strict";this._subscriptionsHandler=new(c("SubscriptionsHandler"))();this._subscriptionsHandler.addSubscriptions(c("Event").listen(window,"resize",this._resetStageDimensions.bind(this)));this._dimensions=j;this._minHeight=k.minHeight||h;this._minWidth=k.minWidth||h;this._resetStageDimensions()}i.prototype.destroy=function(){"use strict";this._dimensions=null;this._subscriptionsHandler.release()};i.prototype._resetStageDimensions=function(){"use strict";this._currentStageDimensions=new(c("Vector"))(this._minWidth,this._minHeight)};i.prototype.getImageAndStageDimensions=function(j){"use strict";var k=this._dimensions.getBestFitDimensionsFromPhoto(j,this._dimensions.getMaxStageDimensions()),l=c("MessengerEnvironment").messengerui?this._dimensions.getMaxStageDimensionsWithoutPadding(k):this._dimensions.getStageDimensions(k);this._currentStageDimensions=new(c("Vector"))(Math.max(l.x,this._minWidth,this._currentStageDimensions.x),Math.max(l.y,this._minHeight,this._currentStageDimensions.y));var m=c("MessengerEnvironment").messengerui?this._dimensions.getImageDimensionsForMaxStage(k,this._currentStageDimensions):this._dimensions.getImageDimensionsForStage(k,this._currentStageDimensions);return{stageDimensions:this._currentStageDimensions,imageDimensions:m}};i.prototype.getCurrentStageDimensions=function(){"use strict";return this._currentStageDimensions};f.exports=i}),null);
__d("SpotlightViewerDimensionMixin",["MessengerEnvironment","SpotlightViewerStageResizer","PhotoViewerDimensions"],(function a(b,c,d,e,f,g){__p&&__p();var h={getInitialState:function i(){this._dimensions=new(c("PhotoViewerDimensions"))({verticalPadding:this.props.verticalPadding,horizontalPadding:this.props.horizontalPadding});this._resizer=new(c("SpotlightViewerStageResizer"))(this._dimensions,{minHeight:this.props.minHeight,minWidth:this.props.minWidth});return{maxStageDimensions:c("MessengerEnvironment").messengerui?this._dimensions.getMaxStageDimensionsWithoutPadding():this._dimensions.getMaxStageDimensions()}},componentWillUnmount:function i(){this._resizer&&this._resizer.destroy();this._resizer=null;this._dimensions&&this._dimensions.destroy();this._dimensions=null},getMedia:function i(){if(this.state.photoData){if(this.state.photoData.__typename&&this.state.photoData.__typename==="MessageVideo")return this._getVideo();var j=this._resizer.getImageAndStageDimensions(this.state.photoData),k=this._dimensions.getBestFitImageFromPhoto(this.state.photoData,this.state.maxStageDimensions);return this._getMedia(k,j)}else return null},getDimensions:function i(){return this._dimensions},getStageDimensions:function i(){if(this.state.photoData)return this._resizer.getImageAndStageDimensions(this.state.photoData).stageDimensions;else return c("MessengerEnvironment").messengerui?this._dimensions.getMaxStageDimensionsWithoutPadding():this._dimensions.getMaxStageDimensions()},getImageDimensions:function i(){if(!this.state.photoData)return null;return this._resizer.getImageAndStageDimensions(this.state.photoData).imageDimensions},onResize:function i(){if(c("MessengerEnvironment").messengerui){var j=this._dimensions.getMaxStageDimensionsWithoutPadding();this.setState({maxStageDimensions:j,width:j.x})}else this.setState({maxStageDimensions:this._dimensions.getMaxStageDimensions()})}};f.exports=h}),null);
__d("SpotlightViewerPageWithKeys",["KeyEventController","SubscriptionsHandler"],(function a(b,c,d,e,f,g){__p&&__p();function h(i){"use strict";this.$SpotlightViewerPageWithKeys1=i}h.prototype.enable=function(){"use strict";this.$SpotlightViewerPageWithKeys2=new(c("SubscriptionsHandler"))();this.$SpotlightViewerPageWithKeys2.addSubscriptions(c("KeyEventController").registerKey("LEFT",function(){this.$SpotlightViewerPageWithKeys1.viewState.backward();return false}.bind(this)),c("KeyEventController").registerKey("RIGHT",function(){this.$SpotlightViewerPageWithKeys1.viewState.forward();return false}.bind(this)))};h.prototype.disable=function(){"use strict";this.$SpotlightViewerPageWithKeys2.release();delete this.$SpotlightViewerPageWithKeys2};f.exports=h}),null);
__d("SpotlightViewerPagers",["cx","LeftRight.react","Link.react","React"],(function a(b,c,d,e,f,g,h){__p&&__p();var i,j;i=babelHelpers.inherits(k,c("React").Component);j=i&&i.prototype;k.prototype.render=function(){"use strict";return c("React").createElement(c("LeftRight.react"),null,c("React").createElement(c("Link.react"),{className:"_4-oa _4-ob _50-m"}),c("React").createElement(c("Link.react"),{className:"_4-oa _4-oc _50-m"}))};function k(){"use strict";i.apply(this,arguments)}f.exports=k}),null);
__d("SpotlightViewerThumbnailMixin",["PhotoStore","Vector"],(function a(b,c,d,e,f,g){__p&&__p();var h={_getInitialPhotoData:function i(){var j=c("PhotoStore").getIndexForID(this.props.setid,this.props.photoid),k=c("PhotoStore").getByIndexImmediate(this.props.setid,j);return k?k:this._getThumbnailPhotoData()},_getThumbnailPhotoData:function i(){if(!this.props.dimensions||!this.props.thumbsrc)return null;var j={id:this.props.photoid};for(var k=0;k<this.props.dimensions.length;++k){var l=c("Vector").deserialize(this.props.dimensions[k]);j["image"+k]={width:l.x,height:l.y,uri:this.props.thumbsrc}}return j}};f.exports=h}),null);
__d("SpotlightMessagesViewer",["fbt","ActorURI","ArbiterMixin","MessagingForwardingButtonNUX.react","PageTransitionsRegistrar","React","ReactFragment","SpotlightViewer","SpotlightViewerAutoResize","SpotlightViewerBehaviorsMixin","SpotlightViewerBottomBar","SpotlightViewerBottomBarGroup","SpotlightViewerBottomBarLink","SpotlightViewerClose","SpotlightViewerCoreMixin","SpotlightViewerDimensionMixin","SpotlightViewerPagers","SpotlightViewerPageWithKeys","SpotlightViewerThumbnailMixin","SpotlightViewport","SubscriptionsHandler","XMessagingPhotoDownloadController"],(function a(b,c,d,e,f,g,h){__p&&__p();var i=c("React").createClass({displayName:"SpotlightMessagesViewer",mixins:[c("ArbiterMixin"),c("SpotlightViewerBehaviorsMixin"),c("SpotlightViewerCoreMixin"),c("SpotlightViewerThumbnailMixin"),c("SpotlightViewerDimensionMixin")],behaviors:[c("SpotlightViewerPageWithKeys"),c("SpotlightViewerAutoResize")],componentWillUnmount:function j(){this._subscriptions&&this._subscriptions.release();this._subscriptions=null},getViewerID:function j(){return this.props.setid},getInitialState:function j(){this._subscriptions=new(c("SubscriptionsHandler"))();return{photoData:this._getInitialPhotoData(),open:true,showForward:false}},_enableSubscriptions:function j(){this.props.useloadingindicator&&this._subscriptions.addSubscriptions(this.viewState.subscribe("photo_fetch",function(){return this.setState({photoData:null})}.bind(this)))},_showForwardDialog:function j(){this.setState({showForward:true});this.refs.forwardNUX.close()},_hideForwardDialog:function j(){this.setState({showForward:false})},renderLayers:function j(){if(this.props.disableForward)return null;var k=h._("Forward in separate messages"),l=this.props.forwardDialogComponent;return c("ReactFragment").create({forwardDialog:c("React").createElement(l,{attachmentID:String(this.state.photoData.id),onClose:this._hideForwardDialog,shown:this.state.showForward,title:k}),forwardButtonNUX:c("React").createElement(c("MessagingForwardingButtonNUX.react"),{contextRef:function(){return this.refs.forwardButton}.bind(this),ref:"forwardNUX"},h._("Send this image to other people in separate messages."))})},render:function j(){var k=this.getMedia(),l=this.props.snapToPhoto?this.getImageDimensions():this.getStageDimensions();l.x=Math.max(l.x,185);l.y=Math.max(l.y,185);var m=this.props.useloadingindicator&&!this.state.photoData;c("PageTransitionsRegistrar").registerCompletionCallback(function(){if(this.state.open)this.close();return true}.bind(this));return c("React").createElement("span",null,c("React").createElement(c("SpotlightViewer"),{rootClassName:this.props.rootClassName,open:this.state.open,onHide:this.close},c("React").createElement(c("SpotlightViewport"),{active:false,onClick:this._onClickViewport,stageDimensions:l,media:k,showLoadingIndicator:m,useWidth:true},c("React").createElement(c("SpotlightViewerClose"),{onClick:this.close}),this.props.disablepaging?null:c("React").createElement(c("SpotlightViewerPagers"),null),this._renderBottomBar())),this.renderLayers())},_renderBottomBar:function j(){var k;if(!this.props.disableForward)k=c("React").createElement(c("SpotlightViewerBottomBarLink"),{onClick:this._showForwardDialog,ref:"forwardButton"},h._("Forward"));var l=c("XMessagingPhotoDownloadController").getURIBuilder().setString("photo_id",String(this.state.photoData.id)).getURI();if(this.props.actorid)l=c("ActorURI").create(l,this.props.actorid);return c("React").createElement(c("SpotlightViewerBottomBar"),null,c("React").createElement(c("SpotlightViewerBottomBarGroup"),null),c("React").createElement(c("SpotlightViewerBottomBarGroup"),null,k,c("React").createElement(c("SpotlightViewerBottomBarLink"),{rel:"async",ajaxify:l},h._("Download"))))}});f.exports=i}),null);