if (self.CavalryLogger) { CavalryLogger.start_js(["dYalH"]); }

__d("GeoCoordinatesRecord",["immutable"],(function a(b,c,d,e,f,g){"use strict";var h,i,j=c("immutable").Record({latitude:undefined,longitude:undefined});h=babelHelpers.inherits(k,j);i=h&&h.prototype;function k(){h.apply(this,arguments)}f.exports=k}),null);
__d("nearlyEqualNumbers",[],(function a(b,c,d,e,f,g){function h(i,j){if(i===j)return true;var k=Math.abs(i-j);if(k<Number.EPSILON)return true;var l=Math.abs(i),m=Math.abs(j);return k/(l+m)<Number.EPSILON}f.exports=h}),null);
__d("GeoCoordinates",["GeoCoordinatesRecord","nearlyEqualNumbers"],(function a(b,c,d,e,f,g){"use strict";var h,i;h=babelHelpers.inherits(j,c("GeoCoordinatesRecord"));i=h&&h.prototype;function j(k,l){i.constructor.call(this,{latitude:k,longitude:l})}j.prototype.nearlyEquals=function(k){return c("nearlyEqualNumbers")(this.latitude,k.latitude)&&c("nearlyEqualNumbers")(this.longitude,k.longitude)};f.exports=j}),null);
__d("ElementResizeEmitter",["cx","invariant","DOM","EventListener","SubscriptionList","requestAnimationFrame"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=!!navigator.userAgent.match(/Trident/);j=babelHelpers.inherits(m,c("SubscriptionList"));k=j&&j.prototype;function m(n){getComputedStyle(n).position!=="static"||i(0);k.constructor.call(this,m.__setup,m.__teardown);this.$ElementResizeEmitter1=n;this.$ElementResizeEmitter2=false}m.__setup=function(){var n=document.createElement("iframe");this.$ElementResizeEmitter3=n;if(l)n.src="javascript:void((function(){document.open();document.domain="+JSON.stringify(document.domain)+";document.close();})())";n.className="_3dtr";n.onload=this.$ElementResizeEmitter4.bind(this);this.$ElementResizeEmitter1.appendChild(n)};m.__teardown=function(){if(this.$ElementResizeEmitter3){if(this.$ElementResizeEmitter5!=undefined&&this.$ElementResizeEmitter3.document!==undefined)this.$ElementResizeEmitter5.remove();c("DOM").remove(this.$ElementResizeEmitter3);this.$ElementResizeEmitter3=undefined}};m.prototype.$ElementResizeEmitter4=function(){this.$ElementResizeEmitter6();var n=void 0;try{n=this.$ElementResizeEmitter3.contentWindow;n.document}catch(o){return}this.$ElementResizeEmitter5=c("EventListener").listen(n,"resize",this.$ElementResizeEmitter6.bind(this))};m.prototype.$ElementResizeEmitter6=function(){if(this.$ElementResizeEmitter2)return;this.$ElementResizeEmitter2=true;c("requestAnimationFrame")(function(){this.fireCallbacks();this.$ElementResizeEmitter2=false}.bind(this))};f.exports=m}),null);
__d("forEachDifference",["forEachObject"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(i,j,k){__p&&__p();c("forEachObject")(i,function(l,m){if(Object.prototype.hasOwnProperty.call(j,m)){if(k.onBoth)k.onBoth(l,j[m],m)}else if(k.onLeft)k.onLeft(l,m)});c("forEachObject")(j,function(l,m){if(!Object.prototype.hasOwnProperty.call(i,m)&&k.onRight)k.onRight(l,m)})}f.exports=h}),null);
__d("partitionObject",["forEachObject"],(function a(b,c,d,e,f,g){"use strict";function h(i,j,k){var l={},m={};c("forEachObject")(i,function(n,o){if(j.call(k,n,o,i))l[o]=n;else m[o]=n});return[l,m]}f.exports=h}),null);
__d("partitionObjectByKey",["partitionObject"],(function a(b,c,d,e,f,g){"use strict";function h(i,j){return c("partitionObject")(i,function(k,l){return j.has(l)})}f.exports=h}),null);
__d("LeafletLayer.react",["React","Set","areEqual","forEachDifference","forEachObject","partitionObjectByKey"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=c("React").PropTypes;h=babelHelpers.inherits(k,c("React").Component);i=h&&h.prototype;function k(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=i.constructor).call.apply(n,[this].concat(q)),this.$LeafletLayer1=undefined,this.$LeafletLayer2=function(s){this.$LeafletLayer1=this.props.onCreateLayer(s);this.context.onAddLayer(this.$LeafletLayer1)}.bind(this),o}k.mutateEventHandlers=function(n,o,p){if(!c("areEqual")(o,p))c("forEachDifference")(o||{},p||{},{onLeft:function q(r,s){n.on(s,r)},onRight:function q(r,s){n.off(s,r)},onBoth:function q(r,s,t){if(r!==s){n.off(t,s);n.on(t,r)}}})};k.addEventHandlers=function(n,o){if(o!=null)c("forEachObject")(o,function(p,q){n.on(q,p)})};k.prototype.componentDidMount=function(){this.$LeafletLayer2(m(this.props))};k.prototype.componentDidUpdate=function(n){var o=m(this.props),p=m(n);if(this.props.onUpdateLayer!==n.onUpdateLayer||!this.props.onUpdateLayer(this.$LeafletLayer1,o,p)){this.context.onRemoveLayer(this.$LeafletLayer1);this.$LeafletLayer2(o)}};k.prototype.componentWillUnmount=function(){this.context.onRemoveLayer(this.$LeafletLayer1);this.$LeafletLayer1=null};k.prototype.render=function(){return null};k.propTypes={onCreateLayer:j.func.isRequired,onUpdateLayer:j.func.isRequired};k.contextTypes={onAddLayer:j.func.isRequired,onRemoveLayer:j.func.isRequired};var l=new(c("Set"))(Object.keys(k.propTypes));function m(n){return c("partitionObjectByKey")(n,l)[1]}f.exports=k}),null);
__d("LeafletMapLayer.react",["invariant","LeafletLayer.react","React"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("React").PropTypes;i=babelHelpers.inherits(l,c("React").Component);j=i&&i.prototype;function l(){__p&&__p();var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.$LeafletMapLayer1=function(){var r=c("React").Children.only(this.props.children);this.$LeafletMapLayer3=r;return r.type.toLayer(r.props)}.bind(this),this.$LeafletMapLayer2=function(r,s,t){var u=c("React").Children.only(this.props.children);if(u.type!==this.$LeafletMapLayer3.type)return false;this.$LeafletMapLayer3=u;return u.type.mutate(r,s,t)}.bind(this),n}l.prototype.componentDidMount=function(){var m=c("React").Children.only(this.props.children);m.type.mutate||h(0);m.type.toLayer||h(0)};l.prototype.render=function(){var m=c("React").Children.only(this.props.children);return c("React").createElement(c("LeafletLayer.react"),babelHelpers["extends"]({},m.props,{onAddLayer:this.props.onAddLayer,onRemoveLayer:this.props.onRemoveLayer,onCreateLayer:this.$LeafletMapLayer1,onUpdateLayer:this.$LeafletMapLayer2}))};l.propTypes={onAddLayer:k.func.isRequired,onRemoveLayer:k.func.isRequired};f.exports=l}),null);
__d("LeafletView",["invariant","GeoCoordinates","ImmutableObject","nearlyEqualNumbers"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j;i=babelHelpers.inherits(k,c("ImmutableObject"));j=i&&i.prototype;function k(l){l||h(0);l.center instanceof c("GeoCoordinates")||h(0);typeof l.zoom==="number"||h(0);j.constructor.call(this,l)}k.prototype.nearlyEquals=function(l){return this.center.nearlyEquals(l.center)&&c("nearlyEqualNumbers")(this.zoom,l.zoom)};k.prototype.setZoom=function(l){return new k({center:this.center,zoom:l})};k.prototype.setCenter=function(l){return new k({center:l,zoom:this.zoom})};k.DEFAULT=new k({center:new(c("GeoCoordinates"))(0,0),zoom:0});f.exports=k}),null);
__d("mod",[],(function a(b,c,d,e,f,g){function h(i,j){var k=i%j;if(k*j<0)k+=j;return k}f.exports=h}),null);
__d("LeafletUtils",["invariant","GeoCoordinates","LeafletView","leaflet","mod"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i=c("leaflet").CRS.EPSG3857,j=360,k=j/2,l=c("leaflet").LatLng.DEG_TO_RAD,m=c("leaflet").LatLng.RAD_TO_DEG,n=c("leaflet").Projection.Mercator.R_MAJOR,o=2*Math.PI*n,p=new(c("leaflet").LatLngBounds)(new(c("leaflet").LatLng)(-j/4,-j/2),new(c("leaflet").LatLng)(j/4,j/2));function q(s){var t=s.zoomRange;Array.isArray(t)&&t.length===2||h(0);return t}var r={WHOLE_WORLD_BOUNDS:p,FULL_CIRCLE_DEG:j,fromLatLng:function s(t){return new(c("GeoCoordinates"))(t.lat,t.lng)},normalizedBounds:function s(t,u){var v=r.wrapLongitude(t.lng);u=c("leaflet").latLng(u.lat,u.lng+v-t.lng);t=c("leaflet").latLng(t.lat,v);return c("leaflet").latLngBounds(t,u)},fitBounds:function s(t,u,v){var w=v.crs||i,x=q(v),y=r.getBoundsZoom(t,u,{zoomRange:x,crs:w});if(y==null)y=x[0];var z=w.latLngToPoint(t.getSouthWest(),y),A=w.latLngToPoint(t.getNorthEast(),y),B=r.fromLatLng(w.pointToLatLng(z.add(A).divideBy(2),y));return new(c("LeafletView"))({center:B,zoom:y})},getBoundsZoom:function s(t,u,v){__p&&__p();var w=v.crs||i,x=q(v),y=c("leaflet").point(u.width,u.height),z=t.getNorthWest(),A=t.getSouthEast(),B=x[0]-1;for(;B<=x[1];++B){var C=w.latLngToPoint(A,B+1),D=w.latLngToPoint(z,B+1),E=C.subtract(D).floor();if(!y.contains(E))break}if(B<x[0])return null;if(B<=x[1])return B;return B-1},getViewBounds:function s(t,u,v){v=v||i;var w=u.width/2,x=u.height/2,y=r.toLatLng(t.center),z=v.latLngToPoint(y,t.zoom),A=v.pointToLatLng(c("leaflet").point(z.x-w,z.y+x),t.zoom),B=v.pointToLatLng(c("leaflet").point(z.x+w,z.y-x),t.zoom);return r.normalizedBounds(A,B)},isViewInBounds:function s(t,u,v,w){var x=r.getViewBounds(t,u,w),y=r.shiftBoundsLng(x,j);return v.some(function(z){return z.contains(x)||z.contains(y)})},projectCircle:function s(t,u,v){v=v||i;var w=r.toLatLng(t.center),x=v.projection,y=r.circleBounds(w,t.radius,x),z=v.latLngToPoint(y.getCenter(),u),A=v.latLngToPoint(y.getSouthWest(),u),B=v.latLngToPoint(y.getNorthEast(),u),C=c("leaflet").point(Math.round((B.x-A.x)/2),Math.round((A.y-B.y)/2));return{center:z,radius:C}},circleBounds:function s(t,u,v){v=v||i.projection;var w=t.lat,x=t.lng,y=u/n*m,z=v.project(c("leaflet").latLng(w+y,x)),A=v.project(c("leaflet").latLng(w-y,x)),B=z.add(A).divideBy(2),C=v.unproject(B).lat,D=w*l,E=C*l,F=Math.acos((Math.cos(y*l)-Math.sin(D)*Math.sin(E))/(Math.cos(D)*Math.cos(E)))*m;return c("leaflet").latLngBounds(c("leaflet").latLng(C-y,x-F),c("leaflet").latLng(C+y,x+F))},shiftBoundsLng:function s(t,u){return c("leaflet").latLngBounds([t.getSouthWest().lat,t.getSouthWest().lng+u],[t.getNorthEast().lat,t.getNorthEast().lng+u])},toLatLng:function s(t){return new(c("leaflet").LatLng)(t.latitude,t.longitude)},wrapLongitude:function s(t){return c("mod")(t+k,j)-k},areViewEqual:function s(t,u){if(!t&&!u)return true;if(!t||!u)return false;return t.zoom===u.zoom&&t.center.latitude===u.center.latitude&&t.center.longitude===u.center.longitude},metersToPixels:function s(t,u){return t/(o*Math.abs(Math.cos(u.center.latitude*l))/Math.pow(2,u.zoom+8))},distanceFromLatLng:function s(t,u,v){var w=u/n,x=v*l,y=t.lat*l,z=t.lng*l,A=Math.sin(y),B=Math.cos(y),C=Math.sin(w),D=Math.cos(w),E=Math.sin(x),F=Math.cos(x),G=A*D+B*C*F,H=Math.asin(G),I=E*C*B,J=D-A*G,K=z+Math.atan2(I,J);return new(c("leaflet").LatLng)(H*m,r.wrapLongitude(K*m))}};f.exports=r}),null);
__d("LeafletMap.react",["invariant","ElementResizeEmitter","LeafletMapLayer.react","LeafletUtils","LeafletView","React","ReactDOM","Set","debounceCore","emptyFunction","forEachDifference","leaflet","nullthrows"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("React").PropTypes,l=100,m=10,n=new(c("Set"))(["dragging","touchZoom","doubleClickZoom","scrollWheelZoom","boxZoom","keyboard","tab"]),o=k.instanceOf(c("LeafletView"));function p(v){var w=v.getCenter();return new(c("LeafletView"))({center:c("LeafletUtils").fromLatLng(w),zoom:v.getZoom()})}function q(v,w){return{center:[v.center.latitude,v.center.longitude],zoom:v.zoom,attributionControl:false,layers:w,trackResize:false}}function r(v,w,x){if(!n.has(w))throw new Error("cannot change Leaflet option `"+w+"` during component lifetime");v[w][x?"enable":"disable"]()}function s(v,w,x){if(w===x)return;c("forEachDifference")(w,x,{onLeft:function y(z,A){return r(v,A,z)},onRight:function y(z,A){throw new Error("reverting Leaflet option `"+A+"` back to default is not supported")},onBoth:function y(z,A,B){if(z!==A)r(v,B,z)}})}function t(v,w,x){c("forEachDifference")(w,x,{onLeft:function y(z,A){return void v.on(A,z)},onRight:function y(z,A){return void v.off(A,z)},onBoth:function y(z,A,B){if(z!==A){v.off(B,A);v.on(B,z)}}})}i=babelHelpers.inherits(u,c("React").Component);j=i&&i.prototype;function u(){__p&&__p();var v,w;for(var x=arguments.length,y=Array(x),z=0;z<x;z++)y[z]=arguments[z];return w=(v=j.constructor).call.apply(v,[this].concat(y)),this.$LeafletMap4=function(A){if(this.$LeafletMap3){this.$LeafletMap3.addLayer(A);return}this.$LeafletMap11().push(A)}.bind(this),this.$LeafletMap5=function(A){this.$LeafletMap3!==undefined||h(0);if(this.$LeafletMap3!==null)this.$LeafletMap3.removeLayer(A)}.bind(this),w}u.prototype.getChildContext=function(){return{onAddLayer:this.$LeafletMap4,onRemoveLayer:this.$LeafletMap5}};u.prototype.componentDidMount=function(){__p&&__p();var v=Object.assign({},this.props.defaultOptions,this.props.options,q(this.$LeafletMap10(),this.$LeafletMap11())),w=this.$LeafletMap3=c("leaflet").map(c("ReactDOM").findDOMNode(this),v);this.$LeafletMap1=null;this.$LeafletMap8=c("debounceCore")(this.$LeafletMap12.bind(this),l);t(w,this.props.eventHandlers,{});w.on("movestart",this.$LeafletMap13.bind(this));w.on("moveend",this.$LeafletMap14.bind(this));this.$LeafletMap2="still";this.$LeafletMap9=new(c("Set"))();this.$LeafletMap7=c("debounceCore")(function(x,y){if(this.$LeafletMap3)this.$LeafletMap3.setView(x,y)}.bind(this),m);this.$LeafletMap6=new(c("ElementResizeEmitter"))(c("ReactDOM").findDOMNode(this)).add(function(){var w=this.$LeafletMap3;if(w!=null){w.invalidateSize();c("nullthrows")(this.props.onSizeSettled)(w.getSize())}}.bind(this))};u.prototype.componentDidUpdate=function(v){var w=this.$LeafletMap3;if(w==null)return;var x=this.props,y=x.eventHandlers,z=x.options;t(w,y,v.eventHandlers);s(w,z,v.options);this.$LeafletMap16(v.view)};u.prototype.componentWillUnmount=function(){this.$LeafletMap6.remove();if(this.$LeafletMap3!=null)this.$LeafletMap3.remove();this.$LeafletMap3=null};u.prototype.render=function(){var v=c("React").Children.map(this.props.children,function(w,x){if(!w)return w;if(w.type.toLayer==null)return w;return c("React").createElement(c("LeafletMapLayer.react"),{key:w.key,onAddLayer:this.$LeafletMap4,onRemoveLayer:this.$LeafletMap5},w)}.bind(this));return c("React").createElement("div",{className:this.props.className,style:babelHelpers["extends"]({display:"relative"},this.props.style)},v)};u.prototype.$LeafletMap11=function(){if(!this.$LeafletMap1)this.$LeafletMap1=[];return this.$LeafletMap1};u.prototype.$LeafletMap10=function(){if(this.props.view)return this.props.view;if(this.props.defaultView)return this.props.defaultView;return c("LeafletView").DEFAULT};u.prototype.$LeafletMap14=function(){__p&&__p();if(!this.$LeafletMap3)return;var v=p(this.$LeafletMap3),w=this.$LeafletMap2;this.$LeafletMap2="still";if(this.props.view){if(w==="moving-stale"){this.$LeafletMap12();return}if(v.nearlyEquals(this.props.view))return;this.$LeafletMap8()}if(!this.props.onViewChange)return;this.props.onViewChange(v)};u.prototype.$LeafletMap13=function(){if(!this.$LeafletMap3)return;if(this.$LeafletMap2==="still")this.$LeafletMap2="moving"};u.prototype.$LeafletMap12=function(){this.$LeafletMap8.reset();if(this.$LeafletMap2==="moving")this.$LeafletMap2="moving-stale";var v=this.props.view,w=this.$LeafletMap3;if(v==null||w==null||v.nearlyEquals(p(w)))return;this.$LeafletMap7([v.center.latitude,v.center.longitude],v.zoom)};u.prototype.$LeafletMap16=function(v){var w=this.props.view;if(!w||!this.$LeafletMap3||w===v||v&&w.nearlyEquals(v))return;this.$LeafletMap12()};u.prototype.$LeafletMap15=function(v,w){if(v[w]!==this.props[w]&&!this.$LeafletMap9.has(w))this.$LeafletMap9.add(w)};u.propTypes={className:k.string,defaultOptions:k.object,defaultView:k.instanceOf(c("LeafletView")),eventHandlers:k.object,onSizeSettled:k.func,onViewChange:k.func,options:k.object,style:k.object,view:function v(w,x,y){__p&&__p();for(var z=arguments.length,A=Array(z>3?z-3:0),B=3;B<z;B++)A[B-3]=arguments[B];var C=o.apply(undefined,[w,x,y].concat(A));if(!w[x]||C)return C;if(w[x]&&w.defaultView)return new Error("You provided both `view` and `defaultView` props to LeafletMap. `defaultView` will be discarded.");if(w.onViewChange)return null;return new Error("You provided a `view` prop to LeafletMap without an `onViewChange` handler. This will prevent the user to move the view. If the view should be movable use `defaultView`. Otherwise, set `onViewChange`.")}};u.defaultProps={eventHandlers:{},onSizeSettled:c("emptyFunction"),options:{}};u.childContextTypes={onAddLayer:k.func.isRequired,onRemoveLayer:k.func.isRequired};f.exports=u}),null);
__d("LeafletMarker.react",["GeoCoordinates","LeafletLayer.react","LeafletUtils","React","areEqual","leaflet","nullthrows"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("React").Component);i=h&&h.prototype;j.prototype.$LeafletMarker1=function(k,l,m){__p&&__p();var n=m.options||{},o=n.opacity,p=n.zIndex,q=babelHelpers.objectWithoutProperties(n,["opacity","zIndex"]),r=l.options||{},s=r.opacity,t=r.zIndex,u=babelHelpers.objectWithoutProperties(r,["opacity","zIndex"]);if(!c("areEqual")(u,q))return false;if(s!==o)k.setOpacity(s);if(t!==p)k.setZIndex(t);if(l.coordinates!==m.coordinates)k.setLatLng(c("LeafletUtils").toLatLng(l.coordinates));var v=l.popup;if(v){var w=v.type.mutate(k.getPopup(),v.props,c("nullthrows")(m.popup).props);if(!w){k.unbindPopup();k.bindPopup(v.type.toLayer(v.props,k))}}else if(!v&&m.popup)k.unbindPopup();c("LeafletLayer.react").mutateEventHandlers(k,l.eventHandlers,m.eventHandlers);return true};j.prototype.$LeafletMarker2=function(k){var l=c("leaflet").marker(c("LeafletUtils").toLatLng(k.coordinates),k.options);if(k.popup)l.bindPopup(k.popup.type.toLayer(k.popup.props,l));c("LeafletLayer.react").addEventHandlers(l,k.eventHandlers);return l};j.prototype.render=function(){return c("React").createElement(c("LeafletLayer.react"),babelHelpers["extends"]({},this.props,{onCreateLayer:this.$LeafletMarker2,onUpdateLayer:this.$LeafletMarker1}))};function j(){h.apply(this,arguments)}f.exports=j}),null);
__d("LeafletTileLayer.react",["LeafletLayer.react","React","areEqual","leaflet"],(function a(b,c,d,e,f,g){__p&&__p();var h,i,j=c("React").PropTypes;h=babelHelpers.inherits(k,c("React").Component);i=h&&h.prototype;k.prototype.render=function(){"use strict";return c("React").createElement(c("LeafletLayer.react"),babelHelpers["extends"]({},this.props,{onCreateLayer:l,onUpdateLayer:m}))};function k(){"use strict";h.apply(this,arguments)}k.propTypes={options:j.object,urlTemplate:j.string.isRequired};function l(n){return c("leaflet").tileLayer(n.urlTemplate,n.options)}function m(n,o,p){__p&&__p();var q=p.options||{},r=q.opacity,s=q.zIndex,t=babelHelpers.objectWithoutProperties(q,["opacity","zIndex"]),u=o.options||{},v=u.opacity,w=u.zIndex,x=babelHelpers.objectWithoutProperties(u,["opacity","zIndex"]);if(!c("areEqual")(x,t))return false;if(v!==r)n.setOpacity(v);if(w!==s)n.setZIndex(w);if(o.urlTemplate!==p.urlTemplate)n.setUrl(o.urlTemplate);return true}f.exports=k}),null);
__d("GeoRectangle",["GeoCoordinates","ImmutableObject"],(function a(b,c,d,e,f,g){__p&&__p();var h,i;h=babelHelpers.inherits(j,c("ImmutableObject"));i=h&&h.prototype;function j(k,l,m,n){"use strict";i.constructor.call(this,{n:k,w:l,s:m,e:n})}j.prototype.containsLat=function(k){"use strict";return k>=this.s&&k<=this.n};j.prototype.getCenter=function(){"use strict";var k=(this.n+this.s)/2,l;l=(this.e+this.w)/2;if(this.w>this.e){l-=180;if(l<-180)l+=360}return{latitude:k,longitude:l}};j.prototype.containsLon=function(k){"use strict";if(this.w>this.e)return k>=this.w||k<=this.e;return k>=this.w&&k<=this.e};j.prototype.getHeight=function(){"use strict";return this.n-this.s};j.prototype.getWidth=function(){"use strict";var k=this.e;if(this.w>this.e)k+=360;return k-this.w};j.prototype.containsPoint=function(k,l){"use strict";return this.containsLat(k)&&this.containsLon(l)};j.prototype.containsGeoRectangle=function(k){"use strict";return this.containsPoint(k.n,k.w)&&this.containsPoint(k.s,k.e)};j.prototype.toArray=function(){"use strict";return{n:this.n,w:this.w,s:this.s,e:this.e}};j.fromPoints=function(k){__p&&__p();if(!k||k.length===0)return null;if(k.length===1){var l=k[0];return new j(l.latitude,l.longitude,l.latitude,l.longitude)}var m=k.map(function(l){return l.latitude}),n=k.map(function(l){return l.longitude}).sort(function(t,u){return t-u}),o=360+n[0]-n[n.length-1],p=n.length-1,q=0;for(var r=0;r<n.length-1;r++){var s=n[r+1]-n[r];if(s>o){o=s;p=r;q=r+1}}return new j(Math.max.apply(Math,m),n[q],Math.min.apply(Math,m),n[p])};f.exports=j}),null);
__d("TilesMapTheme",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({DEFAULT:"default",CROWDSOURCING_OSM:"crowdsourcing_osm",ROAD_MASK_OSM_EDITING:"road_mask_osm_editing",LIVE_MAPS:"live_maps",INDOOR_OSM:"indoor_osm",LIVE_MAPS_MIMIC:"live_maps_mimic",MAP_DIFF:"map_diff"})}),null);
__d("XMapsProviderByViewPortController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/maps/provider_by_viewport/",{swlat:{type:"Float",required:true},swlon:{type:"Float",required:true},nelat:{type:"Float",required:true},nelon:{type:"Float",required:true},zoom:{type:"Float",required:true}})}),null);
__d("TilesMapUtils",["CurrentLocale","GeoCoordinates","GeoRectangle","LeafletUtils","LeafletView","TilesMapConfig","TilesMapTheme","URI","XAsyncRequest","XMapsProviderByViewPortController","leaflet"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("TilesMapConfig").OSM_RECTS_RAW.map(function(j){return c("leaflet").latLngBounds([j[2],j[1]],[j[0],j[3]])}),i={DEFAULT_VIEW:new(c("LeafletView"))({center:new(c("GeoCoordinates"))(0,0),zoom:c("TilesMapConfig").ZOOM_RANGE.MIN}),getMapProviderForAttributionByViewPort:function j(k,l,m){var n=c("XMapsProviderByViewPortController").getURIBuilder().setFloat("swlat",k.getSouth()).setFloat("swlon",k.getWest()).setFloat("nelat",k.getNorth()).setFloat("nelon",k.getEast()).setFloat("zoom",l).getURI();new(c("XAsyncRequest"))(n).setHandler(function(o){return m(o.payload)}).send()},getTileURLTemplate:function j(k,l){if(!k)k=c("CurrentLocale").get();return c("TilesMapConfig").TILE_URL_TEMPLATE+"&language="+k+(l&&l!==c("TilesMapTheme").DEFAULT?"&theme="+l:"")+(l===c("TilesMapTheme").LIVE_MAPS?"&lmv="+c("TilesMapConfig").LIVE_MAP_VERSION:"")},getOSMRects:function j(){return i.getOSMRectsFromRaw(c("TilesMapConfig").OSM_RECTS_RAW)},getOSMRectsFromRaw:function j(k){return k.map(function(l){return new(c("GeoRectangle"))(l[0],l[1],l[2],l[3])})},getMapProviderForAttribution:function j(k,l,m,n){if(l.height<c("TilesMapConfig").MIN_SIZE_FOR_ATTRIBUTION||l.width<c("TilesMapConfig").MIN_SIZE_FOR_ATTRIBUTION)return null;if(n!==""&&n!==c("TilesMapTheme").DEFAULT&&n!==c("TilesMapTheme").ROAD_MASK_OSM_EDITING)return"OSM";if(k.zoom<c("TilesMapConfig").OSM_ZOOM_THRESHOLD)return"HERE";return c("LeafletUtils").isViewInBounds(k,l,h,m)?"OSM":"HERE"},getMapProviderForReportButton:function j(k,l){if(l!==""&&l!==c("TilesMapTheme").DEFAULT&&l!==c("TilesMapTheme").ROAD_MASK_OSM_EDITING)return"OSM";if(k.zoom<c("TilesMapConfig").OSM_ZOOM_THRESHOLD)return"HERE";var m=c("leaflet").latLng(k.center.latitude,k.center.longitude);return h.some(function(n){return n.contains(m)})?"OSM":"HERE"},getReporterToolUrl:function j(k,l){switch(k){case"OSM":var m=Math.max(Math.floor(l.zoom),c("TilesMapConfig").OSM_MAP_MIN_ZOOM_TO_REPORT_ISSUE);return new(c("URI"))(c("TilesMapConfig").OSM_MAP_REPORTER_URL).addQueryData("lat",l.center.latitude).addQueryData("lon",l.center.longitude).addQueryData("zoom",m).toString();default:case"HERE":return new(c("URI"))(c("TilesMapConfig").HERE_MAP_REPORTER_URL).addQueryData("features","road,border").addQueryData("zoomLevel",Math.floor(l.zoom)).addQueryData("lang",c("CurrentLocale").get()).addQueryData("coord",l.center.latitude+","+l.center.longitude).toString()}}};f.exports=i}),null);
__d("MessengerDynamicMap.react",["CurrentLocale","GeoCoordinates","leaflet","LeafletMap.react","LeafletMarker.react","LeafletTileLayer.react","LeafletUtils","LeafletView","React","TilesMapUtils"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=c("React").PropTypes,k={tap:false},l={icon:c("leaflet").icon({iconUrl:"https://www.facebook.com/images/places/map/bright-pink-pin.png",iconSize:[20,27],iconAnchor:[9,24]}),draggable:true};h=babelHelpers.inherits(m,c("React").PureComponent);i=h&&h.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=i.constructor).call.apply(n,[this].concat(q)),this.$MessengerDynamicMap1=new(c("LeafletView"))({center:new(c("GeoCoordinates"))(this.props.lat,this.props["long"]),zoom:this.props.zoom}),this.$MessengerDynamicMap2=function(event){var s=event.target&&event.target.getLatLng(),t=c("LeafletUtils").fromLatLng(s);this.props.onMarkerDragEnd(t&&t.latitude,t&&t.longitude)}.bind(this),o}m.prototype.render=function(){var n=c("TilesMapUtils").getTileURLTemplate(c("CurrentLocale").get());return c("React").createElement(c("LeafletMap.react"),{defaultOptions:k,defaultView:this.$MessengerDynamicMap1,style:{height:this.props.height+"px",width:this.props.width+"px"}},c("React").createElement(c("LeafletTileLayer.react"),{urlTemplate:n}),c("React").createElement(c("LeafletMarker.react"),{coordinates:new(c("GeoCoordinates"))(this.props.lat,this.props["long"]),eventHandlers:{dragstart:this.props.onMarkerDragStart,dragend:this.$MessengerDynamicMap2},options:l}))};m.defaultProps={zoom:15};m.propTypes={lat:j.number.isRequired,"long":j.number.isRequired,height:j.number.isRequired,width:j.number.isRequired,onMarkerDragEnd:j.func.isRequired,onMarkerDragStart:j.func.isRequired,zoom:j.number.isRequired};f.exports=m}),null);
__d("HoverAnimatedSticker.react",["React","RelayClassic","Sticker.react","StickerUtils"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=Math.floor(120*window.devicePixelRatio);h=babelHelpers.inherits(k,c("React").Component);i=h&&h.prototype;k.prototype.render=function(){var l=this.props.sticker,m=l.image?l.image.uri:null,n=l.sprite_image?l.sprite_image.uri:null,o=this.props.animationTrigger||"hover",p=c("StickerUtils").getScaledDimensions(l.image.height,l.image.width,this.props.maxDimension),q=p.height,r=p.width;return c("React").createElement(c("Sticker.react"),{animationTrigger:o,forceCursorPointer:this.props.forceCursorPointer,frameCount:l.frame_count,frameRate:l.frame_rate,framesPerCol:l.frames_per_column,framesPerRow:l.frames_per_row,sourceURI:m,sourceWidth:r,sourceHeight:q,spriteURI:n})};function k(){h.apply(this,arguments)}f.exports=c("RelayClassic").createContainer(k,{fragments:{sticker:function l(){return function(m,n,o,p){return{children:[{fieldName:"frame_count",kind:"Field",metadata:{},type:"Int"},{fieldName:"frame_rate",kind:"Field",metadata:{},type:"Int"},{fieldName:"frames_per_column",kind:"Field",metadata:{},type:"Int"},{fieldName:"frames_per_row",kind:"Field",metadata:{},type:"Int"},{calls:[{kind:"Call",metadata:{type:"Int"},name:"width",value:c("RelayClassic").QL.__var(m)},{kind:"Call",metadata:{type:"Int"},name:"height",value:c("RelayClassic").QL.__var(n)}],children:[{fieldName:"uri",kind:"Field",metadata:{},type:"Url"},{fieldName:"width",kind:"Field",metadata:{},type:"Int"},{fieldName:"height",kind:"Field",metadata:{},type:"Int"}],fieldName:"image",kind:"Field",metadata:{canHaveSubselections:true},type:"Image"},{calls:[{kind:"Call",metadata:{type:"Int"},name:"width",value:c("RelayClassic").QL.__var(o)},{kind:"Call",metadata:{type:"Int"},name:"height",value:c("RelayClassic").QL.__var(p)}],children:[{fieldName:"uri",kind:"Field",metadata:{},type:"Url"}],fieldName:"sprite_image",kind:"Field",metadata:{canHaveSubselections:true},type:"Image"},{fieldName:"id",kind:"Field",metadata:{isGenerated:true,isRequisite:true},type:"ID"}],id:c("RelayClassic").QL.__id(),kind:"Fragment",metadata:{},name:"HoverAnimatedSticker_react_StickerRelayQL",type:"Sticker"}}(j,j,j,j)}}})}),null);
__d("HoverAnimatedStickerRoute",["react-relay/classic/query/RelayQL","react-relay/classic/route/RelayRoute"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("react-relay/classic/route/RelayRoute"));i=h&&h.prototype;function j(){h.apply(this,arguments)}j.routeName="HoverAnimatedStickerRoute";j.paramDefinitions={id:{required:true,type:"String"}};j.queries={sticker:function k(l){return function(m){return{calls:[{kind:"Call",metadata:{type:"ID!"},name:"id",value:{kind:"CallVariable",callVariableName:"id"}}],children:[].concat.apply([],[{fieldName:"id",kind:"Field",metadata:{isGenerated:true,isRequisite:true},type:"ID"},{fieldName:"__typename",kind:"Field",metadata:{isGenerated:true,isRequisite:true},type:"String"},c("react-relay/classic/query/RelayQL").__frag(m)]),fieldName:"node",kind:"Query",metadata:{isAbstract:true,identifyingArgName:"id",identifyingArgType:"ID!"},name:"HoverAnimatedStickerRoute",type:"Node"}}(l.getFragment("sticker"))}};f.exports=j}),null);
__d("MessengerBotsQuickReplyButton.react",["cx","ix","HoverAnimatedSticker.react","HoverAnimatedStickerRoute","Image.react","MessengerEnvironment","React","react-relay/classic/container/RelayRootContainer","ShimButton.react","XUISpinner.react","joinClasses"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l,m,n,o,p,q,r,s,t,u,v=c("React").PropTypes;j=babelHelpers.inherits(w,c("React").Component);k=j&&j.prototype;w.prototype.render=function(){var C=this.props.option;return c("React").createElement("div",{className:(C.dismissed?"_18m_":"")+" _56n2"},this.$MessengerBotsQuickReplyButton1())};w.prototype.$MessengerBotsQuickReplyButton1=function(){switch(this.props.option.content_type){case"text":return c("React").createElement(x,babelHelpers["extends"]({imageUrl:this.$MessengerBotsQuickReplyButton2()},this.props));case"sticker":return c("React").createElement(z,this.props);case"location":case"p2p_payment":case"ride_service":case"open_camera":case"record_audio":return c("React").createElement(y,babelHelpers["extends"]({imageUrl:this.$MessengerBotsQuickReplyButton2()},this.props));case"user_phone_number":return c("React").createElement(x,babelHelpers["extends"]({imageUrl:this.$MessengerBotsQuickReplyButton2()},this.props));case"user_email":return c("React").createElement(x,babelHelpers["extends"]({imageUrl:this.$MessengerBotsQuickReplyButton2()},this.props));default:return null}};w.prototype.$MessengerBotsQuickReplyButton2=function(){var C=this.props.option,D=c("MessengerEnvironment").messengerui;switch(C.content_type){case"location":return D?i("87219"):i("87222");case"p2p_payment":return D?i("87227"):i("87226");case"ride_service":return D?i("87289"):i("87288");case"open_camera":return D?i("87289"):i("87288");case"record_audio":return D?i("87219"):i("87222");default:return C.image_url}};function w(){j.apply(this,arguments)}w.propTypes={option:v.object.isRequired,onClick:v.func.isRequired,setPreview:v.func.isRequired};l=babelHelpers.inherits(x,c("React").Component);m=l&&l.prototype;x.prototype.render=function(){var C=this.props,D=C.option,E=C.onClick,F=C.imageUrl,G=C.userData,H=c("MessengerEnvironment").messengerui,I=!!F,J=D&&D.title;if(D.content_type==="user_email"||D.content_type==="user_phone_number")J=G;if(J)return c("React").createElement(c("ShimButton.react"),{className:c("joinClasses")(this.props.className,"_3u69"+(H?" _36wf":"")+(H&&!I?" _2pi9":"")+(!H?" _-lq":"")+(!H&&!I?" _2pi8":"")),onClick:E},I&&F?c("React").createElement(A,{imageUrl:F}):null,c("React").createElement(B,{hasIcon:I,title:J}));else return null};function x(){l.apply(this,arguments)}x.propTypes={option:v.object.isRequired,imageUrl:c("Image.react").validateImageSrcPropType,onClick:v.func.isRequired};n=babelHelpers.inherits(y,c("React").Component);o=n&&n.prototype;y.prototype.render=function(){var C=this.props,D=C.option,E=C.onClick,F=C.imageUrl,G=c("MessengerEnvironment").messengerui,H=this.$ActionButton1();return c("React").createElement(c("ShimButton.react"),{className:c("joinClasses")(this.props.className,"_3u69"+(!H?" _5pdw":"")+(G?" _10-b":"")+(G&&H?" _5pdx":"")+(!G?" _-lq":"")+(!G&&H?" _5pdy":"")),onClick:E},F?c("React").createElement(A,{imageUrl:F}):null,c("React").createElement(B,{hasIcon:!!F,title:D&&D.title}))};y.prototype.$ActionButton1=function(){switch(this.props.option.content_type){case"p2p_payment":case"location":case"open_camera":return false;case"record_audio":var C=navigator.mediaDevices&&navigator.mediaDevices.getUserMedia||navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;return!C;default:return false}};function y(){n.apply(this,arguments)}y.propTypes={option:v.object.isRequired,imageUrl:c("Image.react").validateImageSrcPropType,onClick:v.func.isRequired};p=babelHelpers.inherits(z,c("React").PureComponent);q=p&&p.prototype;function z(){var C,D;for(var E=arguments.length,F=Array(E),G=0;G<E;G++)F[G]=arguments[G];return D=(C=q.constructor).call.apply(C,[this].concat(F)),this.state={clearPreviewFn:null},this.$StickerButton3=function(){var H=c("React").createElement(c("react-relay/classic/container/RelayRootContainer"),{Component:c("HoverAnimatedSticker.react"),route:new(c("HoverAnimatedStickerRoute"))({id:this.$StickerButton2()}),renderFetched:function J(K){return c("React").createElement(c("HoverAnimatedSticker.react"),babelHelpers["extends"]({},K,{animationTrigger:"load_and_hover",forceCursorPointer:true,maxDimension:120}))}}),I=this.props.setPreview(H);this.setState({clearPreviewFn:I})}.bind(this),this.$StickerButton4=function(){this.$StickerButton1()}.bind(this),D}z.prototype.componentWillUnmount=function(){this.$StickerButton1()};z.prototype.render=function(){var C=this.props.onClick,D=c("MessengerEnvironment").messengerui,E=this.$StickerButton2();if(!E)return null;var F=D?44:36;return c("React").createElement("div",{className:c("joinClasses")(this.props.className,"_3u69 _59x7"),onClick:C,onMouseEnter:this.$StickerButton3,onMouseLeave:this.$StickerButton4,role:"presentation"},c("React").createElement(c("react-relay/classic/container/RelayRootContainer"),{Component:c("HoverAnimatedSticker.react"),route:new(c("HoverAnimatedStickerRoute"))({id:E}),renderLoading:function G(H){return c("React").createElement(c("XUISpinner.react"),{background:"light",size:"small"})},renderFetched:function G(H){return c("React").createElement(c("HoverAnimatedSticker.react"),babelHelpers["extends"]({},H,{forceCursorPointer:true,maxDimension:F}))}}))};z.prototype.$StickerButton2=function(){var C=this.props.option,D=C.data;return D&&D.sticker_id};z.prototype.$StickerButton1=function(){this.state.clearPreviewFn?this.state.clearPreviewFn():null};z.propTypes={option:v.object.isRequired,onClick:v.func.isRequired,setPreview:v.func.isRequired};r=babelHelpers.inherits(A,c("React").Component);s=r&&r.prototype;A.prototype.render=function(){var C=this.props.imageUrl,D=c("MessengerEnvironment").messengerui;return c("React").createElement(c("Image.react"),{src:C,className:(D?"_10-a":"")+(!D?" _10-9":"")+(!D?" _3-8h":"")})};function A(){r.apply(this,arguments)}A.propTypes={imageUrl:c("Image.react").validateImageSrcPropType};t=babelHelpers.inherits(B,c("React").Component);u=t&&t.prototype;B.prototype.render=function(){var C=this.props,D=C.hasIcon,E=C.title,F=c("MessengerEnvironment").messengerui;return c("React").createElement("div",{className:(F?"_10-e":"")+(F&&D?" _10-f":"")+(F&&D?" _3-91":"")+(!F?" _10-c":"")+(!F&&D?" _10-d":"")+(!F&&D?" _3-90":"")},E)};function B(){t.apply(this,arguments)}B.propTypes={hasIcon:v.bool.isRequired,title:v.string.isRequired};f.exports=w}),null);
__d("MNOmniMConstants",["keyMirror"],(function a(b,c,d,e,f,g){"use strict";var h=c("keyMirror")({OMNIM:null,QUICKREPLIES:null});f.exports=babelHelpers["extends"]({},h,{SUGGESTION_MODES:["conservative","balanced","aggressive","muted"]})}),null);
__d("OmniMActions",["MessengerFluxReduceDispatcher","keyMirror","setImmediate"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("keyMirror")({BAR_DISMISSED:null,BAR_DISPLAYED:null,BAR_DISAPPEARED:null,BAR_TIMED_OUT:null,MERCURY_DISPATCHED:null,FETCH_SUGGESTIONS:null,PREFS_UPDATED:null,SUGGESTION_CLICKED:null,SUGGESTION_COMPLETED:null,SUGGESTION_DISMISSED:null,SUGGESTION_DISPLAYED:null,SUGGESTION_DISAPPEARED:null,SUGGESTION_MODE_SET:null,SUGGESTIONS_DISMISSED_FOR_THREAD:null}),i="omnim",j={Types:h,Namespace:i,mercuryDispatched:function k(l,m){c("MessengerFluxReduceDispatcher").dispatch({type:h.MERCURY_DISPATCHED,namespace:i,mercuryType:l,data:m})},messageFetched:function k(l,m){c("setImmediate")(function(){c("MessengerFluxReduceDispatcher").dispatch({type:h.FETCH_SUGGESTIONS,namespace:i,threadID:l,message:m})})},suggestionClicked:function k(l,m,n,o){c("MessengerFluxReduceDispatcher").dispatch({type:h.SUGGESTION_CLICKED,namespace:i,threadID:l,option:m,source:n,position:o})},suggestionCompleted:function k(l,m,n,o){c("MessengerFluxReduceDispatcher").dispatch({type:h.SUGGESTION_COMPLETED,namespace:i,threadID:l,option:m,source:n,position:o})},suggestionDismissed:function k(l,m,n,o){c("MessengerFluxReduceDispatcher").dispatch({type:h.SUGGESTION_DISMISSED,namespace:i,threadID:l,option:m,source:n,position:o})},suggestionsDismissedForThread:function k(l){c("MessengerFluxReduceDispatcher").dispatch({type:h.SUGGESTIONS_DISMISSED_FOR_THREAD,namespace:i,threadID:l})},suggestionDisplayed:function k(l,m){c("setImmediate")(function(){c("MessengerFluxReduceDispatcher").dispatch({type:h.SUGGESTION_DISPLAYED,namespace:i,option:l,position:m})})},suggestionDisappeared:function k(l,m){c("setImmediate")(function(){c("MessengerFluxReduceDispatcher").dispatch({type:h.SUGGESTION_DISAPPEARED,namespace:i,option:l,position:m})})},prefsUpdated:function k(l){c("MessengerFluxReduceDispatcher").dispatch({type:h.PREFS_UPDATED,namespace:i,prefs:l})},suggestionModeSet:function k(l){c("MessengerFluxReduceDispatcher").dispatch({type:h.SUGGESTION_MODE_SET,namespace:i,mode:l})},barDismissed:function k(l){c("MessengerFluxReduceDispatcher").dispatch({type:h.BAR_DISMISSED,namespace:i,options:l})},barDisplayed:function k(l){c("setImmediate")(function(){c("MessengerFluxReduceDispatcher").dispatch({type:h.BAR_DISPLAYED,namespace:i,options:l})})},barDisappeared:function k(l){c("setImmediate")(function(){c("MessengerFluxReduceDispatcher").dispatch({type:h.BAR_DISAPPEARED,namespace:i,options:l})})},barTimedOut:function k(l,m){c("setImmediate")(function(){c("MessengerFluxReduceDispatcher").dispatch({type:h.BAR_TIMED_OUT,namespace:i,options:m,threadID:l})})}};f.exports=j}),null);
__d("messengerDynamicMapReact",["bs_curry","ReasonReact","MessengerDynamicMap.react"],(function a(b,c,d,e,f,g){"use strict";function h(j,k,l){return c("bs_curry")._1(j,[k,l])}function i(j,k,l,m,n,o,p){return c("ReasonReact").wrapJsForReason(c("MessengerDynamicMap.react"),{lat:j,"long":k,onMarkerDragEnd:function q(r,s){return c("bs_curry")._1(l,[r,s])},onMarkerDragStart:m,height:n,width:o},p)}g.makeTwoArgTuple=h;g.make=i}),null);
__d("messengerSendLocationDialogReact",["cx","fbt","bs_block","bs_curry","React","utilsRe","CurrentUser","ReasonReact","PhotosUploadID","messengerDialogsRe","MercuryMessageObject","messengerDialogReact","MercuryAttachmentType","MercuryMessageActions","messengerSpinnerReact","MercuryTriodeSourceUtil","messengerDialogBodyReact","messengerDynamicMapReact"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j={enableHighAccuracy:true,timeout:6e4,maximumAge:12e4};function k(){return c("utilsRe").isTruthy(navigator&&"geolocation"in navigator)}function l(C){return c("bs_block").__(0,[C])}function m(C){return c("bs_block").__(1,[C])}function n(C){return c("bs_block").__(2,[C])}function o(C){return c("bs_block").__(3,[C])}function p(C){if(C)return 0;else return c("messengerDialogsRe").removeDialog(0)}function q(C,D){var E=c("utilsRe").isTruthy(navigator&&"geolocation"in navigator),F=D[2][4][0];if(E!==0&&F){navigator.geolocation.clearWatch(F[0]);return 0}else return 0}function r(C){return c("utilsRe").$pipe$unknown(C[1],i._("Your Location"))}function s(C,D){__p&&__p();var E=D[2],F=E[0],G=E[2],H=E[3];if(F)return F[0];else{var I=0;if(G)if(H)return c("ReasonReact").element(0,0,c("messengerDynamicMapReact").make(G[0],H[0],c("bs_curry")._1(D[1],l),c("bs_curry")._1(D[0],q),500,500,[]));else I=1;else I=1;if(I===1)return c("React").createElement("div",{className:"_j4g"},C)}}function t(C){return q(0,C)}function u(C){var D=C[1];if(c("utilsRe").isTruthy(navigator&&"geolocation"in navigator))C[2][4][0]=[navigator.geolocation.watchPosition(c("bs_curry")._1(D,m),c("bs_curry")._1(D,n),j)];else c("bs_curry")._2(D,o,0);return 0}function v(){return[0,0,0,0,[0]]}var w=c("ReasonReact").reducerComponent("MessengerSendLocationDialogReact");function x(C,D,E){__p&&__p();var F=function F(E,I){__p&&__p();var J=I[2];c("messengerDialogsRe").removeDialog(0);var K=c("CurrentUser").getID(),L=c("MercuryMessageObject").getForFBID(K),M=c("MercuryMessageActions").getForFBID(K),N="upload_"+c("PhotosUploadID").getNewID(),O=L.constructAttachmentMessageObject(c("MercuryTriodeSourceUtil").getMercuryTriodeSource(),C),P=J[2],Q=J[3];if(P)if(Q)O.location_attachment={coordinates:{latitude:P[0],longitude:Q[0]},is_current_location:true};var R={upload_id:N,preview_attachments:[{upload_id:N,attach_type:c("MercuryAttachmentType").PHOTO,preview_uploading:true}]};M.addAttachmentPlaceholder(O,N,R);M.send(O,function(){M.confirmAttachmentPlaceholder(N,{upload_id:N});return 0},undefined);return c("bs_curry")._1(D,0)},G=function G(I){var J=I[2],K=J[0],L=J[2],M=J[3];if(K||!(L&&M))return null;else return c("ReasonReact").element(0,0,c("messengerDialogReact").Button[0](0,[i._("Send Location")],0,0,[c("bs_curry")._1(I[0],F)],[0],0,0,[]))},H=w.slice();H[4]=u;H[6]=t;H[9]=function(I){return c("ReasonReact").element(0,0,c("messengerDialogReact").Dialog[0](0,p,0,0,0,0,[548],[c("ReasonReact").element(0,0,c("messengerDialogReact").Header[0](0,0,r(I[2]))),c("ReasonReact").element(0,0,c("messengerDialogBodyReact").make(0,[s(c("ReasonReact").element(0,0,c("messengerSpinnerReact").make(0,0,0,[])),I)])),c("ReasonReact").element(0,0,c("messengerDialogReact").Footer[0](0,0,[c("ReasonReact").element(0,0,c("messengerDialogReact").CancelButton[0](0,[])),G(I)]))]))};H[10]=v;H[12]=function(I,J){switch(I.tag|0){case 0:var K=I[0];return c("bs_block").__(0,[[J[0],J[1],[K[0]],[K[1]],J[4]]]);case 1:var L=I[0];return c("bs_block").__(0,[[J[0],J[1],[L.coords.latitude],[L.coords.longitude],J[4]]]);case 2:var M=I[0].code,N=M!==1?[i._("Sorry, something went wrong. Please try again or send your location from the Messenger app."),i._("Couldn't Find Location")]:[i._("Messenger needs permission to access your location. Please update your browser settings or use the Messenger app."),i._("Permission Required")];return c("bs_block").__(0,[[[N[0]],[N[1]],J[2],J[3],J[4]]]);case 3:return c("bs_block").__(0,[[[i._("Your browser doesn't support location sharing. You can also send your location from the Messenger app.")],[i._("Location Not Supported")],J[2],J[3],J[4]]])}};return H}var y=c("ReasonReact").wrapReasonForJs(w,function(C){return x(C.threadID,C.onCompletion,[])}),z=500,A=500,B=c("utilsRe").$pipe$unknown;g.mapHeight=z;g.mapWidth=A;g.locationOptions=j;g.$pipe$unknown=B;g.isLocationAPISupported=k;g.updateCoordinates=l;g.updatePosition=m;g.error=n;g.locationSharingUnsupported=o;g.handleToggle=p;g.clearWatchLocation=q;g.getTitle=r;g.getBody=s;g.willUnmount=t;g.didMount=u;g.initialState=v;g.component=w;g.make=x;g.jsComponent=y}),null);
__d("xUIDialogReact",["ReasonReact","bs_js_null_undefined","XUIDialogBody.react","XUIDialogButton.react","XUIDialogFooter.react","XUIDialogHeader.react","XUIDialogHeaderTitle.react","XUIDialogCancelButton.react"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(v){if(v)switch(v[0]){case 0:return["cancel"];case 1:return["confirm"];case 2:return["button"]}else return 0}function i(v){if(v)switch(v[0]){case 0:return["default"];case 1:return["special"];case 2:return["confirm"]}else return 0}function j(v){return c("ReasonReact").wrapJsForReason(c("XUIDialogHeader.react"),{},v)}var k=[j];function l(v){return c("ReasonReact").wrapJsForReason(c("XUIDialogHeaderTitle.react"),{},v)}var m=[l];function n(v){return c("ReasonReact").wrapJsForReason(c("XUIDialogBody.react"),{},v)}var o=[n];function p(v){return c("ReasonReact").wrapJsForReason(c("XUIDialogFooter.react"),{},v)}var q=[p];function r(v,w,x,y,z){return c("ReasonReact").wrapJsForReason(c("XUIDialogButton.react"),{action:c("bs_js_null_undefined").from_opt(h(v)),label:c("bs_js_null_undefined").from_opt(w),onClick:c("bs_js_null_undefined").from_opt(x),use:c("bs_js_null_undefined").from_opt(i(y))},z)}var s=[r];function t(v){return c("ReasonReact").wrapJsForReason(c("XUIDialogCancelButton.react"),{},v)}var u=[t];g.stringOfButtonAction=h;g.stringOfButtonUse=i;g.Header=k;g.HeaderTitle=m;g.Body=o;g.Footer=q;g.Button=s;g.CancelButton=u}),null);
__d("xUISpinnerReact",["ReasonReact","XUISpinner.react"],(function a(b,c,d,e,f,g){"use strict";function h(i){return c("ReasonReact").wrapJsForReason(c("XUISpinner.react"),{},i)}g.make=h}),null);
__d("chatTabSendLocationDialogReact",["fbt","bs_block","bs_curry","React","CurrentUser","ReasonReact","PhotosUploadID","xUIDialogReact","xUISpinnerReact","MercuryMessageObject","MercuryAttachmentType","MercuryMessageActions","MercuryTriodeSourceUtil","messengerSendLocationDialogReact"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i=h._("Send Location"),j=c("ReasonReact").reducerComponent("ChatTabSendLocationDialogReact");function k(l,m,n){__p&&__p();var o=function o(n,r){__p&&__p();var s=r[2],t=c("CurrentUser").getID(),u=c("MercuryMessageObject").getForFBID(t),v=c("MercuryMessageActions").getForFBID(t),w="upload_"+c("PhotosUploadID").getNewID(),x=u.constructAttachmentMessageObject(c("MercuryTriodeSourceUtil").getMercuryTriodeSource(),l),y=s[2],z=s[3];if(y)if(z)x.location_attachment={coordinates:{latitude:y[0],longitude:z[0]},is_current_location:true};var A={upload_id:w,preview_attachments:[{upload_id:w,attach_type:c("MercuryAttachmentType").PHOTO,preview_uploading:true}]};v.addAttachmentPlaceholder(x,w,A);v.send(x,function(){v.confirmAttachmentPlaceholder(w,{upload_id:w});return 0},undefined);return c("bs_curry")._1(m,0)},p=function p(r){__p&&__p();var s=r[2],t=s[0],u=s[2],v=s[3],w=0;if(t)w=1;else if(u)if(v)return c("ReasonReact").element(0,0,c("xUIDialogReact").Button[0]([0],[i],[c("bs_curry")._1(r[0],o)],[2],[]));else w=1;else w=1;if(w===1)return c("ReasonReact").element(0,0,c("xUIDialogReact").CancelButton[0]([]))},q=j.slice();q[4]=c("messengerSendLocationDialogReact").didMount;q[6]=c("messengerSendLocationDialogReact").willUnmount;q[9]=function(r){return c("React").createElement("div",undefined,c("ReasonReact").element(0,0,c("xUIDialogReact").Header[0]([c("ReasonReact").element(0,0,c("xUIDialogReact").HeaderTitle[0](c("messengerSendLocationDialogReact").getTitle(r[2])))])),c("ReasonReact").element(0,0,c("xUIDialogReact").Body[0](c("messengerSendLocationDialogReact").getBody(c("ReasonReact").element(0,0,c("xUISpinnerReact").make([])),r))),c("ReasonReact").element(0,0,c("xUIDialogReact").Footer[0](p(r))))};q[10]=c("messengerSendLocationDialogReact").initialState;q[12]=function(r,s){switch(r.tag|0){case 0:var t=r[0];return c("bs_block").__(0,[[s[0],s[1],[t[0]],[t[1]],s[4]]]);case 1:var u=r[0];return c("bs_block").__(0,[[s[0],s[1],[u.coords.latitude],[u.coords.longitude],s[4]]]);case 2:var v=r[0].code,w=v!==1?[h._("Sorry, something went wrong. Please try again or send your location from the Messenger app."),h._("Couldn't Find Location")]:[h._("Facebook needs permission to access your location. Please update your browser settings or use the Messenger app."),h._("Permission Required")];return c("bs_block").__(0,[[[w[0]],[w[1]],s[2],s[3],s[4]]]);case 3:return c("bs_block").__(0,[[[h._("Your browser doesn't support location sharing. You can also send your location from the Messenger app.")],[h._("Location Not Supported")],s[2],s[3],s[4]]])}};return q}g.sendButtonTitle=i;g.component=j;g.make=k}),null);
__d("chatTabSendLocationDialog",["DialogX","ReasonReact","chatTabSendLocationDialogReact"],(function a(b,c,d,e,f,g){"use strict";function h(j,k,l){var m=c("ReasonReact").element(0,0,c("chatTabSendLocationDialogReact").make(j,k,[])),n={width:524};c("DialogX").show(new(c("DialogX"))(n,m));return 0}var i=524;g.dialogWidth=i;g.show=h}),null);
__d("messengerAskLocationPermissionDialogReact",["fbt","ReasonReact","messengerDialogsRe","messengerDialogReact","messengerDialogBodyReact","messengerSendLocationDialogReact"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i=h._("Allow Location Access"),j=h._("Giving Messenger access to your location enables features like sharing where you are with friends. You can turn it off anytime."),k=h._("Allow"),l=c("ReasonReact").statelessComponent("MessengerAskLocationPermissionDialogReact");function m(p){if(p)return 0;else return c("messengerDialogsRe").removeDialog(0)}function n(p,q){var r=function r(){c("messengerDialogsRe").removeDialog(0);return c("messengerDialogsRe").showDialog(function(){return c("ReasonReact").element(0,0,c("messengerSendLocationDialogReact").make(p,function(){return 0},[]))})},s=l.slice();s[9]=function(){return c("ReasonReact").element(0,0,c("messengerDialogReact").Dialog[0](0,m,0,0,0,0,0,[c("ReasonReact").element(0,0,c("messengerDialogReact").Header[0](0,0,i)),c("ReasonReact").element(0,0,c("messengerDialogBodyReact").make(0,[j])),c("ReasonReact").element(0,0,c("messengerDialogReact").Footer[0](0,0,[c("ReasonReact").element(0,0,c("messengerDialogReact").CancelButton[0](0,[])),c("ReasonReact").element(0,0,c("messengerDialogReact").Button[0](0,[k],0,0,[r],[0],0,0,[]))]))]))};return s}var o=c("ReasonReact").wrapReasonForJs(l,function(p){return n(p.threadID,[])});g.title=i;g.message=j;g.buttonLabel=k;g.component=l;g.handleToggle=m;g.make=n;g.jsComponent=o}),null);
__d("MessengerBotsQuickReplyButtonContainer.react",["cx","fbt","Bootloader","BootloadedComponent.react","chatTabSendLocationDialog","CurrentUser","JSResource","LazyComponent.react","LoadOnRender.react","MercuryIDs","MercuryMessageActions","MercuryMessageObject","MercurySourceType","MessengerAdsWebTypedLogger","messengerAskLocationPermissionDialogReact","MessengerBotsWebTypedLogger","MessengerBotsQuickReplyButton.react","MessengerContextualDialog.react","messengerDialogsRe","MessengerQuickCamActions","MessengerQuickCamOrigins","MessengerEnvironment","messengerSendLocationDialogReact","MessengerSpinner.react","MNBotsLoggerEvents","MNAdsLoggerEventEnum","MNOmniMConstants","OmniMActions","P2PActions","P2PLogger","P2PPaymentLoggerEvent","P2PPaymentLoggerEventFlow","PECurrency","React","SimpleXUIDialog","XUIDialog.react","XUISpinner.react","gkx"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("MercuryMessageActions").get(),m=c("messengerAskLocationPermissionDialogReact").jsComponent,n=c("messengerSendLocationDialogReact").jsComponent,o=c("React").PropTypes,p="omni_m",q=c("React").createElement("div",{style:{padding:"30px",textAlign:"center"}},c("React").createElement(c("MessengerSpinner.react"),{color:"grey"})),r=function r(t){c("Bootloader").loadModules(["messengerVoiceClipFlyoutReact"],function(u){var v=u.jsComponent;return t(v)},"MessengerBotsQuickReplyButtonContainer.react")};j=babelHelpers.inherits(s,c("React").PureComponent);k=j&&j.prototype;function s(){__p&&__p();var t,u;for(var v=arguments.length,w=Array(v),x=0;x<v;x++)w[x]=arguments[x];return u=(t=k.constructor).call.apply(t,[this].concat(w)),this.state={showDismiss:false,camDialogOpen:false,voiceDialogOpen:false},this.$MessengerBotsQuickReplyButtonContainer1=false,this.$MessengerBotsQuickReplyButtonContainer2=null,this.$MessengerBotsQuickReplyButtonContainer20=function(){if(!c("gkx")("AT7ie83_z5SIvpbdhBrlmQMZBovTqIpA6213k5MbLZzD2Ww5NbZEgz3N3l-lg4CUpabJJTrEB0_WEvmPGnoyXBqM")&&this.props.source===c("MNOmniMConstants").OMNIM)this.setState({showDismiss:true})}.bind(this),this.$MessengerBotsQuickReplyButtonContainer18=function(){this.setState({showDismiss:false})}.bind(this),this.$MessengerBotsQuickReplyButtonContainer21=function(){var y=this.props,z=y.threadID,A=y.option,B=y.source,C=y.index;c("OmniMActions").suggestionCompleted(z,A,B,C)}.bind(this),this.$MessengerBotsQuickReplyButtonContainer19=function(){var y=this.props,z=y.threadID,A=y.option,B=y.source,C=y.index;c("OmniMActions").suggestionDismissed(z,A,B,C)}.bind(this),this.$MessengerBotsQuickReplyButtonContainer3=function(){var y=new(c("MercuryMessageObject"))(c("CurrentUser").getID()),z=this.props,A=z.option,B=z.source,C=this.props.threadID;l.send(y.constructCTAConfirmationMessageObject(A.title,c("MercurySourceType").TITAN_WEB,C,A));if(B===c("MNOmniMConstants").QUICKREPLIES){new(c("MessengerBotsWebTypedLogger"))().setEvent(c("MNBotsLoggerEvents").BOT_COMPOSER_QUICK_REPLY_TAPPED).setPageID(c("MercuryIDs").getUserIDFromThreadID(C)).setPayload(A.payload).setTitle(A.title).setQrContentType(A.content_type).setIndex(this.props.index.toString()).log();if(this.props.isSponsored)new(c("MessengerAdsWebTypedLogger"))().setEvent(c("MNAdsLoggerEventEnum").QUICK_REPLY_TAPPED).setIsSponsored(this.props.isSponsored).setMessageID(this.props.messageId).setPageID(this.props.pageId).setIndex(this.props.index.toString()).log()}this.$MessengerBotsQuickReplyButtonContainer21()}.bind(this),this.$MessengerBotsQuickReplyButtonContainer4=function(){__p&&__p();var y=c("MessengerEnvironment").messengerui;if(y)if(navigator&&"permissions"in navigator)navigator.permissions.query({name:"geolocation"}).then(function(z){var A=z&&z.state;if(A==="prompt")c("messengerDialogsRe").showDialog(function(){return c("React").createElement(m,{threadID:this.props.threadID})}.bind(this));else c("messengerDialogsRe").showDialog(function(){return c("React").createElement(n,{threadID:this.props.threadID,onCompletion:this.$MessengerBotsQuickReplyButtonContainer21})}.bind(this))}.bind(this)).done();else c("messengerDialogsRe").showDialog(function(){return c("React").createElement(n,{threadID:this.props.threadID,onCompletion:this.$MessengerBotsQuickReplyButtonContainer21})}.bind(this));else c("chatTabSendLocationDialog").show(this.props.threadID,this.$MessengerBotsQuickReplyButtonContainer21)}.bind(this),this.$MessengerBotsQuickReplyButtonContainer6=function(){var y=this.props,z=y.option,A=y.threadID,B=z&&z.data&&z.data.payment_amount,C=z&&z.data&&z.data.payment_currency,D=z&&z.data&&z.data.payment_type,E={referrer:p,threadID:A,openRequestTab:D==="request",onCompletion:this.$MessengerBotsQuickReplyButtonContainer21};if(B&&C)E.amount=c("PECurrency").formatAmount(C,B,false,false,false,false);c("P2PLogger").log(c("P2PPaymentLoggerEvent").UI_ACTN_SEND_MONEY_OMNIM_SUGGESTION_CLICKED,{www_event_flow:D==="request"?c("P2PPaymentLoggerEventFlow").UI_FLOW_P2P_REQUEST:c("P2PPaymentLoggerEventFlow").UI_FLOW_P2P_SEND,amount:B,currency:C,object_id:c("MercuryIDs").getThreadFBIDFromThreadID(A)});c("P2PActions").chatSendViewOpened(E)}.bind(this),this.$MessengerBotsQuickReplyButtonContainer5=function(){var y=new(c("MercuryMessageObject"))(c("CurrentUser").getID()),z=this.props.option,A=this.props.threadID,B=z.data,C=B&&B.sticker_id;if(!C)return;var D=y.constructStickerMessageObject(C+"",c("MercurySourceType").TITAN_WEB,A);D.body="";l.send(D);this.$MessengerBotsQuickReplyButtonContainer21()}.bind(this),this.$MessengerBotsQuickReplyButtonContainer8=function(y){if(this.state.camDialogOpen)return;y.stopPropagation();this.setState({camDialogOpen:!this.state.camDialogOpen})}.bind(this),this.$MessengerBotsQuickReplyButtonContainer10=function(){__p&&__p();var y=new(c("MercuryMessageObject"))(c("CurrentUser").getID()),z=this.props,A=z.option,B=z.source,C=z.viewerEmail,D=z.viewerPhone,E=this.props.threadID,F=null;switch(A.content_type){case"user_email":F=C;break;case"user_phone_number":F=D;break;default:break}if(F===null)return;var G=A;G.payload=F;l.send(y.constructCTAConfirmationMessageObject(F,c("MercurySourceType").TITAN_WEB,E,G));if(B===c("MNOmniMConstants").QUICKREPLIES)new(c("MessengerBotsWebTypedLogger"))().setEvent(c("MNBotsLoggerEvents").BOT_COMPOSER_QUICK_REPLY_TAPPED).setPageID(c("MercuryIDs").getUserIDFromThreadID(E)).setQrContentType(A.content_type).setIndex(this.props.index.toString()).log();this.$MessengerBotsQuickReplyButtonContainer21()}.bind(this),this.$MessengerBotsQuickReplyButtonContainer22=function(){if(this.state.camDialogOpen)this.setState({camDialogOpen:false})}.bind(this),this.$MessengerBotsQuickReplyButtonContainer23=function(y){if(!y)this.$MessengerBotsQuickReplyButtonContainer22();else c("MessengerQuickCamActions").requestUserMedia(this.props.viewer,this.props.threadID)}.bind(this),this.$MessengerBotsQuickReplyButtonContainer9=function(y){y.stopPropagation();if(this.state.voiceDialogOpen||this.$MessengerBotsQuickReplyButtonContainer1)return;this.setState({voiceDialogOpen:!this.state.voiceDialogOpen})}.bind(this),this.$MessengerBotsQuickReplyButtonContainer11=function(y){this.$MessengerBotsQuickReplyButtonContainer1=this.state.voiceDialogOpen}.bind(this),this.$MessengerBotsQuickReplyButtonContainer15=function(y){this.setState({voiceDialogOpen:y})}.bind(this),this.$MessengerBotsQuickReplyButtonContainer16=function(){this.setState({voiceDialogOpen:false})}.bind(this),this.$MessengerBotsQuickReplyButtonContainer17=function(y){this.setState({voiceDialogOpen:false});this.props.onVoiceClipCreate&&this.props.onVoiceClipCreate(y)}.bind(this),u}s.prototype.render=function(){__p&&__p();var t=this.props,u=t.option,v=t.source,w=t.viewerEmail,x=t.viewerPhone;if(u.content_type==="user_email"&&w===null||u.content_type==="user_phone_number"&&x===null)return null;var y={text:this.$MessengerBotsQuickReplyButtonContainer3,location:this.$MessengerBotsQuickReplyButtonContainer4,sticker:this.$MessengerBotsQuickReplyButtonContainer5,p2p_payment:this.$MessengerBotsQuickReplyButtonContainer6,ride_service:this.$MessengerBotsQuickReplyButtonContainer7,open_camera:this.$MessengerBotsQuickReplyButtonContainer8,record_audio:this.$MessengerBotsQuickReplyButtonContainer9,user_email:this.$MessengerBotsQuickReplyButtonContainer10,user_phone_number:this.$MessengerBotsQuickReplyButtonContainer10},z={record_audio:this.$MessengerBotsQuickReplyButtonContainer11},A=this.$MessengerBotsQuickReplyButtonContainer12(y[u.content_type]),B=z[u.content_type],C=null;if(u.content_type==="open_camera"&&this.state.camDialogOpen)C=this.props.quickCamOriginLocation===c("MessengerQuickCamOrigins").MESSENGER?this.$MessengerBotsQuickReplyButtonContainer13():this.$MessengerBotsQuickReplyButtonContainer14();else if(u.content_type==="record_audio"&&this.state.voiceDialogOpen)C=c("React").createElement(c("MessengerContextualDialog.react"),{contextRef:function(){return this.$MessengerBotsQuickReplyButtonContainer2}.bind(this),shown:this.state.voiceDialogOpen,onToggle:this.$MessengerBotsQuickReplyButtonContainer15,onBlur:this.$MessengerBotsQuickReplyButtonContainer16},c("React").createElement(c("LoadOnRender.react"),{component:c("React").createElement(c("LazyComponent.react"),{onCancel:this.$MessengerBotsQuickReplyButtonContainer16,onStopAndGetVoiceClip:this.$MessengerBotsQuickReplyButtonContainer17}),loader:r,placeholder:q}));var D=null;switch(u.content_type){case"user_email":D=w;break;case"user_phone_number":D=x;break;default:break}return c("React").createElement("div",{onMouseLeave:this.$MessengerBotsQuickReplyButtonContainer18,className:(u.dismissed?"_18m_":"")+" _4yx8"+(this.state.showDismiss?" _835":"")+(v===c("MNOmniMConstants").OMNIM?" _4yx9":"")},c("React").createElement("div",{className:"_4yxa",onClick:this.$MessengerBotsQuickReplyButtonContainer19,role:"presentation"}),c("React").createElement("div",{onMouseOver:this.$MessengerBotsQuickReplyButtonContainer20},c("React").createElement(c("MessengerBotsQuickReplyButton.react"),{onClick:A,onMouseDown:B,option:u,className:this.props.className,setPreview:this.props.setPreview,ref:function(E){this.$MessengerBotsQuickReplyButtonContainer2=E}.bind(this),userData:D}),C))};s.prototype.$MessengerBotsQuickReplyButtonContainer12=function(t){var u=this.props,v=u.threadID,w=u.option,x=u.source,y=u.index;return function(){c("OmniMActions").suggestionClicked(v,w,x,y);return t.apply(undefined,arguments)}};s.prototype.$MessengerBotsQuickReplyButtonContainer7=function(){var t=i._("Couldn't order ride"),u=i._("You can only order a ride from the Messenger app.");c("SimpleXUIDialog").show(u,t)};s.prototype.$MessengerBotsQuickReplyButtonContainer13=function(){var t=window.innerWidth/3;return c("React").createElement(c("BootloadedComponent.react"),{bootloadPlaceholder:c("React").createElement("div",{style:{padding:"30px",textAlign:"center"}},c("React").createElement(c("MessengerSpinner.react"),null)),bootloadLoader:c("JSResource")("MessengerDialog.react").__setRef("MessengerBotsQuickReplyButtonContainer.react"),overflow:"hidden",shown:this.state.camDialogOpen,onBlur:this.$MessengerBotsQuickReplyButtonContainer22,onToggle:this.$MessengerBotsQuickReplyButtonContainer23,width:400>t?400:t},c("React").createElement(c("BootloadedComponent.react"),{bootloadPlaceholder:c("React").createElement("div",{style:{padding:"30px",textAlign:"center"}},c("React").createElement(c("MessengerSpinner.react"),null)),bootloadLoader:c("JSResource")("MessengerQuickCamDialog.react").__setRef("MessengerBotsQuickReplyButtonContainer.react"),location:this.props.quickCamOriginLocation,onShown:function(u){this.$MessengerBotsQuickReplyButtonContainer23(true)}.bind(this),onHidden:this.$MessengerBotsQuickReplyButtonContainer22,onEscKeyDown:this.$MessengerBotsQuickReplyButtonContainer22,shown:this.state.camDialogOpen,threadID:this.props.threadID,viewer:this.props.viewer}))};s.prototype.$MessengerBotsQuickReplyButtonContainer14=function(){var t=window.innerWidth/3;return c("React").createElement(c("XUIDialog.react"),{label:i._("Take a photo"),overflow:"hidden",shown:this.state.camDialogOpen,onBlur:this.$MessengerBotsQuickReplyButtonContainer22,hideOnEscape:true,onToggle:this.$MessengerBotsQuickReplyButtonContainer23,width:400>t?400:t},c("React").createElement(c("BootloadedComponent.react"),{bootloadPlaceholder:c("React").createElement("div",{style:{padding:"30px",textAlign:"center"}},c("React").createElement(c("XUISpinner.react"),null)),bootloadLoader:c("JSResource")("MessengerQuickCamDialog.react").__setRef("MessengerBotsQuickReplyButtonContainer.react"),location:this.props.quickCamOriginLocation,onShown:function(u){this.$MessengerBotsQuickReplyButtonContainer23(true)}.bind(this),onHidden:this.$MessengerBotsQuickReplyButtonContainer22,onEscKeyDown:this.$MessengerBotsQuickReplyButtonContainer22,shown:this.state.camDialogOpen,threadID:this.props.threadID,viewer:this.props.viewer}))};s.propTypes={index:o.number.isRequired,onVoiceClipCreate:o.func,option:o.object.isRequired,threadID:o.string.isRequired,quickCamOriginLocation:o.oneOf(c("MessengerQuickCamOrigins").getValues()).isRequired,source:o.string.isRequired,setPreview:o.func.isRequired,viewer:o.string.isRequired,messageId:o.string.isRequired,pageId:o.string.isRequired};f.exports=s}),null);
__d("OmniMHelpers",["gkx"],(function a(b,c,d,e,f,g){function h(i){if(!c("gkx")("AT5yWbHZcFbk8dHu9E8OgmaLZBFHY9-zh1crwQUro5XMW8HcPRzq86dofIPpo_Blktep-KcJ1J4uPJMiA3IOS9wnV278BkfyuEh6Dpu-S3Q1Hg"))return 0;if(i&&i.has("suggestion_mode")){var j=i.get("suggestion_mode");return j!==null&&j!==undefined?j:1}return 3}f.exports={suggestionMode:h}}),null);
__d("MessengerBotsQuickReplyButtonList.react",["cx","fbt","AdsArrowedCarouselEnhanced.react","MessengerEnvironment","immutable","Link.react","MercuryConfig","MercuryIDs","MessengerBotsQuickReplyButtonContainer.react","MessengerBotsWebTypedLogger","MessengerQuickCamOrigins","MNBotsLoggerEvents","MNOmniMConstants","OmniMActions","OmniMHelpers","React","ShimButton.react","SimpleNUXMessage","SimpleNUXMessageTypes","Visibility","XUIAmbientNUX.react","gkx"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("React").PropTypes;j=babelHelpers.inherits(m,c("React").PureComponent);k=j&&j.prototype;function m(){__p&&__p();var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=k.constructor).call.apply(o,[this].concat(r)),this.state={nuxShown:false,previewItem:null,showPreview:false,showDismiss:false},this.$MessengerBotsQuickReplyButtonList1="mLogo",this.$MessengerBotsQuickReplyButtonList2=null,this.$MessengerBotsQuickReplyButtonList3=null,this.$MessengerBotsQuickReplyButtonList4=function(){if(this.$MessengerBotsQuickReplyButtonList3){clearTimeout(this.$MessengerBotsQuickReplyButtonList3);this.$MessengerBotsQuickReplyButtonList3=null}if(c("Visibility").isHidden()){c("Visibility").removeAllListeners();c("Visibility").once(c("Visibility").VISIBLE,this.$MessengerBotsQuickReplyButtonList14)}else this.$MessengerBotsQuickReplyButtonList14()}.bind(this),this.$MessengerBotsQuickReplyButtonList14=function(){var t=this.props,u=t.options,v=t.threadID;if(v){this.$MessengerBotsQuickReplyButtonList3=setTimeout(function(){c("OmniMActions").barTimedOut(v,u);this.$MessengerBotsQuickReplyButtonList3=null;c("Visibility").removeAllListeners()}.bind(this),c("MercuryConfig").OmniMSuggestionTTL);c("Visibility").removeAllListeners();c("Visibility").once(c("Visibility").HIDDEN,this.$MessengerBotsQuickReplyButtonList4)}}.bind(this),this.$MessengerBotsQuickReplyButtonList13=function(t){this.setState({previewItem:t});this.$MessengerBotsQuickReplyButtonList2=setTimeout(function(){return this.setState({showPreview:true})}.bind(this),c("MercuryConfig").OmniMPreviewDelay);return function(){if(this.state.previewItem===t){clearTimeout(this.$MessengerBotsQuickReplyButtonList2);this.setState({previewItem:null})}}.bind(this)}.bind(this),this.$MessengerBotsQuickReplyButtonList10=function(){var t=this.props.threadID;if(t)c("OmniMActions").suggestionsDismissedForThread(t)}.bind(this),this.$MessengerBotsQuickReplyButtonList11=function(){if(!c("gkx")("AT7ie83_z5SIvpbdhBrlmQMZBovTqIpA6213k5MbLZzD2Ww5NbZEgz3N3l-lg4CUpabJJTrEB0_WEvmPGnoyXBqM"))this.setState({showDismiss:true})}.bind(this),this.$MessengerBotsQuickReplyButtonList9=function(){this.setState({showDismiss:false})}.bind(this),this.$MessengerBotsQuickReplyButtonList15=function(){c("SimpleNUXMessage").markMessageSeenByUser(c("SimpleNUXMessageTypes").OMNIM_SUGGESTIONS);this.setState({nuxShown:false})}.bind(this),p}m.prototype.componentDidMount=function(){if(this.props.source===c("MNOmniMConstants").OMNIM){this.props.options.map(function(o,p){return c("OmniMActions").suggestionDisplayed(o,p)});c("OmniMActions").barDisplayed(this.props.options);this.$MessengerBotsQuickReplyButtonList4()}this.$MessengerBotsQuickReplyButtonList5()};m.prototype.componentDidUpdate=function(o){__p&&__p();var p=o.source===c("MNOmniMConstants").OMNIM?o.options:[],q=void 0;if(this.props.source===c("MNOmniMConstants").OMNIM){q=this.props.options;this.$MessengerBotsQuickReplyButtonList4()}else q=[];if(p.length||q.length)this.$MessengerBotsQuickReplyButtonList6(p,q);this.$MessengerBotsQuickReplyButtonList5();this.$MessengerBotsQuickReplyButtonList7(o,this.props)};m.prototype.componentWillUnmount=function(){if(this.props.source===c("MNOmniMConstants").OMNIM){this.props.options.map(function(o,p){return c("OmniMActions").suggestionDisappeared(o,p)});c("OmniMActions").barDisappeared(this.props.options)}clearTimeout(this.$MessengerBotsQuickReplyButtonList2);clearTimeout(this.$MessengerBotsQuickReplyButtonList3)};m.prototype.render=function(){var o=c("React").createElement(c("AdsArrowedCarouselEnhanced.react"),null,this.$MessengerBotsQuickReplyButtonList8());if(this.props.source===c("MNOmniMConstants").OMNIM){var p=c("MessengerEnvironment").messengerui,q=this.props.omniMPrefs,r=c("OmniMHelpers").suggestionMode(q),s=!c("gkx")("AT62UFADKS339jdYE0vq15NFK8-_TIiFikMiC8sVLmJqdFhrvA3GEl6cx5H3ilEIWjQyNURlEpW0chkuoU3Cjuhg"),t=c("React").createElement("div",{className:"_5fop"+(!p?" _1nl8":"")+(this.state.showDismiss?" _835":""),onMouseLeave:this.$MessengerBotsQuickReplyButtonList9},c("React").createElement(c("ShimButton.react"),{className:"_4yxa",onClick:this.$MessengerBotsQuickReplyButtonList10,title:i._("Dismiss all suggestions")}),c("React").createElement("div",{className:"_17in"+(r==1?" _1ei7":"")+(r==2?" _1eig":""),onMouseOver:this.$MessengerBotsQuickReplyButtonList11,ref:this.$MessengerBotsQuickReplyButtonList1}));return c("React").createElement("div",{className:"uiContextualLayerParent"},this.$MessengerBotsQuickReplyButtonList12(),c("React").createElement("div",{className:"_17im"+(!s?" _2dfb":"")},c("React").createElement("div",{className:"_3-kc"+(this.state.showPreview?" _3-kd":"")},this.state.previewItem),s?t:null,c("React").createElement("div",{className:"_17io"},o)))}return o};m.prototype.$MessengerBotsQuickReplyButtonList8=function(){var o=this.props,p=o.options,q=o.source,r=c("MessengerEnvironment").messengerui;if(q===c("MNOmniMConstants").QUICKREPLIES)new(c("MessengerBotsWebTypedLogger"))().setEvent(c("MNBotsLoggerEvents").BOT_COMPOSER_QUICK_REPLY_DISPLAYED).setPageID(c("MercuryIDs").getUserIDFromThreadID(this.props.threadID)).log();return p.map(function(s,t){return c("React").createElement("div",{className:(r?"_1nl7":"")+(!r?" _1nl8":""),key:t},c("React").createElement(c("MessengerBotsQuickReplyButtonContainer.react"),{option:s,onVoiceClipCreate:this.props.onVoiceClipCreate,threadID:this.props.threadID,index:t,source:q,viewer:this.props.viewer,quickCamOriginLocation:this.props.quickCamOriginLocation,setPreview:this.$MessengerBotsQuickReplyButtonList13,messageId:this.props.messageId,pageId:this.props.pageId,isSponsored:this.props.isSponsored,viewerEmail:this.props.viewerEmail,viewerPhone:this.props.viewerPhone}))}.bind(this))};m.prototype.$MessengerBotsQuickReplyButtonList12=function(){if(c("gkx")("AT5jRtP31RO5qmh8taq_mCREl3hvhoef6tDRkowr4ruT08c7VDjMC4oPfpSU2x_cKxSf_eiLniG0RJo3dxgxi7J8")&&this.state.nuxShown){var o=c("MessengerEnvironment").messengerui;return c("React").createElement(c("XUIAmbientNUX.react"),{className:"_53zy",contextRef:function(){return this.refs[this.$MessengerBotsQuickReplyButtonList1]}.bind(this),shown:this.state.nuxShown,position:"above",width:"custom",customwidth:o?450:245,onCloseButtonClick:this.$MessengerBotsQuickReplyButtonList15},c("React").createElement("div",{className:"_53z_"},c("React").createElement("h1",{className:"_53-0"},"[FB-ONLY] Introducing M"),c("React").createElement("p",{className:"_53-b"},"M will now provide suggestions right in your conversation. Let us know when they aren't helpful so we can improve M."),c("React").createElement("p",{className:"_53-c"},c("React").createElement(c("Link.react"),{onClick:this.$MessengerBotsQuickReplyButtonList15,target:"_blank",href:"https://fburl.com/omnim-nux"},"Learn How"))))}return null};m.prototype.$MessengerBotsQuickReplyButtonList5=function(){if(this.props.source===c("MNOmniMConstants").OMNIM&&this.refs[this.$MessengerBotsQuickReplyButtonList1]){var o=!c("SimpleNUXMessage").hasUserSeenMessage(c("SimpleNUXMessageTypes").OMNIM_SUGGESTIONS);this.setState({nuxShown:o})}else if(this.state.nuxShown)this.setState({nuxShown:false})};m.prototype.$MessengerBotsQuickReplyButtonList7=function(o,p){if(o.threadID!==p.threadID){if(o.source===c("MNOmniMConstants").OMNIM)c("OmniMActions").barDisappeared(o.options);if(p.source===c("MNOmniMConstants").OMNIM)c("OmniMActions").barDisplayed(p.options)}};m.prototype.$MessengerBotsQuickReplyButtonList6=function(o,p){__p&&__p();if(n(o.map(function(w){return w.suggestionID}),p.map(function(w){return w.suggestionID})))return;if(!o.length){p.map(function(w,r){return c("OmniMActions").suggestionDisplayed(w,r)});return}if(!p.length){o.map(function(w,r){return c("OmniMActions").suggestionDisappeared(w,r)});return}var q=c("immutable").Set(c("immutable").Range(0,p.length));for(var r=0;r<o.length;r++){var s=o[r],t=false;for(var u=0;u<p.length;u++){var v=p[u];if(s.suggestionID===v.suggestionID){if(r!==u)c("OmniMActions").suggestionDisplayed(v,u);t=true;q=q["delete"](u);break}}if(!t)c("OmniMActions").suggestionDisappeared(s,r)}q.map(function(w){return c("OmniMActions").suggestionDisplayed(p[w],w)})};m.propTypes={options:l.array.isRequired,onVoiceClipCreate:l.func,threadID:l.string,quickCamOriginLocation:l.oneOf(c("MessengerQuickCamOrigins").getValues()).isRequired,source:l.string.isRequired,viewer:l.string.isRequired};function n(o,p){if(o.length!==p.length)return false;var q;for(q=0;q<o.length;q++)if(o[q]!==p[q])return false;return true}f.exports=m}),null);