if (self.CavalryLogger) { CavalryLogger.start_js(["zGMV3"]); }

__d("MessengerDecorator",["cssVar","cx","BootloadedComponent.react","CurrentUser","JSResource","MercuryAttachment","MercuryConfig","MercuryMessageActions","MercuryMessageCustomizations","MercuryTagHelper","MessageBorderType","MessageCustomizationType","MessagingFlowerBorder.react","MessagingGiftWrap.react","MessagingGiftWrapConstants","MessengerEnvironment","MessengerReactions.react","React","gkx"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=function j(s){var t=s.attachments&&s.attachments.length===1&&s.attachments[0];return!!t},k=function k(s){var t=s.attachments&&s.attachments.length===1&&s.attachments[0];if(!t)return false;if(c("MercuryAttachment").isPhotoGroupAttachment(t))return true;if(c("MercuryAttachment").isFileAttachment(t))if(c("MercuryConfig").MessengerForwardButtonForSharedFilesGK&&t.message_file_fbid)return true;return false},l=function l(s){__p&&__p();var t=[],u=[];s.attachments.forEach(function(v){if(v.metadata&&v.metadata.fbid){t.push(v.metadata.fbid.toString());u.push(v.attach_type.toString())}if(c("MercuryAttachment").isFileAttachment(v)&&v.message_file_fbid)if(c("MercuryConfig").MessengerForwardButtonForSharedFilesGK){t.push(v.message_file_fbid);u.push(v.attach_type)}});return{ids:t,types:u}},m=[{name:"GiftWrap",check:function s(t){var u=function u(w){return c("MercuryTagHelper").get(w,c("MessagingGiftWrapConstants").TAG_PREFIX)===c("MessagingGiftWrapConstants").VALENTINES_GIFT},v=function v(w){return!!c("MercuryTagHelper").get(w,c("MessagingGiftWrapConstants").UNWRAPPED_TAG)};return!!(t.tags&&u(t.tags)&&!v(t.tags))},render:function s(t,u){return c("React").createElement(c("MessagingGiftWrap.react"),{key:"giftwrap",onUnwrap:function v(){var w="2500ms",x=parseInt(w.substring(0,w.length-2),10);setTimeout(function(){return c("MercuryMessageActions").get().unwrap(t)},x)}})},getAdditionalClassNames:function s(){return null}},{name:"FlowerBorder",check:function s(t){return c("gkx")("AT7rTubr3N_DsfglfGkvVFG3tMrhGme9-eELltAXoSOKkQuD-9JepjOeFPMl1e8XndLLgVmcw1EaaNThD3K6r4QJpohV9bITGr6_ur1k_X_RGQ")&&c("MercuryMessageCustomizations").getCustomizationValue(t,c("MessageCustomizationType").BORDER)===c("MessageBorderType").FLOWERS},render:function s(t,u){if(c("MessengerEnvironment").messengerui)return c("React").createElement(c("MessagingFlowerBorder.react"),{offset:-10,key:"giftwrap:"+t.message_id});return c("React").createElement(c("MessagingFlowerBorder.react"),{key:"giftwrap:"+t.message_id})},getAdditionalClassNames:function s(){if(!c("MessengerEnvironment").messengerui)return"_337n";return null}},{name:"Reactions",check:function s(t,u){var v=!!(t.reactions&&Object.keys(t.reactions).length>0),w=!!(!u&&(k(t)||j(t)&&c("MercuryConfig").MessengerForwardButtonForSharedLinksQE));return v||w},render:function s(t,u,v,w){var x=k(t)||j(t)&&c("MercuryConfig").MessengerForwardButtonForSharedLinksQE;return c("React").createElement(c("MessengerReactions.react"),{isFromViewer:u,key:t.message_id+"-reactions",message:t,renderQuickAdd:x&&!u,hovered:w,participants:v&&v.participants})},getAdditionalClassNames:function s(){return"_5z-5"}}],n=[],o=[],p=[{name:"MontageReply",check:function s(t){if(!c("MercuryConfig").MontageThreadViewer)return false;var u=t.montage_reply_data&&t.montage_reply_data.message_id;return!!u},render:function s(t,u){var v=t.montage_reply_data&&t.montage_reply_data.message_id,w=t.montage_reply_data&&t.montage_reply_data.reply_action;return c("React").createElement(c("BootloadedComponent.react"),{key:"montagereply:"+t.message_id,bootloadPlaceholder:c("React").createElement("div",null),bootloadLoader:c("JSResource")("MontageReplyDecoratorContainer.react").__setRef("MessengerDecorator"),isFromViewer:u,messageID:v,replyAction:w,replyAuthorID:t.author,threadID:t.thread_id})},getAdditionalClassNames:function s(){return null}}],q=[{name:"ForwardImages",check:function s(t){return k(t)},render:function s(t,u){var v=l(t),w=v.ids,x=v.types;return c("React").createElement(c("BootloadedComponent.react"),{key:"forwardimages:"+t.message_id,bootloadPlaceholder:c("React").createElement("div",null),bootloadLoader:c("MessengerEnvironment").messengerui?c("JSResource")("MessengerPhotoForwardButton.react").__setRef("MessengerDecorator"):c("JSResource")("ChatPhotoForwardButton.react").__setRef("MessengerDecorator"),attachmentIDs:w,attachmentTypes:x,isFromViewer:u})},getAdditionalClassNames:function s(){return"_ylc"}},{name:"ReactionPrompt",check:function s(t){return!k(t)},render:function s(t,u,v){return c("React").createElement(c("BootloadedComponent.react"),{key:"reactionprompt:"+t.message_id,bootloadPlaceholder:c("React").createElement("div",null),bootloadLoader:c("JSResource")("MessengerReactionsPrompt.react").__setRef("MessengerDecorator"),message:t,messageIsSelected:v&&v.messageIsSelected&&(!c("MercuryConfig").MessengerForwardButtonForSharedLinksQE||c("MercuryConfig").MessengerForwardButtonForSharedLinksQE&&!j(t)),onShowMenu:v&&v.onShowMenu})},getAdditionalClassNames:function s(){return null}},{name:"MessageActions",check:function s(t){return c("MessengerEnvironment").messengerui},render:function s(t,u,v){var w=k(t)||j(t)&&c("MercuryConfig").MessengerForwardButtonForSharedLinksQE;return c("React").createElement(c("BootloadedComponent.react"),{key:"messageactions:"+t.message_id,bootloadPlaceholder:c("React").createElement("div",null),bootloadLoader:c("JSResource")("MessengerMessageActions.react").__setRef("MessengerDecorator"),message:t,isActive:v&&v.messageIsSelected,onShowMenu:v&&v.onShowMenu,includeReactions:w,isShowingOriginal:v&&v.isShowingOriginal,hasFormatting:v&&v.hasFormatting,onToggleOriginal:v&&v.handleToggleOriginal})},getAdditionalClassNames:function s(){return null}}],r={getBeforeDecorators:function s(){return p},getAfterDecorators:function s(){return m},getInnerDecorators:function s(){return q},getAfterExternalDecorators:function s(){return n},getInsideDecorators:function s(){return o}};f.exports=r}),null);